
<!DOCTYPE HTML>
<html lang="fr">
  <head>
  	<title>Apprendre à programmer avec Python 3</title>
  	<meta charset="UTF-8" />
	<meta content="developpez-com" name="generator">
	<meta name="description" content="Apprendre à programmer avec Python 3"/>
	<meta name="author" content="Gérard Swinnen"/>
	<meta name="keywords" content="python, debuter,programmer,Python 3,Gérard Swinnen,Swinnen,apprendre,"> 
  	<script type="text/javascript" src="./js/jquery-3.4.1.js"></script>
  	<link rel="shortcut icon" type="image/x-icon" href="https://www.developpez.com/template/favicon.ico" />
                                                 
    <link rel="stylesheet" type="text/css" media="screen" href="./code.css" />
  	<link rel="stylesheet" type="text/css" href="./mini-gabarit0.css" />
  	<link rel="stylesheet" type="text/css" href="./lightbox.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="./developpez-kit-generation.css" />
    

	
    <!--[if IE 9]><link rel="stylesheet" type="text/css" href="./ie9.css" /><![endif]-->
    <!--[if IE 8]><link rel="stylesheet" type="text/css" href="./ie8.css" /><![endif]-->
    <!--[if lt IE 9]><link rel="stylesheet" type="text/css" href="./ie.css" /><![endif]-->
    <!--[if IE 7]><link rel="stylesheet" type="text/css" href="./ie7.css" /><![endif]-->
    <!--[if lte IE 6]><link rel="stylesheet" type="text/css" href="./ie6.css" /><![endif]-->
    <!--[if lt IE 9]><script type="text/javascript" src="./js/html5_ie.js"></script><![endif]-->
 
    <script type="text/javascript" src="https://www.developpez.com/template/kit/mathjax-dvp/MathJax.js?config=TeX-AMS-MML_HTMLorMML&locale=fr"></script>
    <script type="text/javascript" src="./js/developpez-kit-generation.js"></script>
    <script type="text/javascript" src="./js/fonctions-kit.js"></script>
    <script type="text/javascript" src="./js/lightbox.js"></script>
    <script type="text/javascript" src="./js/LecteurSWF.js"></script>

  </head>
  <body><header class="layout">
      <div id="quicknav">	
        <nav>	
          <ul>
        		<li>
        			<a style="color: #B7D0ED;" href="https://www.developpez.net/forums/">Forums</a>
        		</li>
        		<li>
        			<a style="color: #B7D0ED;" href="https://general.developpez.com/cours/">Tutoriels</a>
        		</li>
        		<li>
        			<a style="color: #B7D0ED;" href="https://magazine.developpez.com/">Magazine</a>
        		</li>
        		<li>
        			<a style="color: #B7D0ED;" href="https://general.developpez.com/faq/">FAQs</a>
        		</li>
        		<li>
        			<a style="color: #B7D0ED;" href="https://blog.developpez.com/">Blogs</a>
        		</li>
        		<li>
        			<a style="color: #B7D0ED;" href="https://projets.developpez.com/">Projets</a>
        		</li>
        		<li>
        			<a style="color: #B7D0ED;" href="https://chat.developpez.com/">Chat</a>
        		</li>
        		<li>
        			<a style="color: #B7D0ED;" href="https://www.developpez.com/newsletter/">Newsletter</a>
        		</li>
        		<li>
        			<a style="color: #B7D0ED;" href="https://etudes.developpez.com/">Études</a>
        		</li>
        		<li>
        			<a style="color: #B7D0ED;" href="https://emploi.developpez.com/">Emploi</a>
        		</li>
        		<li>
        			<a style="color: #B7D0ED;" href="https://club.developpez.com/">Club</a>
        		</li>
        		<li>
        			<a style="color: #B7D0ED;" href="https://club.developpez.com/contacts/">Contacts</a>
        		</li>
        	</ul>
        </nav>
      </div>
    <h1 class="titre-article" itemprop="name">Apprendre à programmer avec Python 3</h1><h2 class="soustitre-article">
    <a data-lightbox="lightbox[article]" href="./images/apprendre-python3.jpg"><img src="./images/apprendre-python3-miniature.jpg" alt="Image de couverture python 3" class="ImgCliquable image_verticale"/></a>
  </h2></header>
    <article id="contenuArticle" class="ArticleComplet " itemscope itemtype="http://schema.org/Article">
      <meta itemprop="genre" content="informatique"/>
      <meta itemprop="inLanguage" content="fr-FR"/>	

		
<nav class="nav-sommaire"><h2 class="TitreHeader ToggleGecko">Table des mati&egrave;res<img class="ToggleImgPlier" title="Plier" alt="Plier" src="./images/fleche-haut-bleue.png"/><img class="ToggleImgDeplier" title="Déplier" alt="Déplier" style="display:none;" src="./images/fleche-bas-bleue.png"/></h2><ul id="nav_sommaire_ul_principal" class="nav-sommaire-ul">
  
  
  
  
  
  
  <li><a class="summaryIndent0" href="#L16">16. Et pour quelques widgets de plus ...</a><ul class="nav-sommaire-ul Indentation16">
      
      
      <li><a class="summaryIndent1" href="#L16-A">16-A. Les boutons radio</a><ul class="nav-sommaire-ul Indentation16-A">
        
        
        
        
        <li><a class="summaryIndent2" href="#L16-A-1">16-A-1. Commentaires</a></li>
      </ul></li>
      <li><a class="summaryIndent1" href="#L16-B">16-B. Utilisation de cadres pour la composition d'une fenêtre</a><ul class="nav-sommaire-ul Indentation16-B">
        
        
        
        
        
        
        
        <li><a class="summaryIndent2" href="#L16-B-1">16-B-1. Commentaires</a></li>
      </ul></li>
      <li><a class="summaryIndent1" href="#L16-C">16-C. Comment déplacer des dessins à l'aide de la souris</a><ul class="nav-sommaire-ul Indentation16-C">
        
        
        
        
        
        
        
        
        
        <li><a class="summaryIndent2" href="#L16-C-1">16-C-1. Commentaires</a></li>
      </ul></li>
      <li><a class="summaryIndent1" href="#L16-D">16-D. Widgets complémentaires, widgets composites</a><ul class="nav-sommaire-ul Indentation16-D">
        
        
        
        
        <li><a class="summaryIndent2" href="#L16-D-1">16-D-1. Combo box simplifié</a><ul class="nav-sommaire-ul Indentation16-D-1">
          
          
          
          
          
          
          
          
          <li><a class="summaryIndent3" href="#L16-D-1-A">16-D-1-A. Commentaires</a></li>
        </ul></li>
        <li><a class="summaryIndent2" href="#L16-D-2">16-D-2. Le widget Text assorti d'un ascenseur</a><ul class="nav-sommaire-ul Indentation16-D-2">
          
          
          
          
          <li><a class="summaryIndent3" href="#L16-D-2-A">16-D-2-A. Gestion du texte affiché</a></li>
          <li><a class="summaryIndent3" href="#L16-D-2-B">16-D-2-B. Commentaires</a></li>
        </ul></li>
        <li><a class="summaryIndent2" href="#L16-D-3">16-D-3. Le widget Canvas assorti d'un ascenseur</a><ul class="nav-sommaire-ul Indentation16-D-3">
          
          
          
          
          
          
          
          
          
          
          <li><a class="summaryIndent3" href="#L16-D-3-A">16-D-3-A. Commentaires</a></li>
        </ul></li>
      </ul></li>
      <li><a class="summaryIndent1" href="#L16-E">16-E. Application à fenêtres multiples - paramétrage implicite</a><ul class="nav-sommaire-ul Indentation16-E">
        
        
        
        
        
        
        <li><a class="summaryIndent2" href="#L16-E-1">16-E-1. Commentaires</a></li>
      </ul></li>
      <li><a class="summaryIndent1" href="#L16-F">16-F. Barres d'outils - expressions lambda</a><ul class="nav-sommaire-ul Indentation16-F">
        
        
        
        
        
        <li><a class="summaryIndent2" href="#L16-F-1">16-F-1. Métaprogrammation - expressions lambda</a></li>
        <li><a class="summaryIndent2" href="#L16-F-2">16-F-2. Passage d'une fonction (ou d'une méthode) comme argument</a></li>
      </ul></li>
      <li><a class="summaryIndent1" href="#L16-G">16-G. Fenêtres avec menus</a><ul class="nav-sommaire-ul Indentation16-G">
        
        
        
        
        
        
        
        <li><a class="summaryIndent2" href="#L16-G-1">16-G-1. Cahier des charges de l'exercice</a></li>
        <li><a class="summaryIndent2" href="#L16-G-2">16-G-2. Première ébauche du programme</a><ul class="nav-sommaire-ul Indentation16-G-2">
          
          
          
          
          
          
          
          <li><a class="summaryIndent3" href="#L16-G-2-A">16-G-2-A. Analyse du script</a></li>
        </ul></li>
        <li><a class="summaryIndent2" href="#L16-G-3">16-G-3. Ajout de la rubrique Musiciens</a><ul class="nav-sommaire-ul Indentation16-G-3">
          
          
          
          
          
          
          
          
          
          
          <li><a class="summaryIndent3" href="#L16-G-3-A">16-G-3-A. Analyse du script</a></li>
        </ul></li>
        <li><a class="summaryIndent2" href="#L16-G-4">16-G-4. Ajout de la rubrique Peintres</a><ul class="nav-sommaire-ul Indentation16-G-4">
          
          
          
          
          
          <li><a class="summaryIndent3" href="#L16-G-4-A">16-G-4-A. Analyse du script</a></li>
        </ul></li>
        <li><a class="summaryIndent2" href="#L16-G-5">16-G-5. Ajout de la rubrique Options</a></li>
        <li><a class="summaryIndent2" href="#L16-G-6">16-G-6. Menu avec cases à cocher</a></li>
        <li><a class="summaryIndent2" href="#L16-G-7">16-G-7. Menu avec choix exclusifs</a></li>
        <li><a class="summaryIndent2" href="#L16-G-8">16-G-8. Contrôle du flux d'exécution à l'aide d'une liste</a></li>
        <li><a class="summaryIndent2" href="#L16-G-9">16-G-9. Pré-sélection d'une rubrique</a></li>
      </ul></li>
    </ul></li>
  
  
</ul></nav><div class="contenu"><section><section class="articleBody" itemprop="articleBody"><div class="cachee"><div class="barreNavigation"><hr class="hr-separation"/><a class="lientelechargement" href="page_15.html"><img title="Page précédente" alt="précédent" src="./images/kitprecedent.png"/></a><a class="lientelechargement" href="sommaire.html"><img title="Revenir au sommaire" alt="sommaire" src="./images/kitsommaire.png"/></a><a class="lientelechargement" href="page_17.html"><img alt="suivant" title="Page suivante" src="./images/kitsuivant.png"/></a><hr class="hr-separation"/></div></div>
  
  
  
  
  
  
  
		<h2 class="TitreSection0" id="L16">16. Et pour quelques widgets de plus ...<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h2><div class="BlocSection0">
      
      <p>
        <span class="italique">Pour vous aider à ébaucher vos propres projets personnels, nous vous présentons ici quelques nouveaux widgets ainsi que des utilisations avancées de
	  ceux que vous connaissez déjà (sans prétendre toutefois édifier ainsi une documentation de référence sur tkinter : vous trouverez
	  plutôt celle-ci dans les ouvrages ou les sites web spécialisés). Mais attention : au-delà de leur visée documentaire, les pages qui suivent
	  sont également destinées à vous apprendre par l'exemple comment s'articule une application construite à l'aide de classes et d'objets. Vous y
	  découvrirez d'ailleurs au passage quelques techniques Python qui n'ont pas encore été abordées auparavant, telles par exemple les expressions lambda
	  ou le paramétrage implicite des fonctions.</span>
      </p>
      
		<h3 class="TitreSection1" id="L16-A">16-A. Les boutons radio<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h3><div class="BlocSection1">
        
        <p>Les widgets « boutons radio » permettent de proposer à l'utilisateur un ensemble de choix mutuellement exclusifs. On les appelle ainsi
	  par analogie avec les boutons de sélection que l'on trouvait jadis sur les postes de radio. Ces boutons étaient conçus de telle manière qu'un seul
	  à la fois pouvait être enfoncé : tous les autres ressortaient automatiquement.</p>
        <div class="div-figure"><figure class="figure-center"><img class="figure-img-caption" src="./images/image45.png" alt="Image non disponible" width="338" height="100"/></figure></div>
        <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e38469">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e38469" onclick="selectionCode('contenuCoded0e38469', 'IdTitreCode-d0e38469');">S&eacute;lectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e38469" class="contenuCode"><code class="python_keyword1">from</code> tkinter <code class="python_keyword1">import</code> <code class="python_operator">*</code>
 
<code class="python_keyword1">class</code> <code class="python_function">RadioDemo</code><code class="python_operator">(</code>Frame):
  <code class="python_literal2">"""Démo : utilisation de widgets 'boutons radio'"""</code>
  <code class="python_keyword1">def</code> <code class="python_keyword3">__init__</code><code class="python_operator">(</code>self, boss <code class="python_operator">=</code><code class="python_keyword3">None</code>):
      <code class="python_literal2">"""Création d'un champ d'entrée avec 4 boutons radio"""</code>
      Frame.<code class="python_keyword3">__init__</code><code class="python_operator">(</code>self)
      self.<code class="python_function">pack</code><code class="python_operator">(</code>)
      <code class="python_comment1"># Champ d'entrée contenant un petit texte :</code>
      self.texte <code class="python_operator">=</code> <code class="python_function">Entry</code><code class="python_operator">(</code>self, width <code class="python_operator">=</code><code class="python_digit">30</code>, font <code class="python_operator">=</code><code class="python_literal1">"Arial 14"</code>)
      self.texte.<code class="python_function">insert</code><code class="python_operator">(</code>END, <code class="python_literal1">"La programmation, c'est génial"</code>)
      self.texte.<code class="python_function">pack</code><code class="python_operator">(</code>padx <code class="python_operator">=</code><code class="python_digit">8</code>, pady <code class="python_operator">=</code><code class="python_digit">8</code>)
      <code class="python_comment1"># Nom français et nom technique des quatre styles de police :	       </code>
      stylePoliceFr <code class="python_operator">=</code>[<code class="python_literal1">"Normal"</code>, <code class="python_literal1">"Gras"</code>, <code class="python_literal1">"Italique"</code>, <code class="python_literal1">"Gras/Italique"</code>]
      stylePoliceTk <code class="python_operator">=</code>[<code class="python_literal1">"normal"</code>, <code class="python_literal1">"bold"</code>, <code class="python_literal1">"italic"</code>  , <code class="python_literal1">"bold italic"</code>]
      <code class="python_comment1"># Le style actuel est mémorisé dans un 'objet-variable' tkinter ;</code>
      self.choixPolice <code class="python_operator">=</code> <code class="python_function">StringVar</code><code class="python_operator">(</code>)
      self.choixPolice.<a class="python_keyword2 lien_documentation_code" target="_blank" href="https://docs.python.org/fr/3/search.html?q=set#set"><span>set</span></a><code class="python_operator">(</code>stylePoliceTk[<code class="python_digit">0</code>])
      <code class="python_comment1"># Création des quatre 'boutons radio' :</code>
      <code class="python_keyword1">for</code> n <code class="python_keyword1">in</code> <a class="python_keyword2 lien_documentation_code" target="_blank" href="https://docs.python.org/fr/3/search.html?q=range#range"><span>range</span></a><code class="python_operator">(</code><code class="python_digit">4</code>):
      bout <code class="python_operator">=</code> <code class="python_function">Radiobutton</code><code class="python_operator">(</code>self,
		 text <code class="python_operator">=</code> stylePoliceFr[n],
		 variable <code class="python_operator">=</code> self.choixPolice,
		 value <code class="python_operator">=</code> stylePoliceTk[n],
		 command <code class="python_operator">=</code> self.changePolice)
      bout.<code class="python_function">pack</code><code class="python_operator">(</code>side <code class="python_operator">=</code>LEFT, padx <code class="python_operator">=</code><code class="python_digit">5</code>)
 
  <code class="python_keyword1">def</code> <code class="python_function">changePolice</code><code class="python_operator">(</code>self):
      <code class="python_literal2">"""Remplacement du style de la police actuelle"""</code>
      police <code class="python_operator">=</code> <code class="python_literal1">"Arial 15 "</code> <code class="python_operator">+</code> self.choixPolice.<code class="python_function">get</code><code class="python_operator">(</code>) 
      self.texte.<code class="python_function">configure</code><code class="python_operator">(</code>font <code class="python_operator">=</code>police)
 
<code class="python_keyword1">if</code> <code class="python_keyword3">__name__</code> <code class="python_operator">==</code> <code class="python_literal1">'__main__'</code>:
  <code class="python_function">RadioDemo</code><code class="python_operator">(</code>).<code class="python_function">mainloop</code><code class="python_operator">(</code>)</code></pre></div>
        
		<h4 class="TitreSection2" id="L16-A-1">16-A-1. Commentaires<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h4><div class="BlocSection2">
          
          <ul class="ListeDVP">
            <li>Ligne 3 : Cette fois encore, nous préférons construire notre petite application comme une classe dérivée de la classe <b>Frame()</b>,
	      ce qui nous permettrait éventuellement de l'intégrer sans difficulté dans une application plus importante.</li>
            <li>Ligne 8 : En général, on applique les méthodes de positionnement des widgets (<b>pack()</b>, <b>grid()</b>, ou <b>place()</b>) après
	      instanciation de ceux-ci, ce qui permet de choisir librement leur disposition à l'intérieur des fenêtres maîtresses. Comme nous le montrons ici,
	      il est cependant tout à fait possible de déjà prévoir ce positionnement dans le constructeur du widget.</li>
            <li>Ligne 11 : Les widgets de la classe <b>Entry</b> disposent de plusieurs méthodes pour accéder à la chaîne
	      de caractères affichée. La méthode <b>get()</b> permet de récupérer la chaîne entière. La méthode <b>insert()</b> permet
	      d'insérer de nouveaux caractères à un emplacement quelconque (c'est-à-dire au début, à la fin, ou même à l'intérieur
	      d'une chaîne préexistante éventuelle). Cette méthode s'utilise donc avec deux arguments, le premier indiquant l'emplacement de l'insertion
	      (utilisez <b>0</b> pour insérer au début, <b>END</b> pour insérer à la fin, ou encore un indice numérique quelconque pour désigner un
	      caractère dans la chaîne). La méthode <b>delete()</b> permet d'effacer tout ou partie de la chaîne. Elle s'utilise avec les mêmes arguments
	      que la précédente (cf. projet « Code des couleurs », page ).</li>
            <li>Lignes 14-15 : Plutôt que de les instancier dans des instructions séparées, nous préférons créer nos quatre boutons à
	      l'aide d'une boucle. Les options spécifiques à chacun d'eux sont d'abord préparées dans les deux listes <b>stylePoliceFr</b> et
	      <b>stylePoliceTk</b> : la première contient les petits textes qui devront s'afficher en regard de chaque bouton, et la seconde les valeurs qui devront leur
	      être associées.</li>
            <li>Lignes 17-18 : Comme expliqué à la page précédente, les quatre boutons forment un groupe autour d'une variable commune. Cette
	      variable prendra la valeur associée au bouton radio que l'utilisateur décidera de choisir. Nous ne pouvons cependant pas utiliser une variable ordinaire
	      pour remplir ce rôle, parce que les attributs internes des objets tkinter ne sont accessibles qu'au travers de méthodes spécifiques. Une fois de plus,
	      nous utilisons donc ici un <span class="italique">objet-variable</span> tkinter, de type chaîne de caractères, que nous instancions à partir de la classe <b>StringVar()</b>,
	      et auquel nous donnons une valeur par défaut à la ligne 18.</li>
            <li>Lignes 20 à 26 : Instanciation des quatre boutons radio. Chacun d'entre eux se voit attribuer une étiquette et une valeur différentes,
	      mais tous sont associés à la même variable tkinter commune (<b>self.choixPolice</b>). Tous invoquent également la même méthode
	      <b>self.changePolice()</b>, chaque fois que l'utilisateur effectue un clic de souris sur l'un ou l'autre.</li>
            <li>Lignes 28 à 31 : Le changement de police s'obtient par re-configuration de l'option <b>font</b> du widget <b>Entry</b>. Cette option attend un tuple
	      contenant le nom de la police, sa taille, et éventuellement son style. Si le nom de la police ne contient pas d'espaces, le tuple peut aussi être
	      remplacé par une chaîne de caractères. Exemples :<br/><b><span style="color:#000080;">(</span><span style="color:#000080;">'</span><span style="color:#000080;">Arial</span><span style="color:#000080;">'</span><span style="color:#000080;">, 12, </span><span style="color:#000080;">'</span><span style="color:#000080;">italic</span><span style="color:#000080;">'</span><span style="color:#000080;">)</span></b><br/><b><span style="color:#000080;">(</span><span style="color:#000080;">'</span><span style="color:#000080;">Helvetica</span><span style="color:#000080;">'</span><span style="color:#000080;">, 10)</span></b><br/><b><span style="color:#000080;">(</span><span style="color:#000080;">'</span><span style="color:#000080;">Times New Roman</span><span style="color:#000080;">'</span><span style="color:#000080;">, 12, </span><span style="color:#000080;">'</span><span style="color:#000080;">bold italic</span><span style="color:#000080;">'</span><span style="color:#000080;">)</span></b><br/><b><span style="color:#000080;">"Verdana 14 bold"</span></b><br/><b><span style="color:#000080;">"President 18 italic" </span><span style="color:#000080;">(</span></b>Voyez également les
	      exemples de la page ).</li>
          </ul>
        </div>
      </div>
      
		<h3 class="TitreSection1" id="L16-B">16-B. Utilisation de cadres pour la composition d'une fenêtre<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h3><div class="BlocSection1">
        
        <div class="div-figure"><figure class="figure-center"><a data-lightbox="lightbox[article]" href="./images/image48.png"><img class="ImgCliquable figure-img-caption" src="./images/image48.png" alt="Image non disponible" width="306" height="325"/></a></figure></div>
        <p>Vous avez déjà abondamment utilisé la classe de widgets <b>Frame()</b> (« cadre », en français), notamment pour
	  créer de nouveaux widgets complexes par dérivation.</p>
        <p>Le petit script ci-dessous vous montre l'utilité de cette même classe pour regrouper des ensembles de widgets et les disposer d'une manière
	  déterminée dans une fenêtre. Il vous démontre également l'utilisation de certaines options décoratives (bordures, relief,
	  etc.).</p>
        <p>Pour composer la fenêtre ci-contre, nous avons utilisé deux cadres <b>f1</b> et <b>f2</b>, de manière à réaliser deux groupes de
	  widgets bien distincts, l'un à gauche et l'autre à droite. Nous avons coloré ces deux cadres pour bien les mettre en évidence, mais ce n'est
	  évidemment pas indispensable.</p>
        <p>Le cadre <b>f1</b> contient lui-même 6 autres cadres, qui contiennent chacun un widget de la classe <b>Label()</b>. Le cadre <b>f2</b> contient un widget
	  <b>Canvas()</b> et un widget <b>Button()</b>. Les couleurs et garnitures sont de simples options.</p>
        <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e38908">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e38908" onclick="selectionCode('contenuCoded0e38908', 'IdTitreCode-d0e38908');">S&eacute;lectionnez</span></div></div><div style="overflow:auto;" class="code_avec_lignes"><div class="numeros_lignes">1.<br/>2.<br/>3.<br/>4.<br/>5.<br/>6.<br/>7.<br/>8.<br/>9.<br/>10.<br/>11.<br/>12.<br/>13.<br/>14.<br/>15.<br/>16.<br/>17.<br/>18.<br/>19.<br/>20.<br/>21.<br/>22.<br/>23.<br/>24.<br/>25.<br/>26.<br/>27.<br/>28.<br/>29.<br/>30.<br/></div><pre class="code_uniquement" style="margin: 0"><code class="contenuCode" id="contenuCoded0e38908"><code class="python_keyword1">from</code> tkinter <code class="python_keyword1">import</code> <code class="python_operator">*</code>
 
fen <code class="python_operator">=</code> <code class="python_function">Tk</code><code class="python_operator">(</code>)
fen.<code class="python_function">title</code><code class="python_operator">(</code><code class="python_literal1">"Fenêtre composée à l'aide de frames"</code>)
fen.<code class="python_function">geometry</code><code class="python_operator">(</code><code class="python_literal1">"300x300"</code>)
 
f1 <code class="python_operator">=</code> <code class="python_function">Frame</code><code class="python_operator">(</code>fen, bg <code class="python_operator">=</code> <code class="python_literal1">'#80c0c0'</code>)
f1.<code class="python_function">pack</code><code class="python_operator">(</code>side <code class="python_operator">=</code>LEFT, padx <code class="python_operator">=</code><code class="python_digit">5</code>)  
 
fint <code class="python_operator">=</code> [<code class="python_digit">0</code>]<code class="python_operator">*</code><code class="python_digit">6</code>
<code class="python_keyword1">for</code> <code class="python_operator">(</code>n, col, rel, txt) <code class="python_keyword1">in</code> [<code class="python_operator">(</code><code class="python_digit">0</code>, <code class="python_literal1">'grey50'</code>, RAISED, <code class="python_literal1">'Relief sortant'</code>),
	     <code class="python_operator">(</code><code class="python_digit">1</code>, <code class="python_literal1">'grey60'</code>, SUNKEN, <code class="python_literal1">'Relief rentrant'</code>),
	     <code class="python_operator">(</code><code class="python_digit">2</code>, <code class="python_literal1">'grey70'</code>, FLAT, <code class="python_literal1">'Pas de relief'</code>),
	     <code class="python_operator">(</code><code class="python_digit">3</code>, <code class="python_literal1">'grey80'</code>, RIDGE, <code class="python_literal1">'Crête'</code>),
	     <code class="python_operator">(</code><code class="python_digit">4</code>, <code class="python_literal1">'grey90'</code>, GROOVE, <code class="python_literal1">'Sillon'</code>),
	     <code class="python_operator">(</code><code class="python_digit">5</code>, <code class="python_literal1">'grey100'</code>, SOLID, <code class="python_literal1">'Bordure'</code>)]:
  fint[n] <code class="python_operator">=</code> <code class="python_function">Frame</code><code class="python_operator">(</code>f1, bd <code class="python_operator">=</code><code class="python_digit">2</code>, relief <code class="python_operator">=</code>rel)
  e <code class="python_operator">=</code> <code class="python_function">Label</code><code class="python_operator">(</code>fint[n], text <code class="python_operator">=</code>txt, width <code class="python_operator">=</code><code class="python_digit">15</code>, bg <code class="python_operator">=</code>col)
  e.<code class="python_function">pack</code><code class="python_operator">(</code>side <code class="python_operator">=</code>LEFT, padx <code class="python_operator">=</code><code class="python_digit">5</code>, pady <code class="python_operator">=</code><code class="python_digit">5</code>)
  fint[n].<code class="python_function">pack</code><code class="python_operator">(</code>side <code class="python_operator">=</code>TOP, padx <code class="python_operator">=</code><code class="python_digit">10</code>, pady <code class="python_operator">=</code><code class="python_digit">5</code>)
 
f2 <code class="python_operator">=</code> <code class="python_function">Frame</code><code class="python_operator">(</code>fen, bg <code class="python_operator">=</code><code class="python_literal1">'#d0d0b0'</code>, bd <code class="python_operator">=</code><code class="python_digit">2</code>, relief <code class="python_operator">=</code>GROOVE)
f2.<code class="python_function">pack</code><code class="python_operator">(</code>side <code class="python_operator">=</code>RIGHT, padx <code class="python_operator">=</code><code class="python_digit">5</code>)
 
can <code class="python_operator">=</code> <code class="python_function">Canvas</code><code class="python_operator">(</code>f2, width <code class="python_operator">=</code><code class="python_digit">80</code>, height <code class="python_operator">=</code><code class="python_digit">80</code>, bg <code class="python_operator">=</code><code class="python_literal1">'white'</code>, bd <code class="python_operator">=</code><code class="python_digit">2</code>, relief <code class="python_operator">=</code>SOLID)
can.<code class="python_function">pack</code><code class="python_operator">(</code>padx <code class="python_operator">=</code><code class="python_digit">15</code>, pady <code class="python_operator">=</code><code class="python_digit">15</code>)
bou <code class="python_operator">=</code><code class="python_function">Button</code><code class="python_operator">(</code>f2, text<code class="python_operator">=</code><code class="python_literal1">'Bouton'</code>)
bou.<code class="python_function">pack</code><code class="python_operator">(</code>)
 
fen.<code class="python_function">mainloop</code><code class="python_operator">(</code>)
</code></pre></div></div>
        
		<h4 class="TitreSection2" id="L16-B-1">16-B-1. Commentaires<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h4><div class="BlocSection2">
          
          <ul class="ListeDVP">
            <li>Lignes 3 à 5 : Afin de simplifier au maximum la démonstration, nous ne programmons pas cet exemple comme une nouvelle classe. Remarquez à
	      la ligne 5 l'utilité de la méthode <b>geometry()</b> pour fixer les dimensions de la fenêtre principale.</li>
            <li>Ligne 7 : Instanciation du cadre de gauche. La couleur de fond (une variété de bleu cyan) est déterminée par l'argument <b>bg</b>
	      (<span class="italique">background</span>). Cette chaîne de caractères contient en notation hexadécimale la description des trois composantes rouge, verte et bleue de la
	      teinte que l'on souhaite obtenir : après le caractère <b>#</b> signalant que ce qui suit est une valeur numérique hexadécimale, on trouve
	      trois groupes de deux symboles alphanumériques. Chacun de ces groupes représente un nombre compris entre 1 et
	      255. Ainsi, 80 correspond à 128, et c0 correspond à 192 en notation décimale. Dans notre exemple, les composantes rouge, verte et bleue de la teinte
	      à représenter valent donc respectivement 128, 192 et 192.<br/>
		 En application de cette technique descriptive, le noir serait obtenu avec <b><span style="color:#000080;">#000000</span></b>, le blanc avec <b><span style="color:#000080;">#ffffff</span></b>, le rouge pur avec <b><span style="color:#000080;">#ff0000</span></b>, un bleu sombre avec <b><span style="color:#000080;">#000050</span></b>, etc.</li>
            <li>Ligne 8 : Puisque nous lui appliquons la méthode <b>pack()</b>, le cadre sera automatiquement dimensionné par son contenu. L'option <b><span style="color:#000080;">side =LEFT</span></b> le positionnera à gauche dans sa fenêtre maîtresse. L'option <b><span style="color:#000080;">padx =5</span></b>
	      ménagera un espace de 5 pixels à sa gauche et à sa droite (nous pouvons traduire « padx » par « espacement
	      horizontal »).</li>
            <li>Ligne 10 : Dans le cadre <b>f1</b> que nous venons de préparer, nous avons l'intention de regrouper 6 autres cadres similaires contenant chacun une
	      étiquette. Le code correspondant sera plus simple et plus efficace si nous instancions ces widgets dans une liste plutôt que dans des variables
	      indépendantes. Nous préparons donc cette liste avec 6 éléments que nous remplacerons plus loin. </li>
            <li>Lignes 11 à 16 : Pour construire nos 6 cadres similaires, nous allons parcourir une liste de 6 tuples contenant les caractéristiques
	      particulières de chaque cadre. Chacun de ces tuples est constitué de 4 éléments : un indice, une constante tkinter définissant un type de
	      relief, et deux chaînes de caractères décrivant respectivement la couleur et le texte de l'étiquette.<br/>
		 La boucle <b>for</b> effectue 6 itérations pour parcourir les 6 éléments de la liste. À chaque itération, le contenu d'un des tuples est
		   affecté aux variables <b>n</b>, <b>col</b>, <b>rel</b> et <b>txt</b> (et ensuite les instructions des lignes 17 à 20 sont
		   exécutées).</li>
          </ul>
          <blockquote class="citation"><div>Le parcours d<span class="italique">'</span>une liste de tuples à l<span class="italique">'</span>aide d<span class="italique">'</span>une boucle for constitue une construction particulièrement compacte, qui permet de
	    réaliser de nombreuses affectations avec un très petit nombre d<span class="italique">'</span>instructions.</div></blockquote>
          <ul class="ListeDVP">
            <li>Ligne 17 : Les 6 cadres sont instanciés comme des éléments de la liste <b>fint</b>. Chacun d'entre eux est agrémenté d'une
	      bordure décorative de 2 pixels de large, avec un certain effet de relief.</li>
            <li>Lignes 18-20 : Les étiquettes ont toutes la même taille, mais leurs textes et leurs couleurs de fond diffèrent. Du fait de l'utilisation
	      de la méthode <b>pack()</b>, c'est la dimension des étiquettes qui détermine la taille des petits cadres. Ceux-ci à leur tour déterminent la
	      taille du cadre qui les regroupe (le cadre f1). Les options <b>padx</b> et <b>pady</b> permettent de réserver un petit espace autour de chaque étiquette,
	      et un autre autour de chaque petit cadre. L'option <b><span style="color:#000080;">side =TOP</span></b> positionne les 6 petits cadres les uns en dessous des autres dans le
	      cadre conteneur f1.</li>
            <li>Lignes 22-23 : Préparation du cadre <b>f2</b> (cadre de droite). Sa couleur sera une variété de jaune, et nous l'entourerons d'une bordure
	      décorative ayant l'aspect d'un sillon.</li>
            <li>Lignes 25 à 28 : Le cadre <b>f2</b> contiendra un canevas et un bouton. Notez encore une fois l'utilisation des options <b>padx</b> et <b>pady</b>
	      pour ménager des espaces autour des widgets (considérez par exemple le cas du bouton, pour lequel cette option n'a pas été utilisée :
	      de ce fait, il entre en contact avec la bordure du cadre qui l'entoure). Comme nous l'avons fait pour les cadres, nous avons placé une bordure autour du
	      canevas. Sachez que d'autres widgets acceptent également ce genre de décoration : boutons, champs d'entrée, etc. </li>
          </ul>
        </div>
      </div>
      
		<h3 class="TitreSection1" id="L16-C">16-C. Comment déplacer des dessins à l'aide de la souris<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h3><div class="BlocSection1">
        
        <p>Le widget canevas est l'un des points forts de la bibliothèque graphique <span class="italique">tkinter</span>. Il intègre en effet un grand nombre de dispositifs très
	  efficaces pour manipuler des dessins. Le script ci-après est destiné à vous montrer quelques techniques de base. Si vous voulez en savoir plus, notamment
	  en ce qui concerne la manipulation de dessins composés de plusieurs parties, veuillez consulter l'un ou l'autre ouvrage de référence traitant de
	  <span class="italique">tkinter</span>.</p>
        <p>Au démarrage de notre petite application, une série de dessins sont tracés au hasard dans un canevas (il s'agit en l'occurrence de simples
	  ellipses colorées). Vous pouvez déplacer n'importe lequel de ces dessins en le « saisissant » à l'aide de votre souris.</p>
        <div class="div-figure"><figure class="figure-center"><a data-lightbox="lightbox[article]" href="./images/image49.png"><img class="ImgCliquable figure-img-caption" src="./images/image49.png" alt="Image non disponible" width="364" height="325"/></a></figure></div>
        <p>Lorsqu'un dessin est déplacé, il passe à l'avant-plan par rapport aux autres, et sa bordure apparaît plus épaisse pendant toute la
	  durée de sa manipulation.</p>
        <p>Pour bien comprendre la technique utilisée, vous devez vous rappeler qu'un logiciel utilisant une interface graphique est un logiciel
	  « piloté par les événements » (revoyez au besoin les explications de la page ). Dans cette application, nous allons mettre en
	  place un mécanisme qui réagit aux événements : « enfoncement du bouton gauche de la souris », « déplacement
	  de la souris, le bouton gauche restant enfoncé », « relâchement du bouton gauche ».</p>
        <p>Ces événements sont générés par le système d'exploitation et pris en charge par l'interface <span class="italique">tkinter</span>. Notre travail de
	  programmation consistera donc simplement à les associer à des gestionnaires différents (fonctions ou méthodes).</p>
        <p>Pour développer cette petite application en suivant la « philosophie objet », nous préférerons créer une nouvelle classe
	  <b>Bac_a_sable</b>, dérivée du canevas de base, et y insérer la fonctionnalité souhaitée, plutôt que de programmer cette
	  fonctionnalité au niveau du corps principal du programme, en agissant sur un canevas ordinaire. Ainsi nous produisons du code réutilisable.</p>
        <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e39493">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e39493" onclick="selectionCode('contenuCoded0e39493', 'IdTitreCode-d0e39493');">S&eacute;lectionnez</span></div></div><div style="overflow:auto;" class="code_avec_lignes"><div class="numeros_lignes">1.<br/>2.<br/>3.<br/>4.<br/>5.<br/>6.<br/>7.<br/>8.<br/>9.<br/>10.<br/>11.<br/>12.<br/>13.<br/>14.<br/>15.<br/>16.<br/>17.<br/>18.<br/>19.<br/>20.<br/>21.<br/>22.<br/>23.<br/>24.<br/>25.<br/>26.<br/>27.<br/>28.<br/>29.<br/>30.<br/>31.<br/>32.<br/>33.<br/>34.<br/>35.<br/>36.<br/>37.<br/>38.<br/>39.<br/>40.<br/>41.<br/>42.<br/>43.<br/>44.<br/>45.<br/>46.<br/>47.<br/>48.<br/>49.<br/>50.<br/>51.<br/>52.<br/>53.<br/>54.<br/>55.<br/>56.<br/></div><pre class="code_uniquement" style="margin: 0"><code class="contenuCode" id="contenuCoded0e39493"><code class="python_keyword1">from</code> tkinter <code class="python_keyword1">import</code> <code class="python_operator">*</code>
<code class="python_keyword1">from</code> random <code class="python_keyword1">import</code> randrange
 
<code class="python_keyword1">class</code> <code class="python_function">Bac_a_sable</code><code class="python_operator">(</code>Canvas):
  <code class="python_literal1">"Canevas modifié pour prendre en compte quelques actions de la souris"</code>
  <code class="python_keyword1">def</code> <code class="python_keyword3">__init__</code><code class="python_operator">(</code>self, boss, width<code class="python_operator">=</code><code class="python_digit">80</code>, height<code class="python_operator">=</code><code class="python_digit">80</code>, bg<code class="python_operator">=</code><code class="python_literal1">"white"</code>):
      <code class="python_comment1"># invocation du constructeur de la classe parente :</code>
      Canvas.<code class="python_keyword3">__init__</code><code class="python_operator">(</code>self, boss, width<code class="python_operator">=</code>width, height<code class="python_operator">=</code>height, bg<code class="python_operator">=</code>bg)
      <code class="python_comment1"># association-liaison d'événements &lt;souris&gt; au présent widget :</code>
      self.<code class="python_function">bind</code><code class="python_operator">(</code><code class="python_literal1">"&lt;Button-1&gt;"</code>, self.mouseDown)
      self.<code class="python_function">bind</code><code class="python_operator">(</code><code class="python_literal1">"&lt;Button1-Motion&gt;"</code>, self.mouseMove)
      self.<code class="python_function">bind</code><code class="python_operator">(</code><code class="python_literal1">"&lt;Button1-ButtonRelease&gt;"</code>, self.mouseUp)
 
  <code class="python_keyword1">def</code> <code class="python_function">mouseDown</code><code class="python_operator">(</code>self, event):
      <code class="python_literal1">"Opération à effectuer quand le bouton gauche de la souris est enfoncé"</code>
      self.currObject <code class="python_operator">=</code><code class="python_keyword3">None</code>
      <code class="python_comment1"># event.x et event.y contiennent les coordonnées du clic effectué :</code>
      self.x1, self.y1 <code class="python_operator">=</code> event.x, event.y
      <code class="python_comment1"># &lt;find_closest&gt; renvoie la référence du dessin le plus proche :</code>
      self.selObject <code class="python_operator">=</code> self.<code class="python_function">find_closest</code><code class="python_operator">(</code>self.x1, self.y1)
      <code class="python_comment1"># modification de l'épaisseur du contour du dessin :</code>
      self.<code class="python_function">itemconfig</code><code class="python_operator">(</code>self.selObject, width <code class="python_operator">=</code><code class="python_digit">3</code>)
      <code class="python_comment1"># &lt;lift&gt; fait passer le dessin à l'avant-plan :</code>
      self.<code class="python_function">lift</code><code class="python_operator">(</code>self.selObject)
 
  <code class="python_keyword1">def</code> <code class="python_function">mouseMove</code><code class="python_operator">(</code>self, event):
      <code class="python_literal1">"Op. à effectuer quand la souris se déplace, bouton gauche enfoncé"</code>
      x2, y2 <code class="python_operator">=</code> event.x, event.y
      dx, dy <code class="python_operator">=</code> x2 <code class="python_operator">-</code>self.x1, y2 <code class="python_operator">-</code>self.y1
      <code class="python_keyword1">if</code> self.selObject:
      self.<code class="python_function">move</code><code class="python_operator">(</code>self.selObject, dx, dy)
      self.x1, self.y1 <code class="python_operator">=</code> x2, y2
 
  <code class="python_keyword1">def</code> <code class="python_function">mouseUp</code><code class="python_operator">(</code>self, event):
      <code class="python_literal1">"Op. à effectuer quand le bouton gauche de la souris est relâché"</code>
      <code class="python_keyword1">if</code> self.selObject:
      self.<code class="python_function">itemconfig</code><code class="python_operator">(</code>self.selObject, width <code class="python_operator">=</code><code class="python_digit">1</code>)
      self.selObject <code class="python_operator">=</code><code class="python_keyword3">None</code>
 
<code class="python_keyword1">if</code> <code class="python_keyword3">__name__</code> <code class="python_operator">==</code> <code class="python_literal1">'__main__'</code>:    <code class="python_comment1"># ---- Programme de test ----</code>
  couleurs <code class="python_operator">=(</code><code class="python_literal1">'red'</code>,<code class="python_literal1">'orange'</code>,<code class="python_literal1">'yellow'</code>,<code class="python_literal1">'green'</code>,<code class="python_literal1">'cyan'</code>,<code class="python_literal1">'blue'</code>,<code class="python_literal1">'violet'</code>,<code class="python_literal1">'purple'</code>)
  fen <code class="python_operator">=</code><code class="python_function">Tk</code><code class="python_operator">(</code>)
  <code class="python_comment1"># mise en place du canevas - dessin de 15 ellipses colorés :</code>
  bac <code class="python_operator">=</code><code class="python_function">Bac_a_sable</code><code class="python_operator">(</code>fen, width <code class="python_operator">=</code><code class="python_digit">400</code>, height <code class="python_operator">=</code><code class="python_digit">300</code>, bg <code class="python_operator">=</code><code class="python_literal1">'ivory'</code>)
  bac.<code class="python_function">pack</code><code class="python_operator">(</code>padx <code class="python_operator">=</code><code class="python_digit">5</code>, pady <code class="python_operator">=</code><code class="python_digit">3</code>)
  <code class="python_comment1"># bouton de sortie :</code>
  b_fin <code class="python_operator">=</code> <code class="python_function">Button</code><code class="python_operator">(</code>fen, text <code class="python_operator">=</code><code class="python_literal1">'Terminer'</code>, bg <code class="python_operator">=</code><code class="python_literal1">'royal blue'</code>, fg <code class="python_operator">=</code><code class="python_literal1">'white'</code>,
	 font <code class="python_operator">=(</code><code class="python_literal1">'Helvetica'</code>, <code class="python_digit">10</code>, <code class="python_literal1">'bold'</code>), command <code class="python_operator">=</code>fen.quit)
  b_fin.<code class="python_function">pack</code><code class="python_operator">(</code>pady <code class="python_operator">=</code><code class="python_digit">2</code>)
  <code class="python_comment1"># tracé de 15 ellipses avec couleur et coordonnées aléatoires :</code>
  <code class="python_keyword1">for</code> i <code class="python_keyword1">in</code> <a class="python_keyword2 lien_documentation_code" target="_blank" href="https://docs.python.org/fr/3/search.html?q=range#range"><span>range</span></a><code class="python_operator">(</code><code class="python_digit">15</code>):
      coul <code class="python_operator">=</code>couleurs[<code class="python_function">randrange</code><code class="python_operator">(</code><code class="python_digit">8</code>)]
      x1, y1 <code class="python_operator">=</code> <code class="python_function">randrange</code><code class="python_operator">(</code><code class="python_digit">300</code>), <code class="python_function">randrange</code><code class="python_operator">(</code><code class="python_digit">200</code>)
      x2, y2 <code class="python_operator">=</code> x1 <code class="python_operator">+</code> <code class="python_function">randrange</code><code class="python_operator">(</code><code class="python_digit">10</code>, <code class="python_digit">150</code>), y1 <code class="python_operator">+</code> <code class="python_function">randrange</code><code class="python_operator">(</code><code class="python_digit">10</code>, <code class="python_digit">150</code>)
      bac.<code class="python_function">create_oval</code><code class="python_operator">(</code>x1, y1, x2, y2, fill <code class="python_operator">=</code>coul)
  fen.<code class="python_function">mainloop</code><code class="python_operator">(</code>)
</code></pre></div></div>
        
		<h4 class="TitreSection2" id="L16-C-1">16-C-1. Commentaires<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h4><div class="BlocSection2">
          
          <p>Le script contient essentiellement la définition d'une classe graphique dérivée de <b>Canvas()</b>.</p>
          <p>Cette nouvelle classe étant susceptible d'être réutilisée dans d'autres projets, nous plaçons l'ensemble du programme de test de
	    cette classe dans la structure désormais classique : <b><span style="color:#000080;">if __name__ ="__main__": </span></b>Ainsi le script peut être
	    utilisé tel quel en tant que module à importer, pour d'autres applications à votre gré..</p>
          <p>Le constructeur de notre nouveau widget <b>Bac_a_sable()</b> attend la référence du widget maître (<span class="italique">boss</span>) comme premier paramètre,
	    suivant la convention habituelle. Il fait appel au constructeur de la classe parente, puis met en place des mécanismes locaux.</p>
          <p>En l'occurrence, il s'agit d'associer les trois identificateurs d'événements <b><span style="color:#000080;">&lt;Button-1&gt;, &lt;Button1-Motion&gt;</span></b>
	    et <b><span style="color:#000080;">&lt;Button1-ButtonRelease&gt;</span></b> aux noms des trois méthodes choisies comme gestionnaires de
	    cesévénements<a class="signetNoteBasPage" id="signetNoteBasPage80" href="#noteBasPage80">(80)</a>. </p>
          <p>Lorsque l'utilisateur enfonce le bouton gauche de sa souris, la méthode <b>mouseDown()</b> est donc activée, et le système d'exploitation lui
	    transmet en argument un objet <b>event</b>, dont les attributs <b>x</b> et <b>y</b> contiennent les coordonnées du curseur souris dans le canevas,
	    déterminées au moment du clic.</p>
          <p>Nous mémorisons directement ces coordonnées dans les variables d'instance <b>self.x1</b> et <b>self.x2</b>, car nous en aurons besoin par ailleurs.
	    Ensuite, nous utilisons la méthode <b>find_closest()</b> du widget canevas, qui nous renvoie la référence du dessin le plus proche. Cette méthode
	    bien pratique renvoie toujours une référence, même si le clic de souris n'a pas été effectué à l'intérieur du
	    dessin.</p>
          <p>Le reste est facile à comprendre : la référence du dessin sélectionné est mémorisée dans une variable d'instance, et
	    nous pouvons faire appel à d'autres méthodes du canevas de base pour modifier ses caractéristiques. En l'occurrence, nous utilisons les méthodes
	    <b>itemconfig()</b> et <b>lift()</b> pour épaissir son contour et le faire passer à l'avant-plan.</p>
          <p>Le « transport » du dessin est assuré par la méthode <b>mouseMove()</b>, invoquée à chaque fois que la souris se
	    déplace alors que son bouton gauche est resté enfoncé. L'objet <b>event</b> contient cette fois encore les coordonnées du curseur souris, au terme
	    de ce déplacement. Nous nous en servons pour calculer les différences entre ces nouvelles coordonnées et les précédentes, afin de pouvoir les
	    transmettre à la méthode <b>move()</b> du widget canevas, qui effectuera le transport proprement dit.</p>
          <p>Nous ne pouvons cependant faire appel à cette méthode que s'il existe effectivement un objet sélectionné (c'est le rôle de la
	    variable d'instance <b>selObject</b>), et il nous faut veiller également à mémoriser les nouvelles coordonnées acquises.</p>
          <p>La méthode <b>mouseUp()</b> termine le travail. Lorsque le dessin transporté est arrivé à destination, il reste à annuler la
	    sélection et rendre au contour son épaisseur initiale. Ceci ne peut être envisagé que s'il existe effectivement une sélection, bien
	    entendu.</p>
          <p>Dans le corps du programme de test, nous instancions 15 dessins sans nous préoccuper de conserver leurs références dans des variables. Nous
	    pouvons procéder ainsi parce que tkinter conserve lui-même une référence interne pour chacun de ces objets (cf. page ; si vous travaillez avec
	    d'autres bibliothèques graphiques, vous devrez probablement prévoir une mémorisation de ces références).</p>
          <p>Les dessins sont de simples ellipses colorées. Leur couleur est choisie au hasard dans une liste de 8 possibilités, l'indice de la couleur choisie
	    étant déterminé par la fonction <b>randrange()</b> importée du module <b>random</b>.</p>
        </div>
      </div>
      
		<h3 class="TitreSection1" id="L16-D">16-D. Widgets complémentaires, widgets composites<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h3><div class="BlocSection1">
        
        <p>Si vous explorez la volumineuse documentation que l'on peut trouver sur l'internet concernant <span class="italique">tkinter</span>, vous vous rendrez compte qu'il en existe
	  différentes extensions, sous la forme de bibliothèques annexes. Ces extensions vous proposent des classes de widgets supplémentaires qui peuvent se
	  révéler très précieuses pour le développement rapide d'applications complexes. Nous ne pouvons évidemment pas nous permettre de
	  présenter tous ces ces widgets dans le cadre restreint de ce cours d'initiation. Si vous êtes intéressés, veuillez consulter les sites web traitant
	  des bibliothèques <b>Tix</b> et <b>Ttk</b> (entre entres). La bibliothèque <b>Tix</b> propose plus de 40 widgets complémentaires. La bibliothèque
	  <b>Ttk</b> est plutôt destinée à « habiller » les widgets avec différents thèmes (styles de boutons, de fenêtres,
	  etc.). Certaines de ces bibliothèques sont écrites entièrement en Python, comme par exemple <b>Pmw</b> (<span class="italique">Python Mega Widgets</span>). </p>
        <p>Vous pouvez cependant faire une multitude de choses sans chercher d'autres ressources que la bibliothèque standard <span class="italique">tkinter</span>. Vous pouvez en effet
	  assez aisément construire vous-même de nouvelles classes de widgets composites adaptées à vos besoins. Cela peut vous demander un certain travail au
	  départ, mais en procédant ainsi, vous contrôlez très précisément ce que contiennent vos applications, et vous garantissez la
	  portabilité de celles-ci sur tous les systèmes qui acceptent Python, puisque <span class="italique">tkinter</span> fait partie de la distribution standard du langage. Lorsque vous
	  utilisez des bibliothèques tierces, en effet, vous devez toujours vérifier la disponibilité et la compatibilité de celles-ci pour les machines cibles
	  de vos programmes, et prévoir leur installation si nécessaire. </p>
        <p>Les pages qui suivent vous expliquent les principes généraux à mettre en œuvre pour réaliser vous-même des classes de widgets
	  composites, avec quelques exemples parmi les plus utiles.</p>
        
		<h4 class="TitreSection2" id="L16-D-1">16-D-1. Combo box simplifié<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h4><div class="BlocSection2">
          
          <p>La petite application ci-après vous montre comment construire une nouvelle classe de widget de type <b>Combo box</b>. On appelle ainsi un widget qui
	    associe un champ d'entrée à une boîte de liste : l'utilisateur de ce widget peut entrer dans le système, soit un des éléments de la
	    liste proposée (en cliquant sur son nom), soit un élément non répertorié (en entrant un nouveau nom dans le champ d'entrée). Nous avons
	    un peu simplifié le problème en laissant la liste visible en permanence, mais il est parfaitement possible de perfectionner ce widget pour qu'il prenne la
	    forme classique d'un champ d'entrée assorti d'un petit bouton provoquant l'apparition de la liste, celle-ci étant cachée au départ. (<span class="italique">Voir
	    exercice 14.1, page </span>).</p>
          <p>Tel que nous l'imaginons, notre widget combo va donc regrouper en une seule entité trois widgets de base tkinter : un champ d'entrée, une
	    boîte de liste (<span class="italique">listbox</span>) et un « ascenseur » (barre de défilement vertical ou <span class="italique">scrollbar</span>).</p>
          <p>La boîte de liste et son ascenseur seront étroitement associés, puisque l'ascenseur permet de faire défiler la liste dans sa boîte.
	    Il faudra d'ailleurs s'assurer que l'ascenseur ait toujours la même hauteur que la boîte, quelle que soit la taille choisie pour celle-ci.</p>
          <div class="div-figure"><figure class="figure-center"><img class="figure-img-caption" src="./images/image50.png" alt="Image non disponible" width="234" height="219"/></figure></div>
          <p>Pour tester celui-ci, nous l'incluons dans une petite application très simple : lorsque l'utilisateur choisit une couleur dans la liste (il peut
	    aussi entrer un nom de couleur directement dans le champ d'entrée), cette couleur devient automatiquement la couleur de fond pour la fenêtre
	    maîtresse.</p>
          <p>Dans cette fenêtre maîtresse, nous avons ajouté un libellé et un bouton, afin de vous montrer comment vous pouvez accéder à la
	    sélection opérée précédemment dans le <b>ComboBox</b> lui-même (le bouton provoque l'affichage du nom de la dernière couleur
	    choisie).</p>
          <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e40264">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e40264" onclick="selectionCode('contenuCoded0e40264', 'IdTitreCode-d0e40264');">S&eacute;lectionnez</span></div></div><div style="overflow:auto;" class="code_avec_lignes"><div class="numeros_lignes">1.<br/>2.<br/>3.<br/>4.<br/>5.<br/>6.<br/>7.<br/>8.<br/>9.<br/>10.<br/>11.<br/>12.<br/>13.<br/>14.<br/>15.<br/>16.<br/>17.<br/>18.<br/>19.<br/>20.<br/>21.<br/>22.<br/>23.<br/>24.<br/>25.<br/>26.<br/>27.<br/>28.<br/>29.<br/>30.<br/>31.<br/>32.<br/>33.<br/>34.<br/>35.<br/>36.<br/>37.<br/>38.<br/>39.<br/>40.<br/>41.<br/>42.<br/>43.<br/>44.<br/>45.<br/>46.<br/>47.<br/>48.<br/>49.<br/>50.<br/>51.<br/>52.<br/>53.<br/>54.<br/>55.<br/>56.<br/>57.<br/>58.<br/>59.<br/>60.<br/>61.<br/>62.<br/>63.<br/>64.<br/>65.<br/>66.<br/>67.<br/>68.<br/>69.<br/>70.<br/></div><pre class="code_uniquement" style="margin: 0"><code class="contenuCode" id="contenuCoded0e40264"><code class="python_keyword1">from</code> tkinter <code class="python_keyword1">import</code> <code class="python_operator">*</code>
 
<code class="python_keyword1">class</code> <code class="python_function">ComboBox</code><code class="python_operator">(</code>Frame):
  <code class="python_literal1">"Widget composite associant un champ d'entrée avec une boîte de liste"</code>
  <code class="python_keyword1">def</code> <code class="python_keyword3">__init__</code><code class="python_operator">(</code>self, boss, item<code class="python_operator">=</code><code class="python_literal1">''</code>, items<code class="python_operator">=</code>[], command <code class="python_operator">=</code><code class="python_literal1">''</code>, width <code class="python_operator">=</code><code class="python_digit">10</code>,
	listSize <code class="python_operator">=</code><code class="python_digit">5</code>):
      Frame.<code class="python_keyword3">__init__</code><code class="python_operator">(</code>self, boss)   <code class="python_comment1"># constructeur de la classe parente</code>
		   <code class="python_comment1"># (&lt;boss&gt; est la réf. du widget 'maître')</code>
      self.items <code class="python_operator">=</code>items       <code class="python_comment1"># items à placer dans la boîte de liste</code>
      self.command <code class="python_operator">=</code>command	  <code class="python_comment1"># fonction à invoquer après clic ou &lt;enter&gt;</code>
      self.item <code class="python_operator">=</code>item		<code class="python_comment1"># item entré ou sélectionné</code>
 
      <code class="python_comment1"># Champ d'entrée :</code>
      self.entree <code class="python_operator">=</code><code class="python_function">Entry</code><code class="python_operator">(</code>self, width <code class="python_operator">=</code>width)	      <code class="python_comment1"># largeur en caractères</code>
      self.entree.<code class="python_function">insert</code><code class="python_operator">(</code>END, item)
      self.entree.<code class="python_function">bind</code><code class="python_operator">(</code><code class="python_literal1">"&lt;Return&gt;"</code>, self.sortieE)
      self.entree.<code class="python_function">pack</code><code class="python_operator">(</code>side <code class="python_operator">=</code>TOP)
 
      <code class="python_comment1"># Boîte de liste, munie d'un 'ascenseur' (scroll bar) :</code>
      cadreLB <code class="python_operator">=</code><code class="python_function">Frame</code><code class="python_operator">(</code>self)	     <code class="python_comment1"># cadre pour l'ensemble des 2</code>
      self.bListe <code class="python_operator">=</code><code class="python_function">Listbox</code><code class="python_operator">(</code>cadreLB, height <code class="python_operator">=</code>listSize, width <code class="python_operator">=</code>width<code class="python_operator">-</code><code class="python_digit">1</code>)
      scrol <code class="python_operator">=</code><code class="python_function">Scrollbar</code><code class="python_operator">(</code>cadreLB, command <code class="python_operator">=</code>self.bListe.yview)
      self.bListe.<code class="python_function">config</code><code class="python_operator">(</code>yscrollcommand <code class="python_operator">=</code>scrol.<a class="python_keyword2 lien_documentation_code" target="_blank" href="https://docs.python.org/fr/3/search.html?q=set#set"><span>set</span></a>)
      self.bListe.<code class="python_function">bind</code><code class="python_operator">(</code><code class="python_literal1">"&lt;ButtonRelease-1&gt;"</code>, self.sortieL)
      self.bListe.<code class="python_function">pack</code><code class="python_operator">(</code>side <code class="python_operator">=</code>LEFT)
      scrol.<code class="python_function">pack</code><code class="python_operator">(</code>expand <code class="python_operator">=</code>YES, fill <code class="python_operator">=</code>Y)
      cadreLB.<code class="python_function">pack</code><code class="python_operator">(</code>)
 
      <code class="python_comment1"># Remplissage de la boîte de liste avec les items fournis :</code>
      <code class="python_keyword1">for</code> it <code class="python_keyword1">in</code> items:
      self.bListe.<code class="python_function">insert</code><code class="python_operator">(</code>END, it)
 
  <code class="python_keyword1">def</code> <code class="python_function">sortieL</code><code class="python_operator">(</code>self, event <code class="python_operator">=</code><code class="python_keyword3">None</code>):
      <code class="python_comment1"># Extraire de la liste l'item qui a été sélectionné :</code>
      index <code class="python_operator">=</code>self.bListe.<code class="python_function">curselection</code><code class="python_operator">(</code>)      <code class="python_comment1"># renvoie un tuple d'index</code>
      ind0 <code class="python_operator">=</code><a class="python_keyword2 lien_documentation_code" target="_blank" href="https://docs.python.org/fr/3/search.html?q=int#int"><span>int</span></a><code class="python_operator">(</code>index[<code class="python_digit">0</code>])	      <code class="python_comment1"># on ne garde que le premier</code>
      self.item <code class="python_operator">=</code>self.items[ind0]
      <code class="python_comment1"># Actualiser le champ d'entrée avec l'item choisi :</code>
      self.entree.<code class="python_function">delete</code><code class="python_operator">(</code><code class="python_digit">0</code>, END)
      self.entree.<code class="python_function">insert</code><code class="python_operator">(</code>END, self.item)
      <code class="python_comment1"># Exécuter la commande indiquée, avec l'item choisi comme argument :</code>
      self.<code class="python_function">command</code><code class="python_operator">(</code>self.item)
 
  <code class="python_keyword1">def</code> <code class="python_function">sortieE</code><code class="python_operator">(</code>self, event <code class="python_operator">=</code><code class="python_keyword3">None</code>):
      <code class="python_comment1"># Exécuter la commande indiquée, avec l'argument-item encodé tel quel :</code>
      self.<code class="python_function">command</code><code class="python_operator">(</code>self.entree.<code class="python_function">get</code><code class="python_operator">(</code>))
 
  <code class="python_keyword1">def</code> <code class="python_function">get</code><code class="python_operator">(</code>self):
      <code class="python_comment1"># Renvoyer le dernier item sélectionné dans la boîte de liste</code>
      <code class="python_keyword1">return</code> self.item
 
<code class="python_keyword1">if</code> <code class="python_keyword3">__name__</code> <code class="python_operator">==</code><code class="python_literal1">"__main__"</code>:	    <code class="python_comment1"># --- Programme de test ---</code>
  <code class="python_keyword1">def</code> <code class="python_function">changeCoul</code><code class="python_operator">(</code>col):
      fen.<code class="python_function">configure</code><code class="python_operator">(</code>background <code class="python_operator">=</code> col)
 
  <code class="python_keyword1">def</code> <code class="python_function">changeLabel</code><code class="python_operator">(</code>):
      lab.<code class="python_function">configure</code><code class="python_operator">(</code>text <code class="python_operator">=</code> combo.<code class="python_function">get</code><code class="python_operator">(</code>))
 
  couleurs <code class="python_operator">=</code> <code class="python_operator">(</code><code class="python_literal1">'navy'</code>, <code class="python_literal1">'royal blue'</code>, <code class="python_literal1">'steelblue1'</code>, <code class="python_literal1">'cadet blue'</code>,
	  <code class="python_literal1">'lawn green'</code>, <code class="python_literal1">'forest green'</code>, <code class="python_literal1">'yellow'</code>, <code class="python_literal1">'dark red'</code>,
	  <code class="python_literal1">'grey80'</code>,<code class="python_literal1">'grey60'</code>, <code class="python_literal1">'grey40'</code>, <code class="python_literal1">'grey20'</code>, <code class="python_literal1">'pink'</code>)
  fen <code class="python_operator">=</code><code class="python_function">Tk</code><code class="python_operator">(</code>)
  combo <code class="python_operator">=</code><code class="python_function">ComboBox</code><code class="python_operator">(</code>fen, item <code class="python_operator">=</code><code class="python_literal1">"néant"</code>, items <code class="python_operator">=</code>couleurs, command <code class="python_operator">=</code>changeCoul,
	  width <code class="python_operator">=</code><code class="python_digit">15</code>, listSize <code class="python_operator">=</code><code class="python_digit">6</code>)
  combo.<code class="python_function">grid</code><code class="python_operator">(</code>row <code class="python_operator">=</code><code class="python_digit">1</code>, columnspan <code class="python_operator">=</code><code class="python_digit">2</code>, padx <code class="python_operator">=</code><code class="python_digit">10</code>, pady <code class="python_operator">=</code><code class="python_digit">10</code>)
  bou <code class="python_operator">=</code> <code class="python_function">Button</code><code class="python_operator">(</code>fen, text <code class="python_operator">=</code><code class="python_literal1">"Test"</code>, command <code class="python_operator">=</code>changeLabel)
  bou.<code class="python_function">grid</code><code class="python_operator">(</code>row <code class="python_operator">=</code><code class="python_digit">2</code>, column <code class="python_operator">=</code><code class="python_digit">0</code>, padx <code class="python_operator">=</code><code class="python_digit">8</code>, pady <code class="python_operator">=</code><code class="python_digit">8</code>)
  lab <code class="python_operator">=</code> <code class="python_function">Label</code><code class="python_operator">(</code>fen, text <code class="python_operator">=</code><code class="python_literal1">"Bonjour"</code>, bg <code class="python_operator">=</code><code class="python_literal1">"ivory"</code>, width <code class="python_operator">=</code><code class="python_digit">15</code>)
  lab.<code class="python_function">grid</code><code class="python_operator">(</code>row <code class="python_operator">=</code><code class="python_digit">2</code>, column <code class="python_operator">=</code><code class="python_digit">1</code>, padx <code class="python_operator">=</code><code class="python_digit">8</code>)
  fen.<code class="python_function">mainloop</code><code class="python_operator">(</code>)
</code></pre></div></div>
          
		<h5 class="TitreSection3" id="L16-D-1-A">16-D-1-A. Commentaires<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h5><div class="BlocSection3">
            
            <ul class="ListeDVP">
              <li>Lignes 5-8 : Le constructeur de notre widget attend la référence du widget maître (<span class="italique">boss</span>) comme premier paramètre, suivant la
		convention habituelle. Les autres paramètres permettent notamment de prévoir un texte par défaut dans le champ d'entrée (<span class="italique">item</span>), de
		fournir la liste des éléments à insérer dans la boîte (<span class="italique">items</span>), et de désigner la fonction à invoquer lorsque
		l'utilisateur effectuera un clic dans la liste, ou enfoncera la touche &lt;enter&gt; de son clavier (<span class="italique">command</span>). Nous avons conservé des noms anglais pour
		ces paramètres, afin que notre widget puisse être utilisé avec les mêmes conventions que les widgets de base dont il dérive.</li>
              <li>Lignes 15, 39, 40 : Les méthodes du widget Entry ont déjà été décrites précédemment (cf.
		page ). Rappelons simplement que la méthode<b> insert()</b> permet d'insérer du texte dans le champ, sans faire disparaître un texte
		préexistant éventuel. Le premier argument permet de préciser à quel endroit du texte préexistant l'insertion doit avoir lieu. Ce peut
		être un entier, ou bien une valeur symbolique (en important l'ensemble du module tkinter à la ligne 1, on a importé une série de variables
		globales, dont END, qui contiennent ces valeurs symboliques, et END désigne bien entendu la fin du texte préexistant).</li>
              <li>Lignes 16 et 24 : deux événements seront associés à des méthodes locales : le fait de relâcher le
		bouton droit de la souris alors que son pointeur se trouve dans la boîte de liste (événement <b><span style="color:#000080;">&lt;ButtonRelease-1&gt;</span></b>) et le fait d'enfoncer la touche &lt;enter&gt; (événement <b><span style="color:#000080;">&lt;Return&gt;</span></b>).</li>
              <li>Ligne 21 : création de la boîte de liste (classe de base <b>Listbox</b>). Sa largeur s'exprime en nombre de caractères de la police
		courante. On en retranche un ou deux, afin de compenser approximativement la place qu'occupera l'ascenseur ci-après (l'ensemble des deux devant avoir à
		peu près la même largeur que le champ d'entrée).</li>
              <li>Ligne 22 : création de la barre de défilement verticale (classe de base <b>Scrollbar</b>). La commande qu'on lui associe :<b><span style="color:#000080;"> command =self.bListe.yview </span></b>indique la méthode du widget <span class="italique">Listbox</span> qui sera invoquée pour provoquer le
		défilement de la liste dans la boîte, lorsque l'on actionnera cet ascenseur.</li>
              <li>Ligne 23 : symétriquement, on doit re-configurer la boîte de liste pour lui indiquer quelle méthode du widget <span class="italique">Scrollbar</span> elle
		devra invoquer afin que la position de l'ascenseur soit le reflet correct de la position relative de l'item couramment sélectionné dans la liste. Il
		n'était pas possible d'indiquer déjà cette commande dans la ligne d'instruction créant la boîte de liste, à la ligne 21, car à
		ce moment-là le widget <span class="italique">Scrollbar</span> n'existait pas encore. Y faire référence était donc exclu<a class="signetNoteBasPage" id="signetNoteBasPage81" href="#noteBasPage81">(81)</a>. </li>
              <li>Ligne 33 : cette méthode est invoquée chaque fois que l'utilisateur sélectionne un élément dans la liste. Elle fait appel
		à la méthode <b>curselection()</b> du widget <span class="italique">Listbox</span> de base, laquelle lui renvoie un tuple d'indices, car il a été prévu par les
		développeurs de <span class="italique">tkinter</span> que l'utilisateur puisse avoir sélectionné plusieurs items dans la liste (à l'aide de la touche &lt;ctrl&gt;). Nous
		supposerons cependant ici qu'un seul a été pointé, et récupérons donc seulement le premier élément de ce tuple. À la ligne
		47, nous pouvons alors extraire l'item correspondant de la liste et l'utiliser, à la fois pour mettre à jour le champ d'entrée (lignes 39-40), ainsi
		que comme argument pour exécuter la commande (ligne 42) dont la référence avait été fournie lors de l'instanciation du widget (dans le cas
		de notre petite application, ce sera donc la fonction <b>changeCoul()</b>).</li>
              <li>Lignes 44-46 : la même commande est invoquée lorsque l'utilisateur actionne la touche &lt;enter&gt; après avoir encodé une
		chaîne de caractères dans le champ d'entrée. Le paramètre <b>event</b>, non utilisé ici, permettrait de récupérer le ou les
		événements associés.</li>
              <li>Lignes 48-49 : nous avons aussi inclus une méthode <b>get()</b>, suivant la convention suivie par d'autres widgets, afin de permettre la
		récupération libre du dernier item sélectionné.</li>
            </ul>
          </div>
        </div>
        
		<h4 class="TitreSection2" id="L16-D-2">16-D-2. Le widget Text assorti d'un ascenseur<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h4><div class="BlocSection2">
          
          <p>En procédant de la même manière que dans l'exemple précédent, vous pouvez associer les widgets standard <span class="italique">tkinter</span> de multiples
	    façons. Ainsi nous vous présentons ci-après un widget composite qui pourrait vous servir à ébaucher un système de traitement de textes
	    rudimentaire. Son principal composant est le widget <b>Text</b> standard, lequel peut afficher des textes formatés, c'est-à-dire des textes intégrant
	    divers attributs de style, comme par exemple le gras, l'italique, l'exposant ..., ainsi que des polices de caractères différentes, de la couleur, et
	    même des images. Nous l'avons simplement associé à une barre de défilement verticale pour vous montrer une fois de plus les interactions que vous
	    pouvez créer entre ces composants.</p>
          <div class="div-figure"><figure class="figure-center"><img class="figure-img-caption" src="./images/image51.png" alt="Image non disponible" width="418" height="306"/></figure></div>
          <p>Par exemple, dans l'application décrite ci-après, le fait de cliquer sur le nom « Jean de la Fontaine », à l'aide du bouton
	    droit de la souris, provoque le défilement automatique du texte (<span class="italique">scrolling</span>), jusqu'à ce qu'une rubrique décrivant cet auteur devienne visible
	    dans le widget (voir le script correspondant page suivante). D'autres fonctionnalités sont présentes, telles la possibilité de sélectionner à
	    l'aide de la souris n'importe quelle portion du texte affiché pour lui faire subir un traitement quelconque, mais nous ne présenterons ici que les plus
	    fondamentales. Veuillez donc consulter les ouvrages ou sites web spécialisés pour en savoir davantage.</p>
          
		<h5 class="TitreSection3" id="L16-D-2-A">16-D-2-A. Gestion du texte affiché<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h5><div class="BlocSection3">
            
            <p>Vous pouvez accéder à n'importe quelle portion du texte pris en charge par un widget <b>Text</b> grâce à deux concepts
	      complémentaires, les <span class="italique"><b>index</b></span> et les <span class="italique"><b>balises</b></span> :</p>
            <ul class="ListeDVP">
              <li>Chaque caractère du texte affiché est référencé par un <span class="italique">index</span>, lequel doit être une chaîne de caractères
		contenant deux valeurs numériques reliées par un point (ex : <b><span style="color:#000080;">"5.2"</span></b>). Ces deux valeurs indiquent respectivement le
		numéro de ligne et le numéro de colonne où se situe le caractère.</li>
              <li>N'importe quelle portion du texte peut être associée à une ou plusieurs <span class="italique">balise(s)</span>, dont vous choisissez librement le nom et les
		propriétés. Celles-ci vous permettent de définir la police, les couleurs d'avant- et d'arrière-plan, les événements associés,
		etc.</li>
            </ul>
            <blockquote class="citation"><div>Pour la bonne compréhension du script ci-dessous, veuillez considérer que le texte de la fable traitée doit être accessible, dans un
	      fichier nommé <b>CorbRenard.txt</b>, encodé en latin-1.</div></blockquote>
            <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e41198">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e41198" onclick="selectionCode('contenuCoded0e41198', 'IdTitreCode-d0e41198');">S&eacute;lectionnez</span></div></div><div style="overflow:auto;" class="code_avec_lignes"><div class="numeros_lignes">1.<br/>2.<br/>3.<br/>4.<br/>5.<br/>6.<br/>7.<br/>8.<br/>9.<br/>10.<br/>11.<br/>12.<br/>13.<br/>14.<br/>15.<br/>16.<br/>17.<br/>18.<br/>19.<br/>20.<br/>21.<br/>22.<br/>23.<br/>24.<br/>25.<br/>26.<br/>27.<br/>28.<br/>29.<br/>30.<br/>31.<br/>32.<br/>33.<br/>34.<br/>35.<br/>36.<br/>37.<br/>38.<br/>39.<br/>40.<br/>41.<br/>42.<br/>43.<br/>44.<br/>45.<br/>46.<br/>47.<br/>48.<br/>49.<br/>50.<br/>51.<br/>52.<br/>53.<br/>54.<br/>55.<br/>56.<br/>57.<br/>58.<br/>59.<br/>60.<br/>61.<br/>62.<br/>63.<br/>64.<br/></div><pre class="code_uniquement" style="margin: 0"><code class="contenuCode" id="contenuCoded0e41198"><code class="python_keyword1">from</code> tkinter <code class="python_keyword1">import</code> <code class="python_operator">*</code>
 
<code class="python_keyword1">class</code> <code class="python_function">ScrolledText</code><code class="python_operator">(</code>Frame):
  <code class="python_literal2">"""Widget composite, associant un widget Text et une barre de défilement"""</code>
  <code class="python_keyword1">def</code> <code class="python_keyword3">__init__</code><code class="python_operator">(</code>self, boss, baseFont <code class="python_operator">=</code><code class="python_literal1">"Times"</code>, width <code class="python_operator">=</code><code class="python_digit">50</code>, height <code class="python_operator">=</code><code class="python_digit">25</code>):
      Frame.<code class="python_keyword3">__init__</code><code class="python_operator">(</code>self, boss, bd <code class="python_operator">=</code><code class="python_digit">2</code>, relief <code class="python_operator">=</code>SUNKEN)
      self.text <code class="python_operator">=</code><code class="python_function">Text</code><code class="python_operator">(</code>self, font <code class="python_operator">=</code>baseFont, bg <code class="python_operator">=</code><code class="python_literal1">'ivory'</code>, bd <code class="python_operator">=</code><code class="python_digit">1</code>,
	      width <code class="python_operator">=</code>width, height <code class="python_operator">=</code>height)
      scroll <code class="python_operator">=</code><code class="python_function">Scrollbar</code><code class="python_operator">(</code>self, bd <code class="python_operator">=</code><code class="python_digit">1</code>, command <code class="python_operator">=</code>self.text.yview)
      self.text.<code class="python_function">configure</code><code class="python_operator">(</code>yscrollcommand <code class="python_operator">=</code>scroll.<a class="python_keyword2 lien_documentation_code" target="_blank" href="https://docs.python.org/fr/3/search.html?q=set#set"><span>set</span></a>)
      self.text.<code class="python_function">pack</code><code class="python_operator">(</code>side <code class="python_operator">=</code>LEFT, expand <code class="python_operator">=</code>YES, fill <code class="python_operator">=</code>BOTH, padx <code class="python_operator">=</code><code class="python_digit">2</code>, pady <code class="python_operator">=</code><code class="python_digit">2</code>)
      scroll.<code class="python_function">pack</code><code class="python_operator">(</code>side <code class="python_operator">=</code>RIGHT, expand <code class="python_operator">=</code>NO, fill <code class="python_operator">=</code>Y, padx <code class="python_operator">=</code><code class="python_digit">2</code>, pady <code class="python_operator">=</code><code class="python_digit">2</code>)
 
  <code class="python_keyword1">def</code> <code class="python_function">importFichier</code><code class="python_operator">(</code>self, fichier, encodage <code class="python_operator">=</code><code class="python_literal1">"Utf8"</code>):
      <code class="python_literal1">"insertion d'un texte dans le widget, à partir d'un fichier"</code>
      of <code class="python_operator">=</code><a class="python_keyword2 lien_documentation_code" target="_blank" href="https://docs.python.org/fr/3/search.html?q=open#open"><span>open</span></a><code class="python_operator">(</code>fichier, <code class="python_literal1">"r"</code>, encoding <code class="python_operator">=</code>encodage)
      lignes <code class="python_operator">=</code>of.<code class="python_function">readlines</code><code class="python_operator">(</code>)
      of.<code class="python_function">close</code><code class="python_operator">(</code>)
      <code class="python_keyword1">for</code> li <code class="python_keyword1">in</code> lignes:
      self.text.<code class="python_function">insert</code><code class="python_operator">(</code>END, li)
 
<code class="python_keyword1">def</code> <code class="python_function">chercheCible</code><code class="python_operator">(</code>event<code class="python_operator">=</code><code class="python_keyword3">None</code>):
  <code class="python_literal1">"défilement du texte jusqu'à la balise &lt;cible&gt;, grâce à la méthode see()"</code>
  index <code class="python_operator">=</code> st.text.<code class="python_function">tag_nextrange</code><code class="python_operator">(</code><code class="python_literal1">'cible'</code>, <code class="python_literal1">'0.0'</code>, END)
  st.text.<code class="python_function">see</code><code class="python_operator">(</code>index[<code class="python_digit">0</code>])
 
<code class="python_comment1">### Programme principal : fenêtre avec un libellé et un 'ScrolledText' ###</code>
fen <code class="python_operator">=</code><code class="python_function">Tk</code><code class="python_operator">(</code>)
lib <code class="python_operator">=</code><code class="python_function">Label</code><code class="python_operator">(</code>fen, text <code class="python_operator">=</code><code class="python_literal1">"Widget composite : Text + Scrollbar"</code>,
     font <code class="python_operator">=</code><code class="python_literal1">"Times 14 bold italic"</code>, fg <code class="python_operator">=</code><code class="python_literal1">"navy"</code>)
lib.<code class="python_function">pack</code><code class="python_operator">(</code>padx <code class="python_operator">=</code><code class="python_digit">10</code>, pady <code class="python_operator">=</code><code class="python_digit">4</code>)
st <code class="python_operator">=</code><code class="python_function">ScrolledText</code><code class="python_operator">(</code>fen, baseFont<code class="python_operator">=</code><code class="python_literal1">"Helvetica 12 normal"</code>, width <code class="python_operator">=</code><code class="python_digit">40</code>, height <code class="python_operator">=</code><code class="python_digit">10</code>)
st.<code class="python_function">pack</code><code class="python_operator">(</code>expand <code class="python_operator">=</code>YES, fill <code class="python_operator">=</code>BOTH, padx <code class="python_operator">=</code><code class="python_digit">8</code>, pady <code class="python_operator">=</code><code class="python_digit">8</code>)
 
<code class="python_comment1"># Définition de balises, liaison d'un événement &lt;clic du bouton droit&gt; :</code>
st.text.<code class="python_function">tag_configure</code><code class="python_operator">(</code><code class="python_literal1">"titre"</code>, foreground <code class="python_operator">=</code><code class="python_literal1">"brown"</code>,
	    font <code class="python_operator">=</code><code class="python_literal1">"Helvetica 11 bold italic"</code>)
st.text.<code class="python_function">tag_configure</code><code class="python_operator">(</code><code class="python_literal1">"lien"</code>, foreground <code class="python_operator">=</code><code class="python_literal1">"blue"</code>,
	    font <code class="python_operator">=</code><code class="python_literal1">"Helvetica 11 bold"</code>)
st.text.<code class="python_function">tag_configure</code><code class="python_operator">(</code><code class="python_literal1">"cible"</code>, foreground <code class="python_operator">=</code><code class="python_literal1">"forest green"</code>,
	    font <code class="python_operator">=</code><code class="python_literal1">"Times 11 bold"</code>)
st.text.<code class="python_function">tag_bind</code><code class="python_operator">(</code><code class="python_literal1">"lien"</code>, <code class="python_literal1">"&lt;Button-3&gt;"</code>, chercheCible)
 
titre <code class="python_operator">=</code><code class="python_literal2">"""Le Corbeau et le Renard</code>
<code class="python_literal2">par Jean de la Fontaine, auteur français</code>
<code class="python_literal4">\n</code><code class="python_literal2">"""</code>
auteur <code class="python_operator">=</code><code class="python_literal2">"""</code>
<code class="python_literal2">Jean de la Fontaine</code>
<code class="python_literal2">écrivain français (1621-1695)</code>
<code class="python_literal2">célèbre pour ses Contes en vers,</code>
<code class="python_literal2">et surtout ses Fables, publiées</code>
<code class="python_literal2">de 1668 à 1694."""</code>
 
<code class="python_comment1"># Remplissage du widget Text (2 techniques) :</code>
st.<code class="python_function">importFichier</code><code class="python_operator">(</code><code class="python_literal1">"CorbRenard.txt"</code>, encodage <code class="python_operator">=</code><code class="python_literal1">"Latin1"</code>)
st.text.<code class="python_function">insert</code><code class="python_operator">(</code><code class="python_literal1">"0.0"</code>, titre, <code class="python_literal1">"titre"</code>)
st.text.<code class="python_function">insert</code><code class="python_operator">(</code>END, auteur, <code class="python_literal1">"cible"</code>)
<code class="python_comment1"># Insertion d'une image :</code>
photo <code class="python_operator">=</code><code class="python_function">PhotoImage</code><code class="python_operator">(</code><a class="python_keyword2 lien_documentation_code" target="_blank" href="https://docs.python.org/fr/3/search.html?q=file#file"><span>file</span></a><code class="python_operator">=</code> <code class="python_literal1">"penguin.gif"</code>)
st.text.<code class="python_function">image_create</code><code class="python_operator">(</code><code class="python_literal1">"6.14"</code>, image <code class="python_operator">=</code>photo)
<code class="python_comment1"># Ajout d'une balise supplémentaire :</code>
st.text.<code class="python_function">tag_add</code><code class="python_operator">(</code><code class="python_literal1">"lien"</code>, <code class="python_literal1">"2.4"</code>, <code class="python_literal1">"2.23"</code>)
 
fen.<code class="python_function">mainloop</code><code class="python_operator">(</code>)
</code></pre></div></div>
          </div>
          
		<h5 class="TitreSection3" id="L16-D-2-B">16-D-2-B. Commentaires<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h5><div class="BlocSection3">
            
            <ul class="ListeDVP">
              <li>Lignes 3 à 6 : le widget composite que nous définissons dans cette classe sera une fois de plus obtenu par dérivation de
		la classe <b>Frame()</b>. Son constructeur prévoit quelques paramètres d'instanciation à titre d'exemple (police utilisée, largeur et hauteur),
		avec des valeurs par défaut. Ces paramètres seront simplement transmis au widget <span class="italique">Text</span> « interne » (aux lignes 7 et 8).
		Vous pourriez bien évidemment en ajouter beaucoup d'autres, pour déterminer par exemple l'apparence du curseur, la couleur du fond ou des
		caractères, la manière dont les lignes trop longues doivent être coupées ou non, etc. Vous pourriez aussi de la même façon
		transmettre divers paramètres à la barre de défilement. </li>
              <li>
                <img src="./images/image52.png" alt="Image non disponible" width="300" height="216" class="image_verticale"/>
              </li>
              <li>Lignes 11 et 12 : l'option <b>expand</b> de la méthode <b>pack()</b> n'accepte que les valeurs <b>YES</b> ou <b>NO</b>. Elle
		détermine si le widget doit s'étirer ou non lorsque la fenêtre est éventuellement redimensionnée. L'option complémentaire <b>fill</b>
		peut prendre les 3 valeurs : <b>X</b>, <b>Y</b> ou <b>BOTH</b>. Elle indique si l'étirement peut s'effectuer horizontalement (<span class="italique">axe X</span>),
		verticalement (<span class="italique">axe Y</span>), ou dans les deux directions (<span class="italique">BOTH</span>). Lorsque vous développez une application, Il est important de prévoir ces
		redimensionnements éventuels, surtout si l'application est destinée à être utilisée dans des environnements variés (Windows, Linux,
		MacOS, …).</li>
              <li>Lignes 22 à 25 : Cette fonction est un gestionnaire d'événement, qui est appelé lorsque l'utilisateur clique avec le
		bouton droit sur le nom de l'auteur (l'événement en question est associé à la balise correspondante, à la ligne 42).<br/>
		 À la ligne 24, on utilise la méthode <b>tag_nextrange()</b> du widget <span class="italique">Text</span> pour trouver les index de la portion de texte associée
		   à la balise « cible ». La recherche de ces index est limitée au domaine défini par les 2<sup>e</sup> et 3<sup>e</sup>
		   arguments (dans notre exemple, on recherche du début à la fin du texte entier). La méthode <b>tag_nextrange()</b> renvoie un tuple de deux index
		   (ceux des premier et dernier caractères de la portion de texte associée à la balise « cible »). À la ligne 25, nous nous
		   servons d'un seul de ces index (le premier) pour activer la méthode <b>see()</b>. Celle-ci provoque un défilement automatique du texte
		   (<span class="italique">scrolling</span>), de telle manière que le caractère correspondant à l'index transmis devienne visible dans le widget (avec en général
		   un certain nombre des caractères qui suivent).</li>
              <li>Lignes 27 à 33 : Construction classique d'une fenêtre contenant deux widgets.</li>
              <li>Lignes 35 à 42 : Ces lignes définissent les trois balises <b>titre</b>, <b>lien</b> et <b>cible</b> ainsi que le formatage du
		texte qui leur sera associé. La ligne 42 précise en outre que le texte associé à la balise <b>lien</b> sera « cliquable »
		(le bouton n°3 de la souris est le bouton droit), avec indication du gestionnaire d'événement correspondant.</li>
              <li>Ligne 55 : Vous pouvez incorporer n'importe quelle fonctionnalité dans la définition d'une classe, comme nous l'avons fait ici en
		prévoyant une méthode d'importation de fichier texte dans le widget lui-même, avec le paramètre <span class="italique">ad hoc</span> pour un décodage
		éventuel. Avec cette méthode, le texte importé s'insère à la fin du texte déjà présent dans le widget, mais vous pourriez
		aisément l'améliorer en lui ajoutant un paramètre pour préciser l'endroit exact où doit se faire l'insertion.</li>
              <li>Lignes 56-57 : Ces instructions insèrent des fragments de texte (respectivement au début et à la fin du texte préexistant), en
		associant une balise à chacun d'eux.</li>
              <li>Ligne 62 : L'association des balises au texte est dynamique. À tout moment, vous pouvez activer une nouvelle association (comme nous le
		faisons ici en rattachant la balise « lien » à une portion de texte préexistante). Note : pour
		« détacher » une balise, utilisez la méthode <b>tag_delete()</b>.</li>
            </ul>
          </div>
        </div>
        
		<h4 class="TitreSection2" id="L16-D-3">16-D-3. Le widget Canvas assorti d'un ascenseur<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h4><div class="BlocSection2">
          
          <p>Nous avons déjà beaucoup exploité le widget Canvas, dont les possibilités sont extrêmement étendues. Nous avons déjà
	    vu aussi comment nous pouvons encore enrichir cette classe par dérivation. C'est ce que nous allons faire une fois de plus dans l'exemple ci-après, avec la
	    définition d'une nouvelle classe <b>ScrolledCanvas</b>, dans laquelle nous associerons au canevas standard deux barres de défilement (une verticale et une
	    horizontale).</p>
          <p>Afin de rendre l'exercice plus attrayant, nous nous servirons de notre nouvelle classe de widget pour réaliser un petit jeu d'adresse, dans lequel
	    l'utilisateur devra réussir à cliquer sur un bouton qui s'esquive sans cesse. (Note : Si vous éprouvez vraiment des difficultés pour
	    l'attraper, commencez d'abord par dilater la fenêtre !).</p>
          <p>Le widget <b>Canvas</b> est très polyvalent : il vous permet de combiner à volonté des dessins, des images bitmap, des fragments de texte,
	    <span class="italique"><b>et même d'autres widgets</b></span>, dans un espace parfaitement extensible. Si vous souhaitez développer l'un ou l'autre jeu graphique, c'est
	    évidemment le widget qu'il vous faut apprendre à maîtriser en priorité.</p>
          <p>Comprenez bien cependant que les indications que nous vous fournissons à ce sujet dans les présentes notes sont forcément très
	    incomplètes. Leur objectif est seulement de vous aider à comprendre quelques concepts de base, afin que vous puissiez ensuite consulter les ouvrages de
	    référence spécialisés dans de bonnes conditions. </p>
          <p>Notre petite application se présente comme une nouvelle classe <b>FenPrinc()</b>, obtenue par dérivation à partir de la classe de base
	    <b>Tk()</b>. Elle contient deux widgets : un simple libellé, et notre nouveau widget composite <b>ScrolledCanvas</b>. Celui-ci est une
	    « vue » sur un espace de dessin beaucoup plus grand, dans lequel nous pourrons « voyager » grâce aux barres de
	    défilement.</p>
          <p>Afin que l'espace disponible soit bien repérable, nous commençons par y planter un décor simple, constitué de 80 ellipses de couleur dont
	    l'emplacement et les dimensions sont tirés au hasard. Nous y ajoutons également un petit clin d'œil sous la forme d'une image bitmap, destinée
	    avant tout à vous rappeler comment vous pouvez gérer ce type de ressource.</p>
          <p>Pour terminer, nous y installons aussi un <span class="italique">véritable widget fonctionnel</span> : en l'occurrence un simple bouton, mais la technique mise en
	    œuvre pourrait s'appliquer à n'importe quel autre type de widget, y compris un gros widget composite comme ceux que nous avons développés
	    précédemment. Cette grande souplesse dans le développement d'applications complexes est l'un des principaux bénéfices apportés par le
	    mode de programmation « orientée objet ».</p>
          <p>Le bouton s'anime dès qu'on l'a enfoncé une première fois, et l'animation s'arrête si on arrive à nouveau à cliquer dessus. Dans
	    votre analyse du script ci-après, soyez attentifs aux méthodes utilisées pour modifier les propriétés d'un objet existant.</p>
          <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e42043">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e42043" onclick="selectionCode('contenuCoded0e42043', 'IdTitreCode-d0e42043');">S&eacute;lectionnez</span></div></div><div style="overflow:auto;" class="code_avec_lignes"><div class="numeros_lignes">1.<br/>2.<br/>3.<br/>4.<br/>5.<br/>6.<br/>7.<br/>8.<br/>9.<br/>10.<br/>11.<br/>12.<br/>13.<br/>14.<br/>15.<br/>16.<br/>17.<br/>18.<br/>19.<br/>20.<br/>21.<br/>22.<br/>23.<br/>24.<br/>25.<br/>26.<br/>27.<br/>28.<br/>29.<br/>30.<br/>31.<br/>32.<br/>33.<br/>34.<br/>35.<br/>36.<br/>37.<br/>38.<br/>39.<br/>40.<br/>41.<br/>42.<br/>43.<br/>44.<br/>45.<br/>46.<br/>47.<br/>48.<br/>49.<br/>50.<br/>51.<br/>52.<br/>53.<br/>54.<br/>55.<br/>56.<br/>57.<br/>58.<br/>59.<br/>60.<br/>61.<br/>62.<br/>63.<br/>64.<br/>65.<br/>66.<br/>67.<br/>68.<br/>69.<br/>70.<br/>71.<br/>72.<br/>73.<br/>74.<br/>75.<br/>76.<br/></div><pre class="code_uniquement" style="margin: 0"><code class="contenuCode" id="contenuCoded0e42043"><code class="python_keyword1">from</code> tkinter <code class="python_keyword1">import</code> <code class="python_operator">*</code>
<code class="python_keyword1">from</code> random <code class="python_keyword1">import</code> randrange
 
<code class="python_keyword1">class</code> <code class="python_function">ScrolledCanvas</code><code class="python_operator">(</code>Frame):
  <code class="python_literal2">"""Canevas extensible avec barres de défilement"""</code>
  <code class="python_keyword1">def</code> <code class="python_keyword3">__init__</code><code class="python_operator">(</code>self, boss, width <code class="python_operator">=</code><code class="python_digit">100</code>, height <code class="python_operator">=</code><code class="python_digit">100</code>, bg<code class="python_operator">=</code><code class="python_literal1">"white"</code>, bd<code class="python_operator">=</code><code class="python_digit">2</code>,
	scrollregion <code class="python_operator">=(</code><code class="python_digit">0</code>, <code class="python_digit">0</code>, <code class="python_digit">300</code>, <code class="python_digit">300</code>), relief<code class="python_operator">=</code>SUNKEN):
      Frame.<code class="python_keyword3">__init__</code><code class="python_operator">(</code>self, boss, bd <code class="python_operator">=</code>bd, relief<code class="python_operator">=</code>relief)
      self.can <code class="python_operator">=</code><code class="python_function">Canvas</code><code class="python_operator">(</code>self, width<code class="python_operator">=</code>width<code class="python_operator">-</code><code class="python_digit">20</code>, height<code class="python_operator">=</code>height<code class="python_operator">-</code><code class="python_digit">20</code>, bg<code class="python_operator">=</code>bg,
	    scrollregion <code class="python_operator">=</code>scrollregion, bd <code class="python_operator">=</code><code class="python_digit">1</code>)
      self.can.<code class="python_function">grid</code><code class="python_operator">(</code>row <code class="python_operator">=</code><code class="python_digit">0</code>, column <code class="python_operator">=</code><code class="python_digit">0</code>)
      bdv <code class="python_operator">=</code><code class="python_function">Scrollbar</code><code class="python_operator">(</code>self, orient <code class="python_operator">=</code>VERTICAL, command <code class="python_operator">=</code>self.can.yview, bd <code class="python_operator">=</code><code class="python_digit">1</code>)
      bdh <code class="python_operator">=</code><code class="python_function">Scrollbar</code><code class="python_operator">(</code>self, orient <code class="python_operator">=</code>HORIZONTAL, command <code class="python_operator">=</code>self.can.xview, bd <code class="python_operator">=</code><code class="python_digit">1</code>)
      self.can.<code class="python_function">configure</code><code class="python_operator">(</code>xscrollcommand <code class="python_operator">=</code>bdh.<a class="python_keyword2 lien_documentation_code" target="_blank" href="https://docs.python.org/fr/3/search.html?q=set#set"><span>set</span></a>, yscrollcommand <code class="python_operator">=</code>bdv.<a class="python_keyword2 lien_documentation_code" target="_blank" href="https://docs.python.org/fr/3/search.html?q=set#set"><span>set</span></a>)
      bdv.<code class="python_function">grid</code><code class="python_operator">(</code>row <code class="python_operator">=</code><code class="python_digit">0</code>, column <code class="python_operator">=</code><code class="python_digit">1</code>, sticky <code class="python_operator">=</code> NS)	     <code class="python_comment1"># sticky =&gt;</code>
      bdh.<code class="python_function">grid</code><code class="python_operator">(</code>row <code class="python_operator">=</code><code class="python_digit">1</code>, column <code class="python_operator">=</code><code class="python_digit">0</code>, sticky <code class="python_operator">=</code> EW)	     <code class="python_comment1"># étirer la barre</code>
      <code class="python_comment1"># Lier l'événement &lt;redimensionnement&gt; à un gestionnaire approprié :</code>
      self.<code class="python_function">bind</code><code class="python_operator">(</code><code class="python_literal1">"&lt;Configure&gt;"</code>, self.redim)
      self.started <code class="python_operator">=</code><code class="python_keyword3">False</code>
 
  <code class="python_keyword1">def</code> <code class="python_function">redim</code><code class="python_operator">(</code>self, event):
      <code class="python_literal1">"opérations à effectuer à chaque redimensionnement du widget"</code>
      <code class="python_keyword1">if</code> <code class="python_keyword1">not</code> self.started:
      self.started <code class="python_operator">=</code><code class="python_keyword3">True</code>       <code class="python_comment1"># Ne pas redimensionner dès la création</code>
      <code class="python_keyword1">return</code>	       <code class="python_comment1"># du widget (sinon =&gt; bouclage)</code>
      <code class="python_comment1"># À partir des nouvelles dimensions du cadre, redimensionner le canevas</code>
      <code class="python_comment1"># (la diff. de 20 pixels sert à compenser l'épaisseur des scrollbars) :</code>
      larg, haut <code class="python_operator">=</code> self.<code class="python_function">winfo_width</code><code class="python_operator">(</code>)<code class="python_operator">-</code><code class="python_digit">20</code>, self.<code class="python_function">winfo_height</code><code class="python_operator">(</code>)<code class="python_operator">-</code><code class="python_digit">20</code>
      self.can.<code class="python_function">config</code><code class="python_operator">(</code>width <code class="python_operator">=</code>larg, height <code class="python_operator">=</code>haut)
 
<code class="python_keyword1">class</code> <code class="python_function">FenPrinc</code><code class="python_operator">(</code>Tk):
  <code class="python_keyword1">def</code> <code class="python_keyword3">__init__</code><code class="python_operator">(</code>self):
      Tk.<code class="python_keyword3">__init__</code><code class="python_operator">(</code>self)
      self.libelle <code class="python_operator">=</code><code class="python_function">Label</code><code class="python_operator">(</code>text <code class="python_operator">=</code><code class="python_literal1">"Scroll game"</code>, font<code class="python_operator">=</code><code class="python_literal1">"Helvetica 14 bold"</code>)
      self.libelle.<code class="python_function">pack</code><code class="python_operator">(</code>pady <code class="python_operator">=</code><code class="python_digit">3</code>)
      terrainJeu <code class="python_operator">=</code><code class="python_function">ScrolledCanvas</code><code class="python_operator">(</code>self, width <code class="python_operator">=</code><code class="python_digit">500</code>, height <code class="python_operator">=</code><code class="python_digit">300</code>, relief<code class="python_operator">=</code>SOLID,
		 scrollregion <code class="python_operator">=(-</code><code class="python_digit">600</code>,<code class="python_operator">-</code><code class="python_digit">600</code>,<code class="python_digit">600</code>,<code class="python_digit">600</code>), bd <code class="python_operator">=</code><code class="python_digit">3</code>)
      terrainJeu.<code class="python_function">pack</code><code class="python_operator">(</code>expand <code class="python_operator">=</code>YES, fill <code class="python_operator">=</code>BOTH, padx <code class="python_operator">=</code><code class="python_digit">6</code>, pady <code class="python_operator">=</code><code class="python_digit">6</code>)
      self.can <code class="python_operator">=</code>terrainJeu.can
      <code class="python_comment1"># Décor : tracé d'une série d'ellipses aléatoires :</code>
      coul <code class="python_operator">=(</code><code class="python_literal1">'sienna'</code>,<code class="python_literal1">'maroon'</code>,<code class="python_literal1">'brown'</code>,<code class="python_literal1">'pink'</code>,<code class="python_literal1">'tan'</code>,<code class="python_literal1">'wheat'</code>,<code class="python_literal1">'gold'</code>,<code class="python_literal1">'orange'</code>,
	 <code class="python_literal1">'plum'</code>,<code class="python_literal1">'red'</code>,<code class="python_literal1">'khaki'</code>,<code class="python_literal1">'indian red'</code>,<code class="python_literal1">'thistle'</code>,<code class="python_literal1">'firebrick'</code>,
	 <code class="python_literal1">'salmon'</code>,<code class="python_literal1">'coral'</code>,<code class="python_literal1">'yellow'</code>,<code class="python_literal1">'cyan'</code>,<code class="python_literal1">'blue'</code>,<code class="python_literal1">'green'</code>)
      <code class="python_keyword1">for</code> r <code class="python_keyword1">in</code> <a class="python_keyword2 lien_documentation_code" target="_blank" href="https://docs.python.org/fr/3/search.html?q=range#range"><span>range</span></a><code class="python_operator">(</code><code class="python_digit">80</code>):
      x1, y1 <code class="python_operator">=</code> <code class="python_function">randrange</code><code class="python_operator">(-</code><code class="python_digit">600</code>,<code class="python_digit">450</code>), <code class="python_function">randrange</code><code class="python_operator">(-</code><code class="python_digit">600</code>,<code class="python_digit">450</code>)
      x2, y2 <code class="python_operator">=</code> x1 <code class="python_operator">+</code><code class="python_function">randrange</code><code class="python_operator">(</code><code class="python_digit">40</code>,<code class="python_digit">300</code>), y1 <code class="python_operator">+</code><code class="python_function">randrange</code><code class="python_operator">(</code><code class="python_digit">40</code>,<code class="python_digit">300</code>)
      couleur <code class="python_operator">=</code> coul[<code class="python_function">randrange</code><code class="python_operator">(</code><code class="python_digit">20</code>)]
      self.can.<code class="python_function">create_oval</code><code class="python_operator">(</code>x1, y1, x2, y2, fill<code class="python_operator">=</code>couleur, outline<code class="python_operator">=</code><code class="python_literal1">'black'</code>)
      <code class="python_comment1"># Ajout d'une petite image GIF :</code>
      self.img <code class="python_operator">=</code> <code class="python_function">PhotoImage</code><code class="python_operator">(</code><a class="python_keyword2 lien_documentation_code" target="_blank" href="https://docs.python.org/fr/3/search.html?q=file#file"><span>file</span></a> <code class="python_operator">=</code><code class="python_literal1">'linux2.gif'</code>)
      self.can.<code class="python_function">create_image</code><code class="python_operator">(</code><code class="python_digit">50</code>, <code class="python_digit">20</code>, image <code class="python_operator">=</code>self.img)
      <code class="python_comment1"># Bouton à attraper :</code>
      self.x, self.y <code class="python_operator">=</code> <code class="python_digit">50</code>, <code class="python_digit">100</code>
      self.bou <code class="python_operator">=</code> <code class="python_function">Button</code><code class="python_operator">(</code>self.can, text <code class="python_operator">=</code><code class="python_literal1">"Start"</code>, command <code class="python_operator">=</code>self.start)
      self.fb <code class="python_operator">=</code> self.can.<code class="python_function">create_window</code><code class="python_operator">(</code>self.x, self.y, window <code class="python_operator">=</code>self.bou)
 
  <code class="python_keyword1">def</code> <code class="python_function">anim</code><code class="python_operator">(</code>self):
      <code class="python_keyword1">if</code> self.run <code class="python_operator">==</code><code class="python_digit">0</code>:
      <code class="python_keyword1">return</code>
      self.x <code class="python_operator">+=</code> <code class="python_function">randrange</code><code class="python_operator">(-</code><code class="python_digit">60</code>, <code class="python_digit">61</code>)
      self.y <code class="python_operator">+=</code> <code class="python_function">randrange</code><code class="python_operator">(-</code><code class="python_digit">60</code>, <code class="python_digit">61</code>)
      self.can.<code class="python_function">coords</code><code class="python_operator">(</code>self.fb, self.x, self.y)
      self.libelle.<code class="python_function">config</code><code class="python_operator">(</code>text <code class="python_operator">=</code> <code class="python_literal1">'Cherchez en </code><code class="python_literal4">%s</code><code class="python_literal1"> </code><code class="python_literal4">%s</code><code class="python_literal1">'</code> <code class="python_operator">%</code> <code class="python_operator">(</code>self.x, self.y))
      self.<code class="python_function">after</code><code class="python_operator">(</code><code class="python_digit">250</code>, self.anim)
 
  <code class="python_keyword1">def</code> <code class="python_function">stop</code><code class="python_operator">(</code>self):
      self.run <code class="python_operator">=</code><code class="python_digit">0</code>
      self.bou.<code class="python_function">configure</code><code class="python_operator">(</code>text <code class="python_operator">=</code><code class="python_literal1">"Start"</code>, command <code class="python_operator">=</code>self.start)
 
  <code class="python_keyword1">def</code> <code class="python_function">start</code><code class="python_operator">(</code>self):
      self.bou.<code class="python_function">configure</code><code class="python_operator">(</code>text <code class="python_operator">=</code><code class="python_literal1">"Attrapez-moi !"</code>, command <code class="python_operator">=</code>self.stop)
      self.run <code class="python_operator">=</code><code class="python_digit">1</code>
      self.<code class="python_function">anim</code><code class="python_operator">(</code>)
 
<code class="python_keyword1">if</code> <code class="python_keyword3">__name__</code> <code class="python_operator">==</code><code class="python_literal1">"__main__"</code>:	   <code class="python_comment1"># --- Programme de test ---</code>
  <code class="python_function">FenPrinc</code><code class="python_operator">(</code>).<code class="python_function">mainloop</code><code class="python_operator">(</code>)
</code></pre></div></div>
          
		<h5 class="TitreSection3" id="L16-D-3-A">16-D-3-A. Commentaires<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h5><div class="BlocSection3">
            
            <ul class="ListeDVP">
              <li>Lignes 6 à 10 : comme beaucoup d'autres, notre nouveau widget est dérivé de <b>Frame()</b>. Son constructeur accepte un
		certain nombre de paramètres. Remarquez bien que ces paramètres sont transmis pour partie au cadre (paramètres <span class="italique">bd, relief</span>), et pour partie au
		canevas (paramètres <span class="italique">width, height, bg, scrollregion</span>). Vous pouvez bien évidemment faire d'autres choix selon vos besoins. L'option <b><span style="color:#000080;">scrollregion</span></b> du widget Canvas sert à définir l'espace de dessin dans lequel la « vue » du canevas pourra
		se déplacer.</li>
              <li>Lignes 11 à 16 : Nous utiliserons cette fois la méthode<b> grid()</b> pour mettre en place le canevas et ses barres de
		défilement (cette méthode vous a été présentée page ). La méthode <b>pack()</b> ne conviendrait guère pour mettre en place
		correctement les deux barres de défilement, car elle imposerait l'utilisation de plusieurs cadres (<span class="italique">frames</span>) imbriqués (essayez, à titre
		d'exercice !). Les interactions à mettre en place entre les barres de défilement et le widget qu'elles contrôlent (lignes 12, 13, 14) ont
		déjà été décrites en détail pour les deux widgets composites précédents. L'option <b><span style="color:#000080;">orient</span></b> des barres de défilement n'avait pas été utilisée jusqu'ici, parce que sa valeur par défaut (<b><span style="color:#000080;">VERTICAL</span></b>) convenait aux cas traités.<br/>
		 Aux lignes 15 et 16, les options <b><span style="color:#000080;">sticky =NS</span></b> et <b><span style="color:#000080;">sticky =EW</span></b> provoquent
		   l'étirement des barres de défilement jusqu'à occuper toute la hauteur (<b><span style="color:#000080;">NS</span></b> = direction <span class="italique">Nord-Sud</span>) ou
		   toute la largeur (<b><span style="color:#000080;">EW</span></b> = direction <span class="italique">Est-Ouest</span>)de la cellule dans la grille. Il n'y aura cependant pas de
		   redimensionnement automatique comme c'est le cas avec la méthode <b>pack()</b> (les options <b><span style="color:#000080;">expand</span></b> et <b><span style="color:#000080;">fill</span></b> ne sont d'ailleurs pas disponibles : voir ci-après).</li>
              <li>Ligne 18 : Du fait que la méthode <b>grid()</b> n'inclut pas le redimensionnement automatique, nous devons guetter l'événement qui
		est généré par le système lorsque l'utilisateur redimensionne le widget, et l'associer à une méthode appropriée pour effectuer
		nous-mêmes le redimensionnement des composants du widget. </li>
              <li>Lignes 19 à 29 : La méthode de redimensionnement consistera simplement à redimensionner le canevas (les barres de
		défilement s'adapteront toutes seules, du fait de l'option <span class="italique">sticky</span> qui leur est appliquée). Notez au passage que les dimensions actualisées
		d'un widget peuvent être trouvées dans ses attributs <b><span style="color:#000080;">winfo_width()</span></b> et <b><span style="color:#000080;">winfo_height()</span></b>.<br/>
		 La variable d'instance <b><span style="color:#000080;">self.started</span></b> est un simple interrupteur, qui permet d'éviter que le redimensionnement soit
		   déjà appelé prématurément, lors de l'instanciation du widget (ce qui produit un bouclage curieux : essayez sans !).</li>
              <li>Lignes 31 à 55 : Cette classe définit notre petite application de jeu. Son constructeur instancie notre nouveau widget dans la
		variable <b><span style="color:#000080;">terrainJeu</span></b> (ligne 36). Remarquez que le type de bordure et son épaisseur s'appliqueront au cadre du widget
		composite, alors que les autres arguments choisis s'appliqueront au canevas. Avec l'option <span class="italique">scrollregion</span>, nous définissons un espace de jeu nettement
		plus étendu que la surface du canevas lui-même, ce qui obligera le joueur à déplacer (ou redimensionner) celui-ci.</li>
              <li>Lignes 54-55 : C'est la méthode <b>create_window()</b> du widget <b>Canvas</b> qui permet d'y insérer n'importe quel autre widget (y
		compris un widget composite). Le widget à insérer doit cependant avoir été défini lui-même au préalable comme un esclave du
		canevas ou de sa fenêtre maîtresse. La méthode <b>create_window()</b> attend trois arguments : les coordonnées <b>X</b> et <b>Y</b> du
		point où l'on souhaite insérer le widget, et la référence de ce widget.</li>
              <li>Lignes 57 à 64 : Cette méthode est utilisée pour l'animation du bouton. Après avoir repositionné le bouton au
		hasard à une certaine distance de sa position précédente, elle se ré-appelle elle-même après une pause de 250 millisecondes. Ce
		bouclage s'effectue sans cesse, aussi longtemps que la variable <b>self.run</b> contient une valeur non-nulle.</li>
              <li>Lignes 66 à 73 : Ces deux gestionnaires d'événement sont associés au bouton en alternance. Ils servent
		évidemment à démarrer et à arrêter l'animation.</li>
            </ul>
          </div>
        </div>
      </div>
      
		<h3 class="TitreSection1" id="L16-E">16-E. Application à fenêtres multiples - paramétrage implicite<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h3><div class="BlocSection1">
        
        <p>La classe <b>Toplevel()</b> de <span class="italique">tkinter</span> permet de créer des fenêtres « satellites » de votre application principale. Ces
	  fenêtres sont autonomes, mais elles se refermeront automatiquement lorsque vous fermerez la fenêtre principale. Cette restriction mise à part, elles se
	  traitent de la manière habituelle : vous pouvez y placer n'importe quelle combinaison de widgets, à volonté.</p>
        <p>La petite application ci-après vous montre quelques-unes de leurs possibilités. Elle est constituée d'une fenêtre principale très
	  ordinaire, contenant simplement trois boutons. Ces boutons sont créés à partir d'une classe dérivée de la classe <b>Button()</b> de base, ceci
	  afin de vous montrer encore une fois combien il est facile d'adapter les classes d'objets existantes à vos besoins. Vous pourrez noter au passage quelques options
	  « décoratives » intéressantes.</p>
        <p>Le bouton « Top1 » fait apparaître une première fenêtre satellite contenant un canevas avec une image. Nous avons doté
	  cette fenêtre de propriétés particulières : elle ne possède ni bandeau-titre, ni bordure, et il est impossible de la redimensionner à
	  l'aide de la souris. De plus, cette fenêtre est <span class="italique"><b>modale</b></span> : on qualifie ainsi une fenêtre qui reste toujours au premier plan, devant toutes les
	  autres fenêtres d'application éventuellement présentes à l'écran.</p>
        <div class="div-figure"><figure class="figure-center"><a data-lightbox="lightbox[article]" href="./images/image53.png"><img class="ImgCliquable figure-img-caption" src="./images/image53.png" alt="Image non disponible" width="550" height="325"/></a></figure></div>
        <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e43230">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e43230" onclick="selectionCode('contenuCoded0e43230', 'IdTitreCode-d0e43230');">S&eacute;lectionnez</span></div></div><div style="overflow:auto;" class="code_avec_lignes"><div class="numeros_lignes">1.<br/>2.<br/>3.<br/>4.<br/>5.<br/>6.<br/>7.<br/>8.<br/>9.<br/>10.<br/>11.<br/>12.<br/>13.<br/>14.<br/>15.<br/>16.<br/>17.<br/>18.<br/>19.<br/>20.<br/>21.<br/>22.<br/>23.<br/>24.<br/>25.<br/>26.<br/>27.<br/>28.<br/>29.<br/>30.<br/>31.<br/>32.<br/>33.<br/>34.<br/>35.<br/>36.<br/>37.<br/>38.<br/>39.<br/>40.<br/>41.<br/>42.<br/>43.<br/>44.<br/>45.<br/>46.<br/>47.<br/>48.<br/>49.<br/>50.<br/>51.<br/>52.<br/>53.<br/>54.<br/>55.<br/>56.<br/>57.<br/>58.<br/>59.<br/>60.<br/>61.<br/>62.<br/>63.<br/>64.<br/>65.<br/>66.<br/>67.<br/>68.<br/>69.<br/>70.<br/>71.<br/>72.<br/>73.<br/>74.<br/>75.<br/>76.<br/>77.<br/>78.<br/>79.<br/>80.<br/>81.<br/>82.<br/>83.<br/>84.<br/>85.<br/>86.<br/>87.<br/>88.<br/>89.<br/>90.<br/>91.<br/></div><pre class="code_uniquement" style="margin: 0"><code class="contenuCode" id="contenuCoded0e43230"><code class="python_keyword1">from</code> tkinter <code class="python_keyword1">import</code> <code class="python_operator">*</code>
 
<code class="python_keyword1">class</code> <code class="python_function">FunnyButton</code><code class="python_operator">(</code>Button):
  <code class="python_literal1">"Bouton de fantaisie : vert virant au rouge quand on l'actionne"</code>
  <code class="python_keyword1">def</code> <code class="python_keyword3">__init__</code><code class="python_operator">(</code>self, boss, <code class="python_operator">**</code>Arguments):
      Button.<code class="python_keyword3">__init__</code><code class="python_operator">(</code>self, boss,  bg <code class="python_operator">=</code><code class="python_literal1">"dark green"</code>, fg <code class="python_operator">=</code><code class="python_literal1">"white"</code>, bd <code class="python_operator">=</code><code class="python_digit">5</code>,
	      activebackground <code class="python_operator">=</code><code class="python_literal1">"red"</code>, activeforeground <code class="python_operator">=</code><code class="python_literal1">"yellow"</code>,
	      font <code class="python_operator">=(</code><code class="python_literal1">'Helvetica'</code>, <code class="python_digit">12</code>, <code class="python_literal1">'bold'</code>), <code class="python_operator">**</code>Arguments)
 
<code class="python_keyword1">class</code> <code class="python_function">SpinBox</code><code class="python_operator">(</code>Frame):
  <code class="python_literal1">"widget composite comportant un Label et 2 boutons 'up' &amp; 'down'"</code>
  <code class="python_keyword1">def</code> <code class="python_keyword3">__init__</code><code class="python_operator">(</code>self, boss, largC<code class="python_operator">=</code><code class="python_digit">5</code>, largB <code class="python_operator">=</code><code class="python_digit">2</code>, vList<code class="python_operator">=</code>[<code class="python_digit">0</code>], liInd<code class="python_operator">=</code><code class="python_digit">0</code>, orient <code class="python_operator">=</code>Y):
      Frame.<code class="python_keyword3">__init__</code><code class="python_operator">(</code>self, boss)
      self.vList <code class="python_operator">=</code>vList      <code class="python_comment1"># liste des valeurs à présenter</code>
      self.liInd <code class="python_operator">=</code>liInd      <code class="python_comment1"># index de la valeur à montrer par défaut</code>
      <code class="python_keyword1">if</code> orient <code class="python_operator">==</code>Y:
      s, augm, dimi <code class="python_operator">=</code> TOP, <code class="python_literal1">"^"</code>, <code class="python_literal1">"v"</code>	 <code class="python_comment1"># Orientation 'verticale'</code>
      <code class="python_keyword1">else</code>:
      s, augm, dimi <code class="python_operator">=</code> RIGHT, <code class="python_literal1">"&gt;"</code>, <code class="python_literal1">"&lt;"</code>	 <code class="python_comment1"># Orientation 'horizontale'</code>
      <code class="python_function">Button</code><code class="python_operator">(</code>self, text <code class="python_operator">=</code>augm, width <code class="python_operator">=</code>largB, command <code class="python_operator">=</code>self.up).<code class="python_function">pack</code><code class="python_operator">(</code>side <code class="python_operator">=</code>s)
      self.champ <code class="python_operator">=</code> <code class="python_function">Label</code><code class="python_operator">(</code>self, bg <code class="python_operator">=</code><code class="python_literal1">'white'</code>, width <code class="python_operator">=</code>largC,
	     text <code class="python_operator">=</code><a class="python_keyword2 lien_documentation_code" target="_blank" href="https://docs.python.org/fr/3/search.html?q=str#str"><span>str</span></a><code class="python_operator">(</code>vList[liInd]), relief <code class="python_operator">=</code>SUNKEN)
      self.champ.<code class="python_function">pack</code><code class="python_operator">(</code>pady <code class="python_operator">=</code><code class="python_digit">3</code>, side <code class="python_operator">=</code>s)
      <code class="python_function">Button</code><code class="python_operator">(</code>self, text<code class="python_operator">=</code>dimi, width<code class="python_operator">=</code>largB, command <code class="python_operator">=</code>self.down).<code class="python_function">pack</code><code class="python_operator">(</code>side <code class="python_operator">=</code>s)
 
  <code class="python_keyword1">def</code> <code class="python_function">up</code><code class="python_operator">(</code>self):
      <code class="python_keyword1">if</code> self.liInd <code class="python_operator">&lt;</code> <a class="python_keyword2 lien_documentation_code" target="_blank" href="https://docs.python.org/fr/3/search.html?q=len#len"><span>len</span></a><code class="python_operator">(</code>self.vList) <code class="python_operator">-</code><code class="python_digit">1</code>:
      self.liInd <code class="python_operator">+=</code> <code class="python_digit">1</code>
      <code class="python_keyword1">else</code>:
      self.<code class="python_function">bell</code><code class="python_operator">(</code>)	 <code class="python_comment1"># émission d'un bip</code>
      self.champ.<code class="python_function">configure</code><code class="python_operator">(</code>text <code class="python_operator">=</code><a class="python_keyword2 lien_documentation_code" target="_blank" href="https://docs.python.org/fr/3/search.html?q=str#str"><span>str</span></a><code class="python_operator">(</code>self.vList[self.liInd]))
 
  <code class="python_keyword1">def</code> <code class="python_function">down</code><code class="python_operator">(</code>self):
      <code class="python_keyword1">if</code> self.liInd <code class="python_operator">&gt;</code> <code class="python_digit">0</code>:
      self.liInd <code class="python_operator">-=</code> <code class="python_digit">1</code>
      <code class="python_keyword1">else</code>:
      self.<code class="python_function">bell</code><code class="python_operator">(</code>)	 <code class="python_comment1"># émission d'un bip</code>
      self.champ.<code class="python_function">configure</code><code class="python_operator">(</code>text <code class="python_operator">=</code><a class="python_keyword2 lien_documentation_code" target="_blank" href="https://docs.python.org/fr/3/search.html?q=str#str"><span>str</span></a><code class="python_operator">(</code>self.vList[self.liInd]))
 
  <code class="python_keyword1">def</code> <code class="python_function">get</code><code class="python_operator">(</code>self):
      <code class="python_keyword1">return</code> self.vList[self.liInd]
 
<code class="python_keyword1">class</code> <code class="python_function">FenDessin</code><code class="python_operator">(</code>Toplevel):
  <code class="python_literal1">"Fenêtre satellite (modale) contenant un simple canevas"</code>
  <code class="python_keyword1">def</code> <code class="python_keyword3">__init__</code><code class="python_operator">(</code>self, <code class="python_operator">**</code>Arguments):
      Toplevel.<code class="python_keyword3">__init__</code><code class="python_operator">(</code>self, <code class="python_operator">**</code>Arguments)
      self.<code class="python_function">geometry</code><code class="python_operator">(</code><code class="python_literal1">"250x200+100+240"</code>)
      self.<code class="python_function">overrideredirect</code><code class="python_operator">(</code><code class="python_digit">1</code>)	     <code class="python_comment1"># =&gt; fenêtre sans bordure ni bandeau</code>
      self.<code class="python_function">transient</code><code class="python_operator">(</code>self.master)      <code class="python_comment1"># =&gt; fenêtre 'modale'</code>
      self.can <code class="python_operator">=</code><code class="python_function">Canvas</code><code class="python_operator">(</code>self, bg<code class="python_operator">=</code><code class="python_literal1">"ivory"</code>, width <code class="python_operator">=</code><code class="python_digit">200</code>, height <code class="python_operator">=</code><code class="python_digit">150</code>)
      self.img <code class="python_operator">=</code> <code class="python_function">PhotoImage</code><code class="python_operator">(</code><a class="python_keyword2 lien_documentation_code" target="_blank" href="https://docs.python.org/fr/3/search.html?q=file#file"><span>file</span></a> <code class="python_operator">=</code><code class="python_literal1">"papillon2.gif"</code>)
      self.can.<code class="python_function">create_image</code><code class="python_operator">(</code><code class="python_digit">90</code>, <code class="python_digit">80</code>, image <code class="python_operator">=</code>self.img)
      self.can.<code class="python_function">pack</code><code class="python_operator">(</code>padx <code class="python_operator">=</code><code class="python_digit">20</code>, pady <code class="python_operator">=</code><code class="python_digit">20</code>)
 
<code class="python_keyword1">class</code> <code class="python_function">FenControle</code><code class="python_operator">(</code>Toplevel):
  <code class="python_literal1">"Fenêtre satellite contenant des contrôles de redimensionnement"</code>
  <code class="python_keyword1">def</code> <code class="python_keyword3">__init__</code><code class="python_operator">(</code>self, boss, <code class="python_operator">**</code>Arguments):
      Toplevel.<code class="python_keyword3">__init__</code><code class="python_operator">(</code>self, boss, <code class="python_operator">**</code>Arguments)
      self.<code class="python_function">geometry</code><code class="python_operator">(</code><code class="python_literal1">"250x200+400+230"</code>)
      self.<code class="python_function">resizable</code><code class="python_operator">(</code>width <code class="python_operator">=</code><code class="python_digit">0</code>, height <code class="python_operator">=</code><code class="python_digit">0</code>)    <code class="python_comment1"># =&gt; empêche le redimensionnement</code>
      p <code class="python_operator">=(</code><code class="python_digit">10</code>, <code class="python_digit">30</code>, <code class="python_digit">60</code>, <code class="python_digit">90</code>, <code class="python_digit">120</code>, <code class="python_digit">150</code>, <code class="python_digit">180</code>, <code class="python_digit">210</code>, <code class="python_digit">240</code>, <code class="python_digit">270</code>, <code class="python_digit">300</code>)
      self.spX <code class="python_operator">=</code><code class="python_function">SpinBox</code><code class="python_operator">(</code>self, largC<code class="python_operator">=</code><code class="python_digit">5</code>,largB <code class="python_operator">=</code><code class="python_digit">1</code>,vList <code class="python_operator">=</code>p,liInd<code class="python_operator">=</code><code class="python_digit">5</code>,orient <code class="python_operator">=</code>X)
      self.spX.<code class="python_function">pack</code><code class="python_operator">(</code>pady <code class="python_operator">=</code><code class="python_digit">5</code>)
      self.spY <code class="python_operator">=</code><code class="python_function">SpinBox</code><code class="python_operator">(</code>self, largC<code class="python_operator">=</code><code class="python_digit">5</code>,largB <code class="python_operator">=</code><code class="python_digit">1</code>,vList <code class="python_operator">=</code>p,liInd<code class="python_operator">=</code><code class="python_digit">5</code>,orient <code class="python_operator">=</code>Y)
      self.spY.<code class="python_function">pack</code><code class="python_operator">(</code>pady <code class="python_operator">=</code><code class="python_digit">5</code>)
      <code class="python_function">FunnyButton</code><code class="python_operator">(</code>self, text <code class="python_operator">=</code><code class="python_literal1">"Dimensionner le canevas"</code>,
	  command <code class="python_operator">=</code>boss.redimF1).<code class="python_function">pack</code><code class="python_operator">(</code>pady <code class="python_operator">=</code><code class="python_digit">5</code>)
 
<code class="python_keyword1">class</code> <code class="python_function">Demo</code><code class="python_operator">(</code>Frame):
  <code class="python_literal1">"Démo. de quelques caractéristiques du widget Toplevel"</code>
  <code class="python_keyword1">def</code> <code class="python_keyword3">__init__</code><code class="python_operator">(</code>self):
      Frame.<code class="python_keyword3">__init__</code><code class="python_operator">(</code>self)
      self.master.<code class="python_function">geometry</code><code class="python_operator">(</code><code class="python_literal1">"400x300+200+200"</code>)
      self.master.<code class="python_function">config</code><code class="python_operator">(</code>bg <code class="python_operator">=</code><code class="python_literal1">"cadet blue"</code>)
      <code class="python_function">FunnyButton</code><code class="python_operator">(</code>self, text <code class="python_operator">=</code><code class="python_literal1">"Top 1"</code>, command <code class="python_operator">=</code>self.top1).<code class="python_function">pack</code><code class="python_operator">(</code>side <code class="python_operator">=</code>LEFT)
      <code class="python_function">FunnyButton</code><code class="python_operator">(</code>self, text <code class="python_operator">=</code><code class="python_literal1">"Top 2"</code>, command <code class="python_operator">=</code>self.top2).<code class="python_function">pack</code><code class="python_operator">(</code>side <code class="python_operator">=</code>LEFT)
      <code class="python_function">FunnyButton</code><code class="python_operator">(</code>self, text <code class="python_operator">=</code><code class="python_literal1">"Quitter"</code>, command <code class="python_operator">=</code>self.quit).<code class="python_function">pack</code><code class="python_operator">(</code>)
      self.<code class="python_function">pack</code><code class="python_operator">(</code>side <code class="python_operator">=</code>BOTTOM, padx <code class="python_operator">=</code><code class="python_digit">10</code>, pady <code class="python_operator">=</code><code class="python_digit">10</code>)
 
  <code class="python_keyword1">def</code> <code class="python_function">top1</code><code class="python_operator">(</code>self):
      self.fen1 <code class="python_operator">=</code><code class="python_function">FenDessin</code><code class="python_operator">(</code>bg <code class="python_operator">=</code><code class="python_literal1">"grey"</code>)
 
  <code class="python_keyword1">def</code> <code class="python_function">top2</code><code class="python_operator">(</code>self):
      self.fen2 <code class="python_operator">=</code><code class="python_function">FenControle</code><code class="python_operator">(</code>self, bg <code class="python_operator">=</code><code class="python_literal1">"khaki"</code>)
 
  <code class="python_keyword1">def</code> <code class="python_function">redimF1</code><code class="python_operator">(</code>self):
      dimX, dimY <code class="python_operator">=</code> self.fen2.spX.<code class="python_function">get</code><code class="python_operator">(</code>), self.fen2.spY.<code class="python_function">get</code><code class="python_operator">(</code>)
      self.fen1.can.<code class="python_function">config</code><code class="python_operator">(</code>width <code class="python_operator">=</code>dimX, height <code class="python_operator">=</code>dimY)
 
<code class="python_keyword1">if</code> <code class="python_keyword3">__name__</code> <code class="python_operator">==</code><code class="python_literal1">"__main__"</code>:	   <code class="python_comment1"># --- Programme de test ---</code>
  <code class="python_function">Demo</code><code class="python_operator">(</code>).<code class="python_function">mainloop</code><code class="python_operator">(</code>)
</code></pre></div></div>
        
		<h4 class="TitreSection2" id="L16-E-1">16-E-1. Commentaires<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h4><div class="BlocSection2">
          
          <ul class="ListeDVP">
            <li>Lignes 3 à 8 : Si vous souhaitez pouvoir disposer du même style de boutons à différents endroits de votre projet,
	      n'hésitez pas à créer une classe dérivée, comme nous l'avons fait ici. Cela vous évitera d'avoir à reprogrammer partout les
	      mêmes options spécifiques.<br/>
		 Notez bien les deux astérisques qui préfixent le nom du dernier paramètre du constructeur : <b>**Arguments</b>. Elles signifient que la
		   variable correspondante sera en fait un <span class="italique">dictionnaire</span>, capable de réceptionner automatiquement n'importe quel ensemble d'arguments « avec
		   étiquettes ». Ces arguments pourront alors être transmis tels quels au constructeur de la classe parente (à la ligne 8). Cela nous
		   évite d'avoir à reproduire dans notre liste de paramètres toutes les options de paramétrage du bouton de base, qui sont fort nombreuses.
		   Ainsi vous pourrez instancier ces boutons de fantaisie avec n'importe quelle combinaison d'options, du moment que celles-ci soient disponibles pour les boutons
		   de base. On appelle ce qui précède un <span class="italique"><b>paramétrage implicite</b></span>. Vous pouvez utiliser cette forme de paramétrage avec n'importe
		   quelle fonction ou méthode.</li>
            <li>Lignes 10 à 24 : Le constructeur de notre widget <b>SpinBox</b> ne nécessite guère de commentaires. En fonction de
	      l'orientation souhaitée, la méthode <b>pack()</b> disposera les boutons et le libellé de haut en bas ou de gauche à droite (arguments <b>TOP</b>
	      ou <b>RIGHT</b> pour son option <b>side</b>).</li>
            <li>Lignes 26 à 38 : Ces deux méthodes ne font rien d'autre que de modifier la valeur affichée dans le libellé. Notez au
	      passage que la classe <b>Frame()</b> dispose d'une méthode <b>bell()</b> pour provoquer l'émission d'un « bip » sonore.</li>
            <li>Lignes 43 à 53 : La première fenêtre satellite est définie ici. Remarquez à nouveau l'utilisation du
	      <span class="italique">paramétrage implicite</span> du constructeur, à l'aide de la variable <b>**Arguments</b>. C'est lui qui nous permet d'instancier cette fenêtre (à
	      la ligne 81) en spécifiant une couleur de fond. (Nous pourrions aussi demander une bordure, etc.). Les méthodes invoquées aux lignes
	      47 à 49 définissent quelques propriétés particulières (elles qui sont applicables à n'importe quelle fenêtre). La
	      méthode <b>geometry()</b> permet de fixer à la fois les dimensions de la fenêtre et son emplacement à l'écran (l'indication <b><span style="color:#000080;">+100+240</span></b> signifie que son coin supérieur gauche doit être décalé de 100 pixels vers la droite, et de 240 pixels vers
	      le bas, par rapport au coin supérieur gauche de l'écran).</li>
            <li>Lignes 45 et 57 : Veuillez remarquer la petite différence entre les listes de paramètres de ces lignes. Dans le constructeur de
	      <b>FenDessin</b>, nous avons omis le paramètre <b>boss</b>, qui est bien présent dans le constructeur de <b>FenControle</b>. Vous savez que ce
	      paramètre sert à transmettre la référence du widget « maître » à son « esclave ». Il est
	      très généralement nécessaire (à la ligne 67, par exemple, nous nous en servons pour référencer une méthode de
	      l'application principale), mais il n'est pas absolument indispensable : dans <b>FenDessin</b> nous n'en avons aucune utilité. Vous retrouverez bien
	      évidemment la différence correspondante dans les instructions d'instanciation de ces fenêtres, aux lignes 82 et 84.</li>
            <li>Lignes 55 à 67 : À l'exception de la différence mentionnée ci-dessus, la construction du widget <b>FenControle</b> est
	      très similaire à celle de <b>FenDessin</b>. Remarquez à la ligne 60 la méthode permettant d'empêcher le redimensionnement d'une fenêtre
	      (dans le cas d' une fenêtre sans bordure ni bandeau-titre, comme <b>FenDessin</b>, cette méthode est inutile).</li>
            <li>Lignes 73-74 (et 49) : Toutes les classes dérivées des widgets <span class="italique">tkinter</span> sont dotées automatiquement d'un attribut
	      <b>master</b>, qui contient la référence de la classe parente. C'est ce qui nous permet ici d'accéder aux dimensions et à la couleur de fond de
	      la fenêtre maîtresse.</li>
            <li>Lignes 86 à 88 : Cette méthode récupère les valeurs numériques affichées dans la fenêtre de
	      contrôle (méthode <b>get()</b> de ce widget), pour redimensionner le canevas de la fenêtre de dessin. Cet exemple simple vous montre une fois de plus
	      comment peuvent s'établir les communications entre divers composants de votre programme.</li>
          </ul>
        </div>
      </div>
      
		<h3 class="TitreSection1" id="L16-F">16-F. Barres d'outils - expressions lambda<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h3><div class="BlocSection1">
        
        <p>De nombreux programmes comportent une ou plusieurs « barres d'outils » (<span class="italique">toolbar</span>) constituées de petits boutons sur lesquels sont
	  représentés des pictogrammes (icônes). Cette façon de faire permet de proposer à l'utilisateur un grand nombre de commandes
	  spécialisées, sans que celles-ci n'occupent une place excessive à l'écran (un petit dessin vaut mieux qu'un long discours, dit-on).</p>
        <div class="div-figure"><figure class="figure-center"><img class="figure-img-caption" src="./images/image54.png" alt="Image non disponible" width="413" height="273"/></figure></div>
        <p>L'application décrite ci-après comporte une barre d'outils et un canevas. Lorsque l'utilisateur clique sur l'un des 8 premiers boutons de la barre, le
	  pictogramme qu'il porte est recopié dans le canevas, à un emplacement choisi au hasard. Lorsqu'il clique sur le dernier bouton, le contenu du canevas est
	  effacé.</p>
        <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e44490">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e44490" onclick="selectionCode('contenuCoded0e44490', 'IdTitreCode-d0e44490');">S&eacute;lectionnez</span></div></div><div style="overflow:auto;" class="code_avec_lignes"><div class="numeros_lignes">1.<br/>2.<br/>3.<br/>4.<br/>5.<br/>6.<br/>7.<br/>8.<br/>9.<br/>10.<br/>11.<br/>12.<br/>13.<br/>14.<br/>15.<br/>16.<br/>17.<br/>18.<br/>19.<br/>20.<br/>21.<br/>22.<br/>23.<br/>24.<br/>25.<br/>26.<br/>27.<br/>28.<br/>29.<br/>30.<br/>31.<br/>32.<br/>33.<br/>34.<br/>35.<br/>36.<br/>37.<br/>38.<br/>39.<br/>40.<br/>41.<br/>42.<br/>43.<br/>44.<br/>45.<br/>46.<br/>47.<br/>48.<br/>49.<br/></div><pre class="code_uniquement" style="margin: 0"><code class="contenuCode" id="contenuCoded0e44490"><code class="python_keyword1">from</code> tkinter <code class="python_keyword1">import</code> <code class="python_operator">*</code>
<code class="python_keyword1">from</code> random <code class="python_keyword1">import</code> randrange
 
<code class="python_keyword1">class</code> <code class="python_function">ToolBar</code><code class="python_operator">(</code>Frame):
  <code class="python_literal1">"Barre d'outils (petits boutons avec icônes)"</code>
  <code class="python_keyword1">def</code> <code class="python_keyword3">__init__</code><code class="python_operator">(</code>self, boss, images <code class="python_operator">=</code>[], command <code class="python_operator">=</code><code class="python_keyword3">None</code>, <code class="python_operator">**</code>Arguments):
      Frame.<code class="python_keyword3">__init__</code><code class="python_operator">(</code>self, boss, bd <code class="python_operator">=</code><code class="python_digit">1</code>, <code class="python_operator">**</code>Arguments)
      <code class="python_comment1"># &lt;images&gt; = liste des noms d'icônes à placer sur les boutons</code>
      self.command <code class="python_operator">=</code>command	     <code class="python_comment1"># commande à exécuter lors du clic</code>
      nBou <code class="python_operator">=</code><a class="python_keyword2 lien_documentation_code" target="_blank" href="https://docs.python.org/fr/3/search.html?q=len#len"><span>len</span></a><code class="python_operator">(</code>images) 	 <code class="python_comment1"># Nombre de boutons à construire</code>
      <code class="python_comment1"># Les icônes des boutons doivent être placées dans des variables</code>
      <code class="python_comment1"># persistantes. Une liste fera l'affaire :</code>
      self.photoI <code class="python_operator">=</code>[<code class="python_keyword3">None</code>]<code class="python_operator">*</code>nBou
      <code class="python_keyword1">for</code> b <code class="python_keyword1">in</code> <a class="python_keyword2 lien_documentation_code" target="_blank" href="https://docs.python.org/fr/3/search.html?q=range#range"><span>range</span></a><code class="python_operator">(</code>nBou):
      <code class="python_comment1"># Création de l'icône (objet PhotoImage Tkinter) :</code>
      self.photoI[b] <code class="python_operator">=</code><code class="python_function">PhotoImage</code><code class="python_operator">(</code><a class="python_keyword2 lien_documentation_code" target="_blank" href="https://docs.python.org/fr/3/search.html?q=file#file"><span>file</span></a> <code class="python_operator">=</code> images[b] <code class="python_operator">+</code><code class="python_literal1">'.gif'</code>)
      <code class="python_comment1"># Création du bouton. On fait appel à une fonction lambda</code>
      <code class="python_comment1"># pour pouvoir transmettre un argument à la méthode &lt;action&gt; :</code>
      bou <code class="python_operator">=</code> <code class="python_function">Button</code><code class="python_operator">(</code>self, image <code class="python_operator">=</code>self.photoI[b], bd <code class="python_operator">=</code><code class="python_digit">2</code>, relief <code class="python_operator">=</code>GROOVE,
	    command <code class="python_operator">=</code> <code class="python_keyword1">lambda</code> arg <code class="python_operator">=</code>b: self.<code class="python_function">action</code><code class="python_operator">(</code>arg))
      bou.<code class="python_function">pack</code><code class="python_operator">(</code>side <code class="python_operator">=</code>LEFT)
 
  <code class="python_keyword1">def</code> <code class="python_function">action</code><code class="python_operator">(</code>self, index):
      <code class="python_comment1"># Exécuter &lt;command&gt; avec l'indice du bouton comme argument :</code>
      self.<code class="python_function">command</code><code class="python_operator">(</code>index)
 
<code class="python_keyword1">class</code> <code class="python_function">Application</code><code class="python_operator">(</code>Frame):
  <code class="python_keyword1">def</code> <code class="python_keyword3">__init__</code><code class="python_operator">(</code>self):
      Frame.<code class="python_keyword3">__init__</code><code class="python_operator">(</code>self)
      <code class="python_comment1"># noms des fichiers contenant les icones (format GIF):</code>
      icones <code class="python_operator">=(</code><code class="python_literal1">'floppy_2'</code>, <code class="python_literal1">'coleo'</code>, <code class="python_literal1">'papi2'</code>, <code class="python_literal1">'pion_1'</code>, <code class="python_literal1">'pion_2'</code>, <code class="python_literal1">'pion_3'</code>,
	<code class="python_literal1">'pion_4'</code>, <code class="python_literal1">'help_4'</code>, <code class="python_literal1">'clear'</code>)
      <code class="python_comment1"># Création de la barre d'outils :</code>
      self.barOut <code class="python_operator">=</code><code class="python_function">ToolBar</code><code class="python_operator">(</code>self, images <code class="python_operator">=</code>icones, command <code class="python_operator">=</code>self.transfert)
      self.barOut.<code class="python_function">pack</code><code class="python_operator">(</code>expand <code class="python_operator">=</code>YES, fill <code class="python_operator">=</code>X)
      <code class="python_comment1"># Création du canevas destiné à recevoir les images :</code>
      self.ca <code class="python_operator">=</code> <code class="python_function">Canvas</code><code class="python_operator">(</code>self, width <code class="python_operator">=</code><code class="python_digit">400</code>, height <code class="python_operator">=</code><code class="python_digit">200</code>, bg <code class="python_operator">=</code><code class="python_literal1">'orange'</code>)
      self.ca.<code class="python_function">pack</code><code class="python_operator">(</code>)
      self.<code class="python_function">pack</code><code class="python_operator">(</code>)
 
  <code class="python_keyword1">def</code> <code class="python_function">transfert</code><code class="python_operator">(</code>self, b):
      <code class="python_keyword1">if</code> b <code class="python_operator">==</code><code class="python_digit">8</code>:
      self.ca.<code class="python_function">delete</code><code class="python_operator">(</code>ALL)	 <code class="python_comment1"># Effacer tout dans le canevas</code>
      <code class="python_keyword1">else</code>:
      <code class="python_comment1"># Recopier l'icône du bouton b (extraite de la barre) =&gt; canevas :</code>
      x, y <code class="python_operator">=</code> <code class="python_function">randrange</code><code class="python_operator">(</code><code class="python_digit">25</code>,<code class="python_digit">375</code>), <code class="python_function">randrange</code><code class="python_operator">(</code><code class="python_digit">25</code>,<code class="python_digit">175</code>)
      self.ca.<code class="python_function">create_image</code><code class="python_operator">(</code>x, y, image <code class="python_operator">=</code>self.barOut.photoI[b])
 
<code class="python_function">Application</code><code class="python_operator">(</code>).<code class="python_function">mainloop</code><code class="python_operator">(</code>)
</code></pre></div></div>
        
		<h4 class="TitreSection2" id="L16-F-1">16-F-1. Métaprogrammation - expressions lambda<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h4><div class="BlocSection2">
          
          <p>Vous savez qu'en règle générale, on associe à chaque bouton une <span class="italique">commande</span>, laquelle est la référence d'une méthode ou
	    d'une fonction particulière qui se charge d'effectuer le travail lorsque le bouton est activé. Or, dans l'application présente, tous les boutons doivent
	    faire à peu près la même chose (recopier un dessin dans le canevas), la seule différence entre eux étant le dessin concerné.</p>
          <p>Pour simplifier notre code, nous voudrions donc pouvoir associer l'option <b>command</b> de tous nos boutons <span class="italique">avec une seule et même méthode</span>
	    (ce sera la méthode <b>action()</b> ), mais en lui transmettant à chaque fois la référence du bouton particulier utilisé, de manière
	    à ce que l'action accomplie puisse être différente pour chacun d'eux.</p>
          <p>Une difficulté se présente, cependant, parce que l'option <b>command</b> du widget Button accepte seulement une <span class="italique">valeur</span> ou une
	    <span class="italique">expression</span>, et non une <span class="italique">instruction</span>. Il s'agit en fait de lui indiquer la référence d'une fonction, mais certainement pas d'invoquer la fonction
	    à cet endroit avec des arguments (l'invocation ne pourra avoir lieu en effet que lorsque l'utilisateur cliquera sur le bouton : c'est alors le
	    réceptionnaire d'événements de <span class="italique">tkinter</span> qui devra la provoquer). C'est la raison pour laquelle on indique seulement le nom de la fonction, <span class="italique">sans
	    parenthèses</span>.</p>
          <p>On peut résoudre cette difficulté de deux manières :</p>
          <ul class="ListeDVP">
            <li>Du fait de son caractère <span class="italique">dynamique</span>, Python accepte qu'un programme puisse <span class="italique">se modifier lui-même</span>, par exemple en définissant de
	      nouvelles fonctions au cours de son exécution (c'est le concept de <span class="italique">métaprogrammation</span>).<br/>
		 Il est donc possible <span class="italique">de définir à la volée</span> une fonction avec des paramètres, <span class="italique">en indiquant pour chacun de ceux-ci une valeur par
		   défaut</span>, et de fournir ensuite la référence de cette fonction à l'option <b>command</b>. Puisque la fonction est définie <span class="italique">en cours
		   d'exécution</span>, ces valeurs par défaut peuvent être les contenus de variables. Lorsque l'événement « clic sur le
		   bouton » provoquera l'appel de la fonction, celle-ci utilisera donc les valeurs par défaut de ses paramètres, comme s'il s'agissait
		   d'arguments. Le résultat de l'opération équivaut par conséquent à un transfert d'arguments classique.</li>
          </ul>
          <p>Pour illustrer cette technique, remplacez les lignes 17 à 20 du script par les suivantes :</p>
          <p>
            <b>
              <span style="color:#000080;"># Création du bouton. On définit à la volée une fonction avec un</span>
            </b>
            <br/>
            <b>
              <span style="color:#000080;"># paramètre dont la valeur par défaut est l'argument à transmettre.</span>
            </b>
            <br/>
            <b>
              <span style="color:#000080;"># Cette fonction appelle la méthode qui nécessite un argument :</span>
            </b>
            <br/>
            <b>
              <span style="color:#000080;">def agir(arg = b):</span>
            </b>
            <br/>
            <b>
              <span style="color:#000080;">self.action(arg)</span>
            </b>
            <br/>
            <b>
              <span style="color:#000080;"># La commande associée au bouton appelle la fonction ci-dessus :</span>
            </b>
            <br/>
            <b>
              <span style="color:#000080;">bou = Button(self, image = self.photoI[b], relief = GROOVE,</span>
            </b>
            <br/>
            <b>
              <span style="color:#000080;">command = agir)</span>
            </b>
          </p>
          <ul class="ListeDVP">
            <li>Voilà pour le principe. Mais tout ce qui précède peut être simplifié, en faisant appel à une expression <b>lambda</b>. Ce mot
	      réservé Python désigne une <span class="italique">expression</span> qui renvoie un <span class="italique">objetfonction</span>, similaire à ceux que vous créez avec l'instruction
	      <b>def</b>, mais avec la différence que <b>lambda</b> étant une expression et non une instruction, on peut l'utiliser comme interface afin d'invoquer une
	      fonction (avec passage d'arguments) là où ce n'est normalement pas possible. Notez au passage qu'une telle fonction est <span class="italique">anonyme</span> (elle ne
	      possède pas de nom).</li>
          </ul>
          <p>Par exemple, l'expression :</p>
          <p>
            <b>
              <span style="color:#000080;">lambda ar1=b, ar2=c : bidule(ar1,ar2)</span>
            </b>
          </p>
          <p>renvoie la référence d'une fonction anonyme créée à la volée, qui pourra elle-même invoquer la fonction <b>bidule()</b> en
	    lui transmettant les arguments <b>b</b> et <b>c</b> , ceux-ci étant utilisés comme valeurs par défaut dans la définition des paramètres
	    <b>ar1</b> et <b>ar2</b> de la fonction.</p>
          <p>Cette technique utilise finalement le même principe que la précédente, mais elle présente l'avantage d'être plus concise, raison pour
	    laquelle nous l'avons utilisée dans notre script. En revanche, elle est un peu plus difficile à comprendre :</p>
          <p>
            <b>
              <span style="color:#000080;">command = lambda arg =b: self.action(arg)</span>
            </b>
          </p>
          <p>Dans cette portion d'instruction, la commande associée au bouton se réfère à une fonction anonyme dont le paramètre <b>arg</b>
	    possède une valeur par défaut : la valeur de l'argument <b>b</b>.<br/>
		 Invoquée sans argument par la commande, cette fonction anonyme peut tout de même utiliser son paramètre <b>arg</b> (avec la valeur par défaut)
		   pour faire appel à la méthode cible <b>self.action()</b>, et l'on obtient ainsi un véritable transfert d'argument vers cette méthode
		   .</p>
          <p>Nous ne détaillerons pas davantage ici la question des expressions lambda, car elle déborde du cadre que nous nous sommes fixés pour cet
	    ouvrage d'initiation. Si vous souhaitez en savoir plus, veuillez donc consulter l'un ou l'autre des ouvrages de référence cités dans la
	    bibliographie.</p>
        </div>
        
		<h4 class="TitreSection2" id="L16-F-2">16-F-2. Passage d'une fonction (ou d'une méthode) comme argument<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h4><div class="BlocSection2">
          
          <p>Vous avez déjà rencontré de nombreux widgets comportant une telle option <b>command</b>, à laquelle il faut à chaque fois associer le
	    nom d'une fonction (ou d'une méthode). En termes plus généraux, cela signifie donc qu'une fonction avec paramètres peut recevoir la
	    référence d'une autre fonction comme argument, et l'utilité de la chose apparaît clairement ici.</p>
          <p>Nous avons d'ailleurs programmé nous-même une fonctionnalité de ce genre dans notre nouvelle classe <b>ToolBar()</b>. Vous pouvez constater que
	    nous avons inclus le nom <b>command</b> dans la liste de paramètres de son constructeur, à la ligne 6. Ce paramètre attend la référence
	    d'une fonction ou d'une méthode comme argument. La dite référence est alors mémorisée dans une variable d'instance (à la ligne 9),
	    de manière à être accessible depuis les autres méthodes de la classe. Celles-ci peuvent dès lors invoquer la fonction ou la méthode (au
	    besoin en lui transmettant des arguments si nécessaire, suivant la technique expliquée à la rubrique précédente). C'est ce que fait donc notre
	    méthode <b>action()</b>, à la ligne 25. En l'occurrence, la méthode ainsi transmise est la méthode <b>transfert()</b> de la classe
	    <b>Application</b> (cf. ligne 34).</p>
          <p>Nous sommes parvenus ainsi à développer une classe d'objets <b>ToolBar</b> parfaitement réutilisables dans d'autres contextes. Comme le montre
	    notre petite application, il suffit en effet d'instancier ces objets en indiquant la référence d'une fonction quelconque en argument de l'option
	    <b>command</b>. Cette fonction sera alors automatiquement appelée elle-même avec le numéro d'ordre du bouton cliqué par l'utilisateur.</p>
          <p>Libre à vous d'imaginer à présent ce que la fonction devra effectuer ! </p>
          <p>Pour en terminer avec cet exemple, remarquons encore un petit détail : chacun de nos boutons apparaît entouré d'un sillon (option <b><span style="color:#000080;">relief =GROOVE</span></b>). Vous pouvez aisément obtenir d'autres aspects en choisissant judicieusement les options <b>relief</b> et
	    <b>bd</b> (<span class="italique">bordure</span>) dans l'instruction d'instanciation de ces boutons. En particulier, vous pouvez choisir <b><span style="color:#000080;">relief =FLAT</span></b>
	    et <b><span style="color:#000080;">bd =0</span></b> pour obtenir des petits boutons « plats », sans aucun relief.</p>
        </div>
      </div>
      
		<h3 class="TitreSection1" id="L16-G">16-G. Fenêtres avec menus<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h3><div class="BlocSection1">
        
        <div class="div-figure"><figure class="figure-center"><a data-lightbox="lightbox[article]" href="./images/image55.png"><img class="ImgCliquable figure-img-caption" src="./images/image55.png" alt="Image non disponible" width="309" height="325"/></a></figure></div>
        <p>Pour terminer notre petite visite guidée des widgets <span class="italique">tkinter</span>, nous allons décrire à présent la construction d'une fenêtre
	  d'application dotée de différents types de menus « déroulants », chacun de ces menus pouvant être
	  « détaché » de l'application principale pour devenir lui-même une petite fenêtre indépendante, comme dans l'illustration
	  ci-contre.</p>
        <p>Cet exercice un peu plus long nous servira également de révision, et nous le réaliserons par étapes, en appliquant une stratégie de
	  programmation que l'on appelle <span class="italique">développement incrémental</span>. </p>
        <p>Comme nous l'avons déjà expliqué précédemment<a class="signetNoteBasPage" id="signetNoteBasPage82" href="#noteBasPage82">(82)</a>, cette méthode consiste à commencer l'écriture d'un programme par une ébauche, qui ne comporte que quelques
	  lignes seulement mais qui est déjà fonctionnelle. On teste alors cette ébauche soigneusement afin d'en éliminer les <span class="italique">bugs</span> éventuels.
	  Lorsque l'ébauche fonctionne correctement, on y ajoute une fonctionnalité supplémentaire. On teste ce complément jusqu'à ce qu'il donne
	  entière satisfaction, puis on en ajoute un autre, et ainsi de suite...</p>
        <p><span class="italique">Cela ne signifie pas que vous pouvez commencer directement à programmer</span> sans avoir au préalable effectué une analyse sérieuse du
	  projet, dont au moins les grandes lignes devront être convenablement décrites dans un <span class="italique">cahier des charges</span> clairement rédigé.</p>
        <blockquote class="citation"><div>Il reste également impératif de commenter convenablement le code produit, au fur et à mesure de son élaboration. S<span class="italique">'</span>efforcer de
	  rédiger de bons commentaires est en effet nécessaire, non seulement pour que votre code soit facile à lire (et donc à maintenir plus tard, par
	  d<span class="italique">'</span>autres ou par vous-même), mais aussi pour que vous soyez forcés d<span class="italique">'</span>exprimer ce que vous souhaitez vraiment que la machine fasse (Cf. erreurs
	  sémantiques, page .) </div></blockquote>
        
		<h4 class="TitreSection2" id="L16-G-1">16-G-1. Cahier des charges de l'exercice<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h4><div class="BlocSection2">
          
          <p>Notre application comportera simplement une barre de menus et un canevas. Les différentes rubriques et options des menus ne serviront qu'à faire
	    apparaître des fragments de texte dans le canevas ou à modifier des détails de décoration, mais ce seront avant tout des exemples variés,
	    destinés à donner un aperçu des nombreuses possibilités offertes par ce type de widget, accessoire indispensable de toute application moderne d'une
	    certaine importance.</p>
          <p>Nous souhaitons également que le code produit dans cet exercice soit bien structuré. Pour ce faire, nous ferons usage de deux classes : une
	    classe pour l'application principale, et une autre pour la barre de menus. Nous voulons procéder ainsi afin de bien mettre en évidence la construction d'une
	    application type incorporant plusieurs classes d'objets interactifs.</p>
        </div>
        
		<h4 class="TitreSection2" id="L16-G-2">16-G-2. Première ébauche du programme<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h4><div class="BlocSection2">
          
          <p>Lorsque l'on construit l'ébauche d'un programme, il faut tâcher d'y faire apparaître le plus tôt possible la structure d'ensemble, avec
	    les relations entre les principaux blocs qui constitueront l'application définitive. C'est ce que nous nous sommes efforcés de faire dans l'exemple
	    ci-dessous :</p>
          <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e45359">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e45359" onclick="selectionCode('contenuCoded0e45359', 'IdTitreCode-d0e45359');">S&eacute;lectionnez</span></div></div><div style="overflow:auto;" class="code_avec_lignes"><div class="numeros_lignes">1.<br/>2.<br/>3.<br/>4.<br/>5.<br/>6.<br/>7.<br/>8.<br/>9.<br/>10.<br/>11.<br/>12.<br/>13.<br/>14.<br/>15.<br/>16.<br/>17.<br/>18.<br/>19.<br/>20.<br/>21.<br/>22.<br/>23.<br/>24.<br/>25.<br/>26.<br/>27.<br/>28.<br/>29.<br/>30.<br/>31.<br/>32.<br/>33.<br/>34.<br/>35.<br/>36.<br/>37.<br/></div><pre class="code_uniquement" style="margin: 0"><code class="contenuCode" id="contenuCoded0e45359"><code class="python_keyword1">from</code> tkinter <code class="python_keyword1">import</code> <code class="python_operator">*</code>
 
<code class="python_keyword1">class</code> <code class="python_function">MenuBar</code><code class="python_operator">(</code>Frame):
  <code class="python_literal2">"""Barre de menus déroulants"""</code>
  <code class="python_keyword1">def</code> <code class="python_keyword3">__init__</code><code class="python_operator">(</code>self, boss <code class="python_operator">=</code><code class="python_keyword3">None</code>):
      Frame.<code class="python_keyword3">__init__</code><code class="python_operator">(</code>self, borderwidth <code class="python_operator">=</code><code class="python_digit">2</code>)
 
      <code class="python_comment1">##### Menu &lt;Fichier&gt; #####</code>
      fileMenu <code class="python_operator">=</code> <code class="python_function">Menubutton</code><code class="python_operator">(</code>self, text <code class="python_operator">=</code><code class="python_literal1">'Fichier'</code>)
      fileMenu.<code class="python_function">pack</code><code class="python_operator">(</code>side <code class="python_operator">=</code>LEFT)
      <code class="python_comment1"># Partie "déroulante" :</code>
      me1 <code class="python_operator">=</code> <code class="python_function">Menu</code><code class="python_operator">(</code>fileMenu)
      me1.<code class="python_function">add_command</code><code class="python_operator">(</code>label <code class="python_operator">=</code><code class="python_literal1">'Effacer'</code>, underline <code class="python_operator">=</code><code class="python_digit">0</code>,
	      command <code class="python_operator">=</code> boss.effacer)
      me1.<code class="python_function">add_command</code><code class="python_operator">(</code>label <code class="python_operator">=</code><code class="python_literal1">'Terminer'</code>, underline <code class="python_operator">=</code><code class="python_digit">0</code>,
	      command <code class="python_operator">=</code> boss.quit)
      <code class="python_comment1"># Intégration du menu :</code>
      fileMenu.<code class="python_function">configure</code><code class="python_operator">(</code>menu <code class="python_operator">=</code> me1)	
 
<code class="python_keyword1">class</code> <code class="python_function">Application</code><code class="python_operator">(</code>Frame):
  <code class="python_literal2">"""Application principale"""</code>
  <code class="python_keyword1">def</code> <code class="python_keyword3">__init__</code><code class="python_operator">(</code>self, boss <code class="python_operator">=</code><code class="python_keyword3">None</code>):
      Frame.<code class="python_keyword3">__init__</code><code class="python_operator">(</code>self)
      self.master.<code class="python_function">title</code><code class="python_operator">(</code><code class="python_literal1">'Fenêtre avec menus'</code>)
      mBar <code class="python_operator">=</code> <code class="python_function">MenuBar</code><code class="python_operator">(</code>self)
      mBar.<code class="python_function">pack</code><code class="python_operator">(</code>)
      self.can <code class="python_operator">=</code> <code class="python_function">Canvas</code><code class="python_operator">(</code>self, bg<code class="python_operator">=</code><code class="python_literal1">'light grey'</code>, height<code class="python_operator">=</code><code class="python_digit">190</code>,
	     width<code class="python_operator">=</code><code class="python_digit">250</code>, borderwidth <code class="python_operator">=</code><code class="python_digit">2</code>)
      self.can.<code class="python_function">pack</code><code class="python_operator">(</code>)
      self.<code class="python_function">pack</code><code class="python_operator">(</code>)
 
  <code class="python_keyword1">def</code> <code class="python_function">effacer</code><code class="python_operator">(</code>self):
      self.can.<code class="python_function">delete</code><code class="python_operator">(</code>ALL)
 
<code class="python_keyword1">if</code> <code class="python_keyword3">__name__</code> <code class="python_operator">==</code> <code class="python_literal1">'__main__'</code>:
  app <code class="python_operator">=</code> <code class="python_function">Application</code><code class="python_operator">(</code>)
  app.<code class="python_function">mainloop</code><code class="python_operator">(</code>)
</code></pre></div></div>
          <div class="div-figure"><figure class="figure-center"><img class="figure-img-caption" src="./images/image56.gif" alt="Image non disponible" width="267" height="253"/></figure></div>
          <p><br/>
		 Veuillez donc encoder ces lignes et en tester l'exécution. Vous devriez obtenir une fenêtre avec un canevas gris clair surmonté d'une barre de
		   menus. À ce stade, la barre de menus ne comporte encore que la seule rubrique « Fichier ».</p>
          <p>Cliquez sur la rubrique « Fichier » pour faire apparaître le menu correspondant : l'option « Effacer » n'est
	    pas encore fonctionnelle (elle servira plus loin à effacer le contenu du canevas), mais l'option « Terminer » devrait déjà vous
	    permettre de fermer proprement l'application.</p>
          <p>Comme tous les menus gérés par <span class="italique">tkinter</span>, le menu que vous avez créé peut être converti en menu
	    « flottant » : il suffit de cliquer sur la ligne pointillée apparaissant en-tête de menu. Vous obtenez ainsi une petite fenêtre
	    satellite, que vous pouvez alors positionner où bon vous semble sur le bureau.</p>
          
		<h5 class="TitreSection3" id="L16-G-2-A">16-G-2-A. Analyse du script<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h5><div class="BlocSection3">
            
            <p>La structure de ce petit programme devrait vous apparaître familière : afin que les classes définies dans ce script puissent
	      éventuellement être (ré)utilisées dans d'autres projets par importation, comme nous l'avons déjà expliqué
	      précédemment<a class="signetNoteBasPage" id="signetNoteBasPage83" href="#noteBasPage83">(83)</a>, le corps principal du programme (lignes 35
	      à 37) comporte l'instruction désormais classique : <br/><b><span style="color:#000080;"> if __name__ == </span><span style="color:#000080;">'</span><span style="color:#000080;">__main__</span><span style="color:#000080;">'</span><span style="color:#000080;">:</span></b></p>
            <p>Les deux instructions qui suivent consistent seulement à instancier un objet <b>app</b> et à faire fonctionner sa méthode <b>mainloop()</b>.
	      Comme vous le savez certainement, nous aurions pu également condenser ces deux instructions en une seule.</p>
            <p>L'essentiel du programme se trouve cependant dans les définitions de classes qui précèdent.</p>
            <p>La classe <b>MenuBar()</b> contient la description de la barre de menus. Dans l'état présent du script, elle se résume à une
	      ébauche de constructeur.</p>
            <ul class="ListeDVP">
              <li>Ligne 5 : Le paramètre <b>boss</b> réceptionne la référence de la fenêtre maîtresse du widget au moment de son
		instanciation. Cette référence va nous permettre d'invoquer les méthodes associées à cette fenêtre maîtresse, aux lignes 14 et
		16.</li>
              <li>Ligne 6 : Activation obligatoire du constructeur de la classe parente.</li>
              <li>Ligne 9 : Instanciation d'un widget de la classe <b>Menubutton()</b>, défini comme un « esclave » de <b>self</b>
		(c'est-à-dire l'objet composite « barre de menus » dont nous sommes occupés à définir la classe). Comme l'indique son nom,
		ce type de widget se comporte un peu comme un bouton : une action se produit lorsque l'on clique dessus.</li>
              <li>Ligne 12 : Afin que cette action consiste en l'apparition véritable d'un menu, il reste encore à définir celui-ci : ce sera encore
		un nouveau widget, de la classe <b>Menu()</b> cette fois, défini lui-même comme un « esclave » du widget <b>Menubutton</b>
		instancié à la ligne 9.</li>
              <li>Lignes 13 à 16 : On peut appliquer aux widgets de la classe <b>Menu()</b> un certain nombre de méthodes spécifiques, chacune d'elles
		acceptant de nombreuses options. Nous utilisons ici la méthode <b>add_command()</b> pour installer dans le menu les deux items « Effacer »
		et « Terminer ». Nous y intégrons tout de suite l'option <b>underline</b>, qui sert à définir un raccourci clavier : cette
		option indique en effet lequel des caractères de l'item doit apparaître souligné à l'écran. L'utilisateur sait alors qu'il lui suffit de
		frapper ce caractère au clavier pour que l'action correspondant à cet item soit activée (comme s'il avait cliqué dessus à l'aide de la
		souris).<br/>
		 L'action à déclencher lorsque l'utilisateur sélectionne l'item est désignée par l'option <b>command</b>. Dans notre script, les commandes
		   invoquées sont toutes les deux des méthodes de la fenêtre maîtresse, dont la référence aura été transmise au
		   présent widget au moment de son instanciation par l'intermédiaire du paramètre <b>boss</b>. La méthode <b>effacer()</b>, que nous
		   définissons nous-même plus loin, servira à vider le canevas. La méthode prédéfinie <b>quit()</b> provoque la sortie de la boucle
		   <b>mainloop()</b> et donc l'arrêt du réceptionnaire d'événements associé à la fenêtre d'application.</li>
              <li>Ligne 18 : Lorsque les items du menu ont été définis, il reste encore à reconfigurer le widget maître <b>Menubutton</b> de
		manière à ce que son option « menu » désigne effectivement le <b>Menu</b> que nous venons de construire. En effet, nous ne
		pouvions pas déjà préciser cette option lors de la définition initiale du widget <b>Menubutton</b>, puisqu'à ce stade le <b>Menu</b>
		n'existait pas encore. Nous ne pouvions pas non plus définir le widget <b>Menu</b> en premier lieu, puisque celui-ci doit être défini comme un
		« esclave » du widget <b>Menubutton.</b> Il faut donc bien procéder en trois étapes comme nous l'avons fait, en faisant appel à
		la méthode <b>configure()</b>. Cette méthode peut être appliquée à n'importe quel widget préexistant pour en modifier l'une ou
		l'autre option.</li>
            </ul>
            <p>La classe <b>Application()</b> contient la description de la fenêtre principale du programme ainsi que les méthodes gestionnaires
	      d'événements qui lui sont associées.</p>
            <ul class="ListeDVP">
              <li>Ligne 20 : Nous préférons faire dériver notre application de la classe <b>Frame()</b>, qui présente de nombreuses options,
		plutôt que de la classe primordiale <b>Tk()</b>. De cette manière, l'application toute entière est encapsulée dans un widget, lequel pourra
		éventuellement être intégré par la suite dans une application plus importante. Rappelons que, de toute manière, tkinter instanciera
		automatiquement une fenêtre maîtresse de type <b>Tk()</b> pour contenir cette <b>Frame</b>.</li>
              <li>Lignes 23-24 : Après l'indispensable activation du constructeur de la classe parente, nous utilisons l'attribut <b>master</b> que tkinter associe
		automatiquement à chaque widget, pour référencer la classe parente (dans le cas présent, l'objet correspondant est la fenêtre principale
		de l'application) et en redéfinir le bandeau-titre.</li>
              <li>Lignes 25 à 29 : Instanciation de deux widgets esclaves pour notre cadre (<b>Frame</b>) principal. La « barre de menus » est
		évidemment le widget défini dans l'autre classe.</li>
              <li>Ligne 30 : Comme n'importe quel autre widget, notrecadre principal doit être confié à une méthode de mis en place afin
		d'apparaître véritablement.</li>
              <li>Lignes 32-33 : La méthode servant à effacer le canevas est définie dans la classe présente (puisque l'objet canevas en fait
		partie), mais elle est invoquée par l'option <b>command</b> d'un widget esclave défini dans une autre classe.<br/>
		 Comme nous l'avons expliqué plus haut, ce widget esclave reçoit la référence de son widget maître par l'intermédiaire du
		   paramètre <b>boss</b>. Toutes ces références sont hiérarchisées à l'aide de la qualification des noms par points.</li>
            </ul>
          </div>
        </div>
        
		<h4 class="TitreSection2" id="L16-G-3">16-G-3. Ajout de la rubrique Musiciens<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h4><div class="BlocSection2">
          
          <p>Continuez le développement de ce petit programme, en ajoutant les lignes suivantes dans le constructeur de la classe <b>MenuBar()</b> (après la
	    ligne 18) :</p>
          <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e45916">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e45916" onclick="selectionCode('contenuCoded0e45916', 'IdTitreCode-d0e45916');">S&eacute;lectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e45916" class="contenuCode"><code class="python_comment1">##### Menu &lt;Musiciens&gt; #####	      </code>
      self.musi <code class="python_operator">=</code> <code class="python_function">Menubutton</code><code class="python_operator">(</code>self, text <code class="python_operator">=</code><code class="python_literal1">'Musiciens'</code>)
      self.musi.<code class="python_function">pack</code><code class="python_operator">(</code>side <code class="python_operator">=</code>LEFT, padx <code class="python_operator">=</code><code class="python_literal1">'3'</code>)
      <code class="python_comment1"># Partie "déroulante" du menu &lt;Musiciens&gt; :</code>
      me1 <code class="python_operator">=</code> <code class="python_function">Menu</code><code class="python_operator">(</code>self.musi)
      me1.<code class="python_function">add_command</code><code class="python_operator">(</code>label <code class="python_operator">=</code><code class="python_literal1">'17e siècle'</code>, underline <code class="python_operator">=</code><code class="python_digit">1</code>,
	      foreground <code class="python_operator">=</code><code class="python_literal1">'red'</code>, background <code class="python_operator">=</code><code class="python_literal1">'yellow'</code>,
	      font <code class="python_operator">=(</code><code class="python_literal1">'Comic Sans MS'</code>, <code class="python_digit">11</code>),
	      command <code class="python_operator">=</code> boss.showMusi17)
      me1.<code class="python_function">add_command</code><code class="python_operator">(</code>label <code class="python_operator">=</code><code class="python_literal1">'18e siècle'</code>, underline <code class="python_operator">=</code><code class="python_digit">1</code>,
	      foreground<code class="python_operator">=</code><code class="python_literal1">'royal blue'</code>, background <code class="python_operator">=</code><code class="python_literal1">'white'</code>,
	      font <code class="python_operator">=(</code><code class="python_literal1">'Comic Sans MS'</code>, <code class="python_digit">11</code>, <code class="python_literal1">'bold'</code>),
	      command <code class="python_operator">=</code> boss.showMusi18)
      <code class="python_comment1"># Intégration du menu :</code>
      self.musi.<code class="python_function">configure</code><code class="python_operator">(</code>menu <code class="python_operator">=</code> me1)</code></pre></div>
          <p>... ainsi que les définitions de méthodes suivantes à la classe <b>Application()</b> (après la ligne 33) :</p>
          <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e46050">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e46050" onclick="selectionCode('contenuCoded0e46050', 'IdTitreCode-d0e46050');">S&eacute;lectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e46050" class="contenuCode">    <code class="python_keyword1">def</code> <code class="python_function">showMusi17</code><code class="python_operator">(</code>self):
      self.can.<code class="python_function">create_text</code><code class="python_operator">(</code><code class="python_digit">10</code>, <code class="python_digit">10</code>, anchor <code class="python_operator">=</code>NW, text <code class="python_operator">=</code><code class="python_literal1">'H. Purcell'</code>,
	  font<code class="python_operator">=(</code><code class="python_literal1">'Times'</code>, <code class="python_digit">20</code>, <code class="python_literal1">'bold'</code>), fill <code class="python_operator">=</code><code class="python_literal1">'yellow'</code>)
 
  <code class="python_keyword1">def</code> <code class="python_function">showMusi18</code><code class="python_operator">(</code>self):
      self.can.<code class="python_function">create_text</code><code class="python_operator">(</code><code class="python_digit">245</code>, <code class="python_digit">40</code>, anchor <code class="python_operator">=</code>NE, text <code class="python_operator">=</code><code class="python_literal1">"W. A. Mozart"</code>,
	  font <code class="python_operator">=(</code><code class="python_literal1">'Times'</code>, <code class="python_digit">20</code>, <code class="python_literal1">'italic'</code>), fill <code class="python_operator">=</code><code class="python_literal1">'dark green'</code>)</code></pre></div>
          <div class="div-figure"><figure class="figure-center"><img class="figure-img-caption" src="./images/100000000000010A000000FE2BD51DF4.gif" alt="Image non disponible" width="266" height="254"/></figure></div>
          <p>Lorsque vous y aurez ajouté toutes ces lignes, sauvegardez le script et exécutez-le.</p>
          <p>Votre barre de menus comporte à présent une rubrique supplémentaire : la rubrique « Musiciens ».</p>
          <p>Le menu correspondant propose deux items qui sont affichés avec des couleurs et des polices personnalisées. Vous pourrez vous inspirer de ces
	    techniques décoratives pour vos projets personnels. À utiliser avec modération !</p>
          <p>Les commandes que nous avons associées à ces items sont évidemment simplifiées afin de ne pas alourdir l'exercice : elles provoquent
	    l'affichage de petits textes sur le canevas.</p>
          
		<h5 class="TitreSection3" id="L16-G-3-A">16-G-3-A. Analyse du script<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h5><div class="BlocSection3">
            
            <p>Les seules nouveautés introduites dans ces lignes concernent l'utilisation de polices de caractères bien déterminées (option
	      <b>font</b>), ainsi que de couleurs pour l'avant-plan (option <b>foreground</b>) et le fond (option <b>background</b>) des textes affichés.</p>
            <p>Veuillez noter encore une fois l'utilisation de l'option <b>underline</b> pour désigner les caractères correspondant à des raccourcis
	      claviers (en n'oubliant pas que la numérotation des caractères d'une chaîne commence à partir de zéro), et surtout que l'option
	      <b>command</b> de ces widgets accède aux méthodes de l'autre classe, par l'intermédiaire de la référence mémorisée dans l'attribut
	      <b>boss</b>.</p>
            <p>La méthode <b>create_text()</b> du canevas doit être utilisée avec deux arguments numériques, qui sont les coordonnées X et Y d'un
	      point dans le canevas. Le texte transmis sera positionné par rapport à ce point, en fonction de la valeur choisie pour l'option <b>anchor</b> :
	      celle-ci détermine comment le fragment de texte doit être « ancré » au point choisi dans le canevas, par son centre, par son coin
	      supérieur gauche, etc., en fonction d'une syntaxe qui utilise l'analogie des points cardinaux géographiques (<b>NW</b> = angle supérieur gauche,
	      <b>SE</b> = angle inférieur droit, <b>CENTER</b> = centre, etc.).</p>
          </div>
        </div>
        
		<h4 class="TitreSection2" id="L16-G-4">16-G-4. Ajout de la rubrique Peintres<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h4><div class="BlocSection2">
          
          <p>Cette nouvelle rubrique est construite d'une manière assez semblable à la précédente, mais nous lui avons ajouté une
	    fonctionnalité supplémentaire : des menus « en cascade ». Veuillez donc ajouter les lignes suivantes dans le constructeur de la
	    classe <b>MenuBar()</b> :</p>
          <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e46211">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e46211" onclick="selectionCode('contenuCoded0e46211', 'IdTitreCode-d0e46211');">S&eacute;lectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e46211" class="contenuCode">     <code class="python_comment1">##### Menu &lt;Peintres&gt; #####</code>
      self.pein <code class="python_operator">=</code> <code class="python_function">Menubutton</code><code class="python_operator">(</code>self, text <code class="python_operator">=</code><code class="python_literal1">'Peintres'</code>)
      self.pein.<code class="python_function">pack</code><code class="python_operator">(</code>side <code class="python_operator">=</code>LEFT, padx<code class="python_operator">=</code><code class="python_literal1">'3'</code>)
      <code class="python_comment1"># Partie "déroulante" :</code>
      me1 <code class="python_operator">=</code> <code class="python_function">Menu</code><code class="python_operator">(</code>self.pein)
      me1.<code class="python_function">add_command</code><code class="python_operator">(</code>label <code class="python_operator">=</code><code class="python_literal1">'classiques'</code>, state<code class="python_operator">=</code>DISABLED)
      me1.<code class="python_function">add_command</code><code class="python_operator">(</code>label <code class="python_operator">=</code><code class="python_literal1">'romantiques'</code>, underline <code class="python_operator">=</code><code class="python_digit">0</code>,
	      command <code class="python_operator">=</code> boss.showRomanti)
      <code class="python_comment1"># Sous-menu pour les peintres impressionistes :</code>
      me2 <code class="python_operator">=</code> <code class="python_function">Menu</code><code class="python_operator">(</code>me1)
      me2.<code class="python_function">add_command</code><code class="python_operator">(</code>label <code class="python_operator">=</code><code class="python_literal1">'Claude Monet'</code>, underline <code class="python_operator">=</code><code class="python_digit">7</code>,
	      command <code class="python_operator">=</code> boss.tabMonet)
      me2.<code class="python_function">add_command</code><code class="python_operator">(</code>label <code class="python_operator">=</code><code class="python_literal1">'Auguste Renoir'</code>, underline <code class="python_operator">=</code><code class="python_digit">8</code>,
	      command <code class="python_operator">=</code> boss.tabRenoir)
      me2.<code class="python_function">add_command</code><code class="python_operator">(</code>label <code class="python_operator">=</code><code class="python_literal1">'Edgar Degas'</code>, underline <code class="python_operator">=</code><code class="python_digit">6</code>,
	      command <code class="python_operator">=</code> boss.tabDegas)
      <code class="python_comment1"># Intégration du sous-menu :</code>
      me1.<code class="python_function">add_cascade</code><code class="python_operator">(</code>label <code class="python_operator">=</code><code class="python_literal1">'impressionistes'</code>, underline<code class="python_operator">=</code><code class="python_digit">0</code>, menu <code class="python_operator">=</code>me2)
      <code class="python_comment1"># Intégration du menu :</code>
      self.pein.<code class="python_function">configure</code><code class="python_operator">(</code>menu <code class="python_operator">=</code>me1)</code></pre></div>
          <p>... et les définitions suivantes dans la classe <b>Application() </b>:</p>
          <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e46388">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e46388" onclick="selectionCode('contenuCoded0e46388', 'IdTitreCode-d0e46388');">S&eacute;lectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e46388" class="contenuCode">    <code class="python_keyword1">def</code> <code class="python_function">showRomanti</code><code class="python_operator">(</code>self):
      self.can.<code class="python_function">create_text</code><code class="python_operator">(</code><code class="python_digit">245</code>, <code class="python_digit">70</code>, anchor <code class="python_operator">=</code>NE, text <code class="python_operator">=</code> <code class="python_literal1">"E. Delacroix"</code>,
	  font <code class="python_operator">=(</code><code class="python_literal1">'Times'</code>, <code class="python_digit">20</code>, <code class="python_literal1">'bold italic'</code>), fill <code class="python_operator">=</code><code class="python_literal1">'blue'</code>)
 
  <code class="python_keyword1">def</code> <code class="python_function">tabMonet</code><code class="python_operator">(</code>self):
      self.can.<code class="python_function">create_text</code><code class="python_operator">(</code><code class="python_digit">10</code>, <code class="python_digit">100</code>, anchor <code class="python_operator">=</code>NW, text <code class="python_operator">=</code> <code class="python_literal1">'Nymphéas à Giverny'</code>,
	  font <code class="python_operator">=(</code><code class="python_literal1">'Technical'</code>, <code class="python_digit">20</code>), fill <code class="python_operator">=</code><code class="python_literal1">'red'</code>)
 
  <code class="python_keyword1">def</code> <code class="python_function">tabRenoir</code><code class="python_operator">(</code>self):
      self.can.<code class="python_function">create_text</code><code class="python_operator">(</code><code class="python_digit">10</code>, <code class="python_digit">130</code>, anchor <code class="python_operator">=</code>NW,
	  text <code class="python_operator">=</code> <code class="python_literal1">'Le moulin de la galette'</code>,
	  font <code class="python_operator">=(</code><code class="python_literal1">'Dom Casual BT'</code>, <code class="python_digit">20</code>), fill <code class="python_operator">=</code><code class="python_literal1">'maroon'</code>)
 
  <code class="python_keyword1">def</code> <code class="python_function">tabDegas</code><code class="python_operator">(</code>self):
      self.can.<code class="python_function">create_text</code><code class="python_operator">(</code><code class="python_digit">10</code>, <code class="python_digit">160</code>, anchor <code class="python_operator">=</code>NW, text <code class="python_operator">=</code> <code class="python_literal1">'Danseuses au repos'</code>,
	  font <code class="python_operator">=(</code><code class="python_literal1">'President'</code>, <code class="python_digit">20</code>), fill <code class="python_operator">=</code><code class="python_literal1">'purple'</code>)</code></pre></div>
          
		<h5 class="TitreSection3" id="L16-G-4-A">16-G-4-A. Analyse du script<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h5><div class="BlocSection3">
            
            <p>Vous pouvez réaliser aisément des menus en cascade, en enchaînant des sous-menus les uns aux autres jusqu'à un niveau quelconque (il
	      vous est cependant déconseillé d'aller au-delà de 5 niveaux successifs : vos utilisateurs s'y perdraient).</p>
            <p>Un sous-menu est défini comme un menu « esclave » du menu de niveau précédent (dans notre exemple, <b>me2</b> est
	      défini comme un menu « esclave » de <b>me1</b>). L'intégration est assurée ensuite à l'aide de la méthode
	      <b>add_cascade()</b>.</p>
            <p>L'un des items est désactivé (option <b>state = DISABLED</b>). L'exemple suivant vous montrera comment vous pouvez activer ou désactiver
	      à volonté des items, par programme.</p>
          </div>
        </div>
        
		<h4 class="TitreSection2" id="L16-G-5">16-G-5. Ajout de la rubrique Options<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h4><div class="BlocSection2">
          
          <p>La définition de cette rubrique est un peu plus compliquée, parce que nous allons y intégrer l'utilisation de variables internes à
	    <span class="italique">tkinter</span>.</p>
          <p>Les fonctionnalités de ce menu sont cependant beaucoup plus élaborées : les options ajoutées permettent en effet d'activer ou de
	    désactiver à volonté les rubriques « Musiciens » et « Peintres », et vous pouvez également modifier à
	    volonté l'aspect de la barre de menus elle-même.</p>
          <p>Veuillez donc ajouter les lignes suivantes dans le constructeur de la classe <b>MenuBar()</b> :</p>
          <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e46602">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e46602" onclick="selectionCode('contenuCoded0e46602', 'IdTitreCode-d0e46602');">S&eacute;lectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e46602" class="contenuCode">     <code class="python_comment1">##### Menu &lt;Options&gt; ##### </code>
      optMenu <code class="python_operator">=</code> <code class="python_function">Menubutton</code><code class="python_operator">(</code>self, text <code class="python_operator">=</code><code class="python_literal1">'Options'</code>) 
      optMenu.<code class="python_function">pack</code><code class="python_operator">(</code>side <code class="python_operator">=</code>LEFT, padx <code class="python_operator">=</code><code class="python_literal1">'3'</code>) 
      <code class="python_comment1"># Variables tkinter : </code>
      self.relief <code class="python_operator">=</code> <code class="python_function">IntVar</code><code class="python_operator">(</code>) 
      self.actPein <code class="python_operator">=</code> <code class="python_function">IntVar</code><code class="python_operator">(</code>) 
      self.actMusi <code class="python_operator">=</code> <code class="python_function">IntVar</code><code class="python_operator">(</code>)	  
      <code class="python_comment1"># Partie "déroulante" du menu : </code>
      self.mo <code class="python_operator">=</code> <code class="python_function">Menu</code><code class="python_operator">(</code>optMenu) 
      self.mo.<code class="python_function">add_command</code><code class="python_operator">(</code>label <code class="python_operator">=</code> <code class="python_literal1">'Activer :'</code>, foreground <code class="python_operator">=</code><code class="python_literal1">'blue'</code>) 
      self.mo.<code class="python_function">add_checkbutton</code><code class="python_operator">(</code>label <code class="python_operator">=</code><code class="python_literal1">'musiciens'</code>, 
	 command <code class="python_operator">=</code> self.choixActifs, variable <code class="python_operator">=</code>self.actMusi) 
      self.mo.<code class="python_function">add_checkbutton</code><code class="python_operator">(</code>label <code class="python_operator">=</code><code class="python_literal1">'peintres'</code>, 
	 command <code class="python_operator">=</code> self.choixActifs, variable <code class="python_operator">=</code>self.actPein) 
      self.mo.<code class="python_function">add_separator</code><code class="python_operator">(</code>) 
      self.mo.<code class="python_function">add_command</code><code class="python_operator">(</code>label <code class="python_operator">=</code> <code class="python_literal1">'Relief :'</code>, foreground <code class="python_operator">=</code><code class="python_literal1">'blue'</code>) 
      <code class="python_keyword1">for</code> <code class="python_operator">(</code>v, lab) <code class="python_keyword1">in</code> [<code class="python_operator">(</code><code class="python_digit">0</code>,<code class="python_literal1">'aucun'</code>), <code class="python_operator">(</code><code class="python_digit">1</code>,<code class="python_literal1">'sorti'</code>), <code class="python_operator">(</code><code class="python_digit">2</code>,<code class="python_literal1">'rentré'</code>), 
	    <code class="python_operator">(</code><code class="python_digit">3</code>,<code class="python_literal1">'sillon'</code>), <code class="python_operator">(</code><code class="python_digit">4</code>,<code class="python_literal1">'crête'</code>), <code class="python_operator">(</code><code class="python_digit">5</code>,<code class="python_literal1">'bordure'</code>)]: 
      self.mo.<code class="python_function">add_radiobutton</code><code class="python_operator">(</code>label <code class="python_operator">=</code>lab, variable <code class="python_operator">=</code>self.relief, 
		  value <code class="python_operator">=</code>v, command <code class="python_operator">=</code>self.reliefBarre) 
      <code class="python_comment1"># Intégration du menu : </code>
      optMenu.<code class="python_function">configure</code><code class="python_operator">(</code>menu <code class="python_operator">=</code> self.mo)</code></pre></div>
          <p>... ainsi que les définitions de méthodes suivantes (toujours dans la classe <b>MenuBar()</b>) :</p>
          <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e46832">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e46832" onclick="selectionCode('contenuCoded0e46832', 'IdTitreCode-d0e46832');">S&eacute;lectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e46832" class="contenuCode">    <code class="python_keyword1">def</code> <code class="python_function">reliefBarre</code><code class="python_operator">(</code>self):
      choix <code class="python_operator">=</code> self.relief.<code class="python_function">get</code><code class="python_operator">(</code>)
      self.<code class="python_function">configure</code><code class="python_operator">(</code>relief <code class="python_operator">=</code>[FLAT,RAISED,SUNKEN,GROOVE,RIDGE,SOLID][choix])
 
  <code class="python_keyword1">def</code> <code class="python_function">choixActifs</code><code class="python_operator">(</code>self):
      p <code class="python_operator">=</code> self.actPein.<code class="python_function">get</code><code class="python_operator">(</code>)
      m <code class="python_operator">=</code> self.actMusi.<code class="python_function">get</code><code class="python_operator">(</code>)
      self.pein.<code class="python_function">configure</code><code class="python_operator">(</code>state <code class="python_operator">=</code>[DISABLED, NORMAL][p])
      self.musi.<code class="python_function">configure</code><code class="python_operator">(</code>state <code class="python_operator">=</code>[DISABLED, NORMAL][m])</code></pre></div>
        </div>
        
		<h4 class="TitreSection2" id="L16-G-6">16-G-6. Menu avec cases à cocher<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h4><div class="BlocSection2">
          
          <p>Notre nouveau menu déroulant comporte deux parties. Afin de bien les mettre en évidence, nous avons inséré une ligne de séparation
	    ainsi que deux « faux items » (« Activer : » et « Relief : ») qui servent simplement de titres.
	    Nous faisons apparaître ceux-ci en couleur pour que l'utilisateur ne les confonde pas avec de véritables commandes.</p>
          <p>Les items de la première partie sont dotées de « cases à cocher ». Lorsque l'utilisateur effectue un clic de souris sur
	    l'un ou l'autre de ces items, les options correspondantes sont activées ou désactivées, et ces états
	    « actif / inactif » sont affichés sous la forme d'une encoche. Les instructions qui servent à mettre en place ce type de
	    rubrique sont assez explicites. Elles présentent en effet ces items comme des widgets de type <b>chekbutton</b> :</p>
          <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e46914">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e46914" onclick="selectionCode('contenuCoded0e46914', 'IdTitreCode-d0e46914');">S&eacute;lectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e46914" class="contenuCode">    self.mo.<code class="python_function">add_checkbutton</code><code class="python_operator">(</code>label <code class="python_operator">=</code> <code class="python_literal1">'musiciens'</code>, command <code class="python_operator">=</code> choixActifs,
	     variable <code class="python_operator">=</code> mbu.me1.music)</code></pre></div>
          <p>Il est important de comprendre ici que ce type de widget comporte nécessairement une variable interne, destinée à mémoriser l'état
	    « actif / inactif » du widget. Comme nous l'avons déjà expliqué plus haut, cette variable ne peut pas être une
	    variable Python ordinaire, parce que les classes de la bibliothèque <span class="italique">tkinter</span> sont écrites dans un autre langage. Et par conséquent, on ne pourra
	    accéder à une telle variable interne qu'à travers un objet-interface, que nous appellerons variable <span class="italique">tkinter</span> pour simplifier<a class="signetNoteBasPage" id="signetNoteBasPage84" href="#noteBasPage84">(84)</a>.</p>
          <p>C'est ainsi que dans notre exemple, nous utilisons la classe <span class="italique">tkinter</span><b>IntVar()</b> pour créer des objets équivalents à des variables de
	    type entier.</p>
          <ul class="ListeDVP">
            <li>Nous instancions donc un de ces objets-variables, que nous mémorisons comme attribut d'instance : <b><span style="color:#000080;">self.actMusi
	      =IntVar()</span></b>.<br/>
		 Après cette affectation, l'objet référencé dans <b>self.actMusi</b> contient désormais l'équivalent d'une variable de type entier,
		   dans un format spécifique à <span class="italique">tkinter</span>.</li>
            <li>Il faut ensuite associer l'option <b>variable </b>de l'objet <b>checkbutton </b>à la variable <span class="italique">tkinter</span> ainsi définie :<br/><b><span style="color:#000080;">self.mo.add_checkbutton(label =</span><span style="color:#000080;">'</span><span style="color:#000080;">musiciens</span><span style="color:#000080;">'</span><span style="color:#000080;">, variable =self.actMusi)</span></b>.</li>
            <li>Il est nécessaire de procéder ainsi en deux étapes, parce que <span class="italique">tkinter</span> ne peut pas directement assigner des valeurs aux variables Python.
	      Pour une raison similaire, il n'est pas possible à Python de lire directement le contenu d'une variable <span class="italique">tkinter</span>. Il faut utiliser pour cela les
	      méthodes spécifiques de cette classe d'objets : la méthode <b>get()</b> pour lire, et la méthode <b>set()</b> pour
	      écrire :<br/><b><span style="color:#000080;">m = self.actMusi.get()</span></b>.<br/>
		 Dans cette instruction, nous affectons à <b>m</b> (variable ordinaire de Python) le contenu de la variable tkinter <b>self.actMusi</b> (laquelle est
		   elle-même associée à un widget bien déterminé).</li>
          </ul>
          <p>Tout ce qui précède peut vous paraître un peu compliqué. Considérez simplement qu'il s'agit de votre première rencontre avec les
	    problèmes d'interfaçage entre deux langages de programmation différents, utilisés ensemble dans un projet composite.</p>
        </div>
        
		<h4 class="TitreSection2" id="L16-G-7">16-G-7. Menu avec choix exclusifs<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h4><div class="BlocSection2">
          
          <p>La deuxième partie du menu « Options » permet à l'utilisateur de choisir l'aspect que prendra la barre de menus, parmi six
	    possibilités. Il va de soi que l'on ne peut activer qu'une seule de ces possibilités à la fois. Pour mettre en place ce genre de fonctionnalité, on
	    fait classiquement appel appel à des widgets de type « boutons radio ». La caractéristique essentielle de ces widgets est que plusieurs
	    d'entre eux doivent être associés à une seule et même variable <span class="italique">tkinter</span>. À chaque bouton radio correspond alors une valeur
	    particulière, et c'est cette valeur qui est affectée à la variable lorsque l'utilisateur sélectionne le bouton.</p>
          <p>Ainsi, l'instruction :</p>
          <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e47043">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e47043" onclick="selectionCode('contenuCoded0e47043', 'IdTitreCode-d0e47043');">S&eacute;lectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e47043" class="contenuCode">    self.mo.<code class="python_function">add_radiobutton</code><code class="python_operator">(</code>label <code class="python_operator">=</code><code class="python_literal1">'sillon'</code>, variable <code class="python_operator">=</code>self.relief,
	     value <code class="python_operator">=</code><code class="python_digit">3</code>, command <code class="python_operator">=</code>self.reliefBarre)</code></pre></div>
          <p>configure un item du menu « Options » de telle manière qu'il se comporte comme un bouton radio.</p>
          <p>Lorsque l'utilisateur sélectionne cet item, la valeur 3 est affectée à la variable <span class="italique">tkinter</span><b>self.relief</b> (celle-ci étant
	    désignée à l'aide de l'option <b>variable</b> du widget), et un appel est lancé en direction de la méthode <b>reliefBarre()</b>. Celle-ci
	    récupère alors la valeur mémorisée dans la variable tkinter pour effectuer son travail.</p>
          <p>Dans le contexte particulier de ce menu, nous souhaitons proposer 6 possibilités différentes à l'utilisateur. Il nous faut donc six
	    « boutons radio », pour lesquels nous pourrions encoder six instructions similaires à celle que nous avons reproduite ci-dessus, chacune
	    d'elles ne différant des cinq autres que par ses options <b>value</b> et <b>label</b>. Dans une situation de ce genre, la bonne pratique de programmation consiste
	    à placer les valeurs de ces options dans une liste, et à parcourir ensuite cette liste à l'aide d'une boucle <b>for</b>, afin d'instancier les widgets
	    avec une instruction commune :</p>
          <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e47096">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e47096" onclick="selectionCode('contenuCoded0e47096', 'IdTitreCode-d0e47096');">S&eacute;lectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e47096" class="contenuCode">    <code class="python_keyword1">for</code> <code class="python_operator">(</code>v, lab) <code class="python_keyword1">in</code> [<code class="python_operator">(</code><code class="python_digit">0</code>,<code class="python_literal1">'aucun'</code>), <code class="python_operator">(</code><code class="python_digit">1</code>,<code class="python_literal1">'sorti'</code>), <code class="python_operator">(</code><code class="python_digit">2</code>,<code class="python_literal1">'rentré'</code>),
	     <code class="python_operator">(</code><code class="python_digit">3</code>,<code class="python_literal1">'sillon'</code>), <code class="python_operator">(</code><code class="python_digit">4</code>,<code class="python_literal1">'crête'</code>), <code class="python_operator">(</code><code class="python_digit">5</code>,<code class="python_literal1">'bordure'</code>)]:
     self.mo.<code class="python_function">add_radiobutton</code><code class="python_operator">(</code>label <code class="python_operator">=</code>lab, variable <code class="python_operator">=</code>self.relief,
		 value <code class="python_operator">=</code>v, command <code class="python_operator">=</code>self.reliefBarre)</code></pre></div>
          <p>La liste utilisée est une liste de 6 tuples (valeur, libellé). À chacune des 6 itérations de la boucle, un nouvel item <b>radiobutton</b>
	    est instancié, dont les options <b>label</b> et <b>value</b> sont extraites de la liste par l'intermédiaire des variables <b>lab</b> et <b>v</b>.</p>
          <p>Dans vos projets personnels, il vous arrivera fréquemment de constater que vous pouvez ainsi remplacer des suites d'instructions similaires par une
	    structure de programmation plus compacte (en général, la combinaison d'une liste et d'une boucle, comme dans l'exemple ci-dessus).</p>
          <p>Vous découvrirez petit à petit encore d'autres techniques pour alléger votre code : nous en fournissons un exemple dans le paragraphe
	    suivant. Tâchez cependant de garder à l'esprit cette règle essentielle : un bon programme doit avant tout rester <span class="italique">très lisible</span> et
	    <span class="italique">bien commenté</span>.</p>
        </div>
        
		<h4 class="TitreSection2" id="L16-G-8">16-G-8. Contrôle du flux d'exécution à l'aide d'une liste<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h4><div class="BlocSection2">
          
          <p>Veuillez à présent considérer la définition de la méthode <b>reliefBarre()</b>.</p>
          <p>À la première ligne, la méthode <b>get()</b> nous permet de récupérer l'état d'une variable tkinter qui contient le numéro
	    du choix opéré par l'utilisateur dans le sous-menu « Relief : ».</p>
          <p>À la seconde ligne, nous utilisons le contenu de la variable <b>choix</b> pour extraire d'une liste de six éléments celui qui nous
	    intéresse. Par exemple, si <b>choix</b> contient la valeur 2, c'est l'option <b>SUNKEN</b> qui sera utilisée pour reconfigurer le widget.</p>
          <p>La variable <b>choix</b> est donc utilisée ici comme un <span class="italique">index</span>, servant à désigner un élément de la liste. En lieu et place de
	    cette construction compacte, nous aurions pu programmer une série de tests conditionnels, comme :</p>
          <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e47242">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e47242" onclick="selectionCode('contenuCoded0e47242', 'IdTitreCode-d0e47242');">S&eacute;lectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e47242" class="contenuCode"><code class="python_keyword1">if</code> choix <code class="python_operator">==</code><code class="python_digit">0</code>:
 self.<code class="python_function">configure</code><code class="python_operator">(</code>relief <code class="python_operator">=</code>FLAT)
<code class="python_keyword1">elif</code> choix <code class="python_operator">==</code><code class="python_digit">1</code>:
 self.<code class="python_function">configure</code><code class="python_operator">(</code>relief <code class="python_operator">=</code>RAISED)
<code class="python_keyword1">elif</code> choix <code class="python_operator">==</code><code class="python_digit">2</code>:
 self.<code class="python_function">configure</code><code class="python_operator">(</code>relief <code class="python_operator">=</code>SUNKEN)
...
etc.</code></pre></div>
          <p>D'un point de vue strictement fonctionnel, le résultat serait exactement le même. Vous admettrez cependant que la construction que nous avons
	    choisie est d'autant plus efficace que le nombre de possibilités de choix est élevé. Imaginez par exemple que l'un de vos programmes personnels doive
	    effectuer une sélection dans un très grand nombre d'éléments : avec une construction du type ci-dessus, vous seriez peut-être amené
	    à encoder plusieurs pages de <b>elif</b> !</p>
          <p>Nous utilisons encore la même technique dans la méthode <b>choixActifs()</b>. Ainsi l'instruction :</p>
          <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e47304">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e47304" onclick="selectionCode('contenuCoded0e47304', 'IdTitreCode-d0e47304');">S&eacute;lectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e47304" class="contenuCode">     self.pein.<code class="python_function">configure</code><code class="python_operator">(</code>state <code class="python_operator">=</code>[DISABLED, NORMAL][p])</code></pre></div>
          <p>utilise le contenu de la variable <b>p</b> comme index pour désigner lequel des deux états <b>DISABLED</b>, <b>NORMAL</b> doit être
	    sélectionné pour reconfigurer le menu « Peintres ».</p>
          <p>Lorsqu'elle est appelée, la méthode <b>choixActifs()</b> reconfigure donc les deux rubriques « Peintres » et
	    « Musiciens » de la barre de menus, pour les faire apparaître « normales » ou
	    « désactivées » en fonction de l'état des variables <b>m</b> et <b>p</b>, lesquelles sont elles-mêmes le reflet de variables
	    <span class="italique">tkinter</span>.</p>
          <p>Ces variables intermédiaires <b>m</b> et <b>p</b> ne servent en fait qu'à clarifier le script. Il serait en effet parfaitement possible de les
	    éliminer, et de rendre le script encore plus compact, en utilisant la composition d'instructions. On pourrait par exemple remplacer les deux
	    instructions :</p>
          <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e47351">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e47351" onclick="selectionCode('contenuCoded0e47351', 'IdTitreCode-d0e47351');">S&eacute;lectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e47351" class="contenuCode">     m <code class="python_operator">=</code> self.actMusi.<code class="python_function">get</code><code class="python_operator">(</code>)
  self.musi.<code class="python_function">configure</code><code class="python_operator">(</code>state <code class="python_operator">=</code>[DISABLED, NORMAL][m])</code></pre></div>
          <p>par une seule, telle que :</p>
          <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e47373">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e47373" onclick="selectionCode('contenuCoded0e47373', 'IdTitreCode-d0e47373');">S&eacute;lectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e47373" class="contenuCode">     self.musi.<code class="python_function">configure</code><code class="python_operator">(</code>state <code class="python_operator">=</code>[DISABLED, NORMAL][self.actMusi.<code class="python_function">get</code><code class="python_operator">(</code>)])</code></pre></div>
          <p>Notez cependant que ce que l'on gagne en compacité peut se payer d'une certaine perte de lisibilité.</p>
        </div>
        
		<h4 class="TitreSection2" id="L16-G-9">16-G-9. Pré-sélection d'une rubrique<a class="HautPage" href="#" title="Haut de page">&#9650;</a></h4><div class="BlocSection2">
          
          <p>Pour terminer cet exercice, voyons encore comment vous pouvez déterminer à l'avance certaines sélections, ou bien les modifier par
	    programme.</p>
          <p>Veuillez donc ajouter l'instruction suivante dans le constructeur de la classe <b>Application()</b> (juste avant l'instruction <b>self.pack()</b>, par
	    exemple) :</p>
          <div class="code_et_titre"><div class="titre_des_codes" id="IdTitreCode-d0e47410">&nbsp;<div class="selectionner_code"><span class="selectionner_code LienSelectionne" id="code-d0e47410" onclick="selectionCode('contenuCoded0e47410', 'IdTitreCode-d0e47410');">S&eacute;lectionnez</span></div></div><pre class="code_uniquement" style="overflow:auto;"><code id="contenuCoded0e47410" class="contenuCode">    mBar.mo.<code class="python_function">invoke</code><code class="python_operator">(</code><code class="python_digit">2</code>)</code></pre></div>
          <p>Lorsque vous exécutez le script ainsi modifié, vous constatez qu'au départ la rubrique « Musiciens » de la barre de menus
	    est active, alors que la rubrique « Peintres » ne l'est pas. Programmées comme elles le sont, ces deux rubriques devraient être actives
	    toutes deux par défaut. Et c'est effectivement ce qui se passe si nous supprimons l'instruction <b><span style="color:#000080;">mBar.mo.invoke(2)</span></b>.</p>
          <p>Nous vous avons suggéré d'ajouter cette instruction au script pour vous montrer comment vous pouvez effectuer par programme la même
	    opération que celle que l'on obtient normalement avec un clic de souris.</p>
          <p>L'instruction ci-dessus invoque le widget <b>mBar.mo</b> en actionnant la commande associée au deuxième item de ce widget. En consultant le listing,
	    vous pouvez vérifier que ce deuxième item est bien l'objet de type <b>checkbutton</b> qui active/désactive le menu « Peintres »
	    (rappelons encore une fois que l'on numérote toujours à partir de zéro).</p>
          <p>Au démarrage du programme, tout se passe donc comme si l'utilisateur effectuait tout de suite un premier clic sur la rubrique
	    « Peintres » du menu « Options », ce qui a pour effet de désactiver le menu correspondant.</p>
          <p>Exercice</p>
          <p>.Perfectionnez le widget « combo box simplifié » décrit à la page , de manière à ce que la liste soit
	    cachée au départ, et qu'un petit bouton à droite du champ d'entrée en provoque l'apparition. Vous devrez pour ce faire placer la liste et son
	    ascenseur dans une fenêtre satellite sans bordure (Cf. widget Toplevel, page ), positionner celle-ci correctement (il vous faudra probablement consulter les
	    sites web traitant de Tkinter pour trouver les informations nécessaires, mais cela fait partie de votre apprentissage !), et vous assurer que cette
	    fenêtre disparaisse après que l'utilisateur ait sélectionné un item dans la liste.</p>
          <div class="div-figure"><figure class="figure-center"><img class="figure-img-caption" src="./images/10000000000000EA000000771F15F883.png" alt="Image non disponible" width="234" height="119"/></figure></div>
        </div>
      </div>
    </div>
  
  
<div class="cachee"><div class="barreNavigation"><hr class="hr-separation"/><a class="lientelechargement" href="page_15.html"><img title="Page précédente" alt="précédent" src="./images/kitprecedent.png"/></a><a class="lientelechargement" href="sommaire.html"><img title="Revenir au sommaire" alt="sommaire" src="./images/kitsommaire.png"/></a><a class="lientelechargement" href="page_17.html"><img alt="suivant" title="Page suivante" src="./images/kitsuivant.png"/></a><hr class="hr-separation"/></div></div></section></section>
  
  
  
  
  
  
  <section><section class="SectionNoteBasPage articleBody"><div class="UneNoteBasDePage"><div class="NumerotationNoteBasPage"><a class="noteBasPage" id="noteBasPage80" href="#signetNoteBasPage80">(80)</a></div><div class="ContenuUneNoteBasPage">Rappel : le gestionnaire d'événements ne transmettra les messages correspondants, que si les événements
	    indiqués sont produits dans le canevas. Des clics de souris effectués en dehors ne produiront aucun effet.</div></div><div class="UneNoteBasDePage"><div class="NumerotationNoteBasPage"><a class="noteBasPage" id="noteBasPage81" href="#signetNoteBasPage81">(81)</a></div><div class="ContenuUneNoteBasPage">Nous aurions pu aussi faire
		exactement l'inverse, c'est-à-dire créer d'abord l'ascenseur sans indication de commande, puis créer la boîte de liste en indiquant la commande
		d'accès à l'ascenseur dans la ligne d'instanciation, et enfin reconfigurer l'ascenseur en lui indiquant la commande de défilement de la
		liste :<br/><br/><b><span style="color:#000080;">scrol =Scrollbar(cadreLB)</span></b><br/><b><span style="color:#000080;">self.bListe =Listbox(cadreLB, height =listSize,
		width =width-1,</span></b><br/><b><span style="color:#000080;">yscrollcommand =scrol.set)</span></b><br/><b><span style="color:#000080;">scrol.config(command =self.bListe.yview)
		</span></b></div></div><div class="UneNoteBasDePage"><div class="NumerotationNoteBasPage"><a class="noteBasPage" id="noteBasPage82" href="#signetNoteBasPage82">(82)</a></div><div class="ContenuUneNoteBasPage">Voir page : <span class="italique">recherche des erreurs et
	  expérimentation</span>.</div></div><div class="UneNoteBasDePage"><div class="NumerotationNoteBasPage"><a class="noteBasPage" id="noteBasPage83" href="#signetNoteBasPage83">(83)</a></div><div class="ContenuUneNoteBasPage">Voir page : <span class="italique">modules contenant des bibliothèques de classes</span>.</div></div><div class="UneNoteBasDePage"><div class="NumerotationNoteBasPage"><a class="noteBasPage" id="noteBasPage84" href="#signetNoteBasPage84">(84)</a></div><div class="ContenuUneNoteBasPage">Voir
	    également page . </div></div><hr class="hr-separation clear"/></section></section>
  
  
</div><p class="licence"><a rel="license" href="https://creativecommons.org/licenses/by/3.0/deed.fr"><img alt="Licence Creative Commons" style="border-width:0" src="https://i.creativecommons.org/l/by/3.0/88x31.png"/></a><br/>Le contenu de cet article est rédigé par Gérard Swinnen et est mis à disposition selon les termes de la <a rel="license" href="https://creativecommons.org/licenses/by/3.0/deed.fr"> Licence Creative Commons Attribution 3.0 non transposé</a>.<br/>Les logos Developpez.com, en-tête, pied de page, css, et look &amp; feel de l'article sont Copyright © 2021 Developpez.com.</p>
    </article>

<footer class="layout" role="contentinfo">				
  <div id="gabarit_footer">
		<div id="gabarit_footer_right">&nbsp;</div>
		<div id="gabarit_footer_left">&nbsp;</div>
		
		<p id="responsable">			
			<strong>Responsable des outils : Developpez.com</strong>
			 - <a href="https://www.developpez.net/forums/">Contacter par le forum</a>
		</p>
	</div>
	
  <div id="gabarit_pied">
  	<div id="gabarit_pied_right">&nbsp;</div>
  
  	<div id="gabarit_pied_left">&nbsp;</div>
  
  	<div id="gabarit_pied_contenu_superieur">
  	<div id="gabarit_pied_contenu">
  		<div class="gabarit_pied_div">
  			<span>Developpez.com</span>
  			<p><a href="https://club.developpez.com/contacts/">Nous contacter</a></p>
  			<p><a href="https://www.developpez.com/participez/">Participez</a></p>
  			<p><a href="https://www.developpez.com/legal/">Informations légales</a></p>
  		</div>
  		<div class="gabarit_pied_div_separation">&nbsp;</div>
  		<div class="gabarit_pied_div">
  			<span>Services</span>
  			<p><a onclick="window.open(this.href); return false;" href="https://www.developpez.net/forums/f552/hardware-systemes-logiciels/">Forum Systèmes</a></p>
  			<p><a href="https://blog.developpez.com/">Blogs</a></p>
  			<p><a href="https://www.developpez.com/hebergement/">Hébergement</a></p>
  		</div>
  		<div class="gabarit_pied_div_separation">&nbsp;</div>
  		<div class="gabarit_pied_div">
  			<span>Partenaires</span>
  			<p><a target="_blank" href="http://www.planethoster.net/">Hébergement Web</a></p>
  		</div>
  		<div style="clear: both;"></div>
  		<div id="gabarit_pied_copyright">
  			<p>Copyright &copy; 2000-2018 - www.developpez.com</p>
  		</div>
  	</div>
  	</div>
  </div>

</footer>
  </body>
</html>

		